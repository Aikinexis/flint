var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var n={exports:{}},r={},a={exports:{}},o={},i=Symbol.for("react.element"),l=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),p=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),x=Symbol.iterator;var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}function k(){}function C(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},k.prototype=w.prototype;var S=C.prototype=new k;S.constructor=C,v(S,w.prototype),S.isPureReactComponent=!0;var j=Array.isArray,E=Object.prototype.hasOwnProperty,P={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var r,a={},o=null,l=null;if(null!=t)for(r in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,r)&&!T.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:l,props:a,_owner:P.current}}function N(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var L=/\/+/g;function A(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function R(e,t,n,r,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var s=!1;if(null===e)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case l:s=!0}}if(s)return a=a(s=e),e=""===r?"."+A(s,0):r,j(a)?(n="",null!=e&&(n=e.replace(L,"$&/")+"/"),R(a,t,n,"",function(e){return e})):null!=a&&(N(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(L,"$&/")+"/")+e)),t.push(a)),1;if(s=0,r=""===r?".":r+":",j(e))for(var c=0;c<e.length;c++){var u=r+A(o=e[c],c);s+=R(o,t,n,u,a)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=x&&e[x]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)s+=R(o=o.value,t,n,u=r+A(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function z(e,t,n){if(null==e)return e;var r=[],a=0;return R(e,r,"","",function(e){return t.call(n,e,a++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},_={transition:null},F={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:_,ReactCurrentOwner:P};function U(){throw Error("act(...) is not supported in production builds of React.")}o.Children={map:z,forEach:function(e,t,n){z(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return z(e,function(){t++}),t},toArray:function(e){return z(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},o.Component=w,o.Fragment=s,o.Profiler=u,o.PureComponent=C,o.StrictMode=c,o.Suspense=h,o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,o.act=U,o.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=v({},e.props),a=e.key,o=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,l=P.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)E.call(t,c)&&!T.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){s=Array(c);for(var u=0;u<c;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:i,type:e.type,key:a,ref:o,props:r,_owner:l}},o.createContext=function(e){return(e={$$typeof:p,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:d,_context:e},e.Consumer=e},o.createElement=I,o.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},o.createRef=function(){return{current:null}},o.forwardRef=function(e){return{$$typeof:f,render:e}},o.isValidElement=N,o.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:M}},o.memo=function(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},o.startTransition=function(e){var t=_.transition;_.transition={};try{e()}finally{_.transition=t}},o.unstable_act=U,o.useCallback=function(e,t){return O.current.useCallback(e,t)},o.useContext=function(e){return O.current.useContext(e)},o.useDebugValue=function(){},o.useDeferredValue=function(e){return O.current.useDeferredValue(e)},o.useEffect=function(e,t){return O.current.useEffect(e,t)},o.useId=function(){return O.current.useId()},o.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},o.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},o.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},o.useMemo=function(e,t){return O.current.useMemo(e,t)},o.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},o.useRef=function(e){return O.current.useRef(e)},o.useState=function(e){return O.current.useState(e)},o.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},o.useTransition=function(){return O.current.useTransition()},o.version="18.3.1",a.exports=o;var D=a.exports,B=D,W=Symbol.for("react.element"),$=Symbol.for("react.fragment"),H=Object.prototype.hasOwnProperty,V=B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y={key:!0,ref:!0,__self:!0,__source:!0};
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function G(e,t,n){var r,a={},o=null,i=null;for(r in void 0!==n&&(o=""+n),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(i=t.ref),t)H.call(t,r)&&!Y.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:W,type:e,key:o,ref:i,props:a,_owner:V.current}}r.Fragment=$,r.jsx=G,r.jsxs=G,n.exports=r;var Q=n.exports,K={exports:{}},q={},X={exports:{}},Z={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var l=2*(r+1)-1,s=e[l],c=l+1,u=e[c];if(0>a(s,n))c<o&&0>a(u,s)?(e[r]=u,e[c]=n,r=c):(e[r]=s,e[l]=n,r=l);else{if(!(c<o&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var s=[],c=[],u=1,d=null,p=3,f=!1,h=!1,g=!1,m="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var a=n(c);null!==a;){if(null===a.callback)r(c);else{if(!(a.startTime<=e))break;r(c),a.sortIndex=a.expirationTime,t(s,a)}a=n(c)}}function b(e){if(g=!1,v(e),!h)if(null!==n(s))h=!0,A(w);else{var t=n(c);null!==t&&R(b,t.startTime-e)}}function w(t,a){h=!1,g&&(g=!1,x(j),j=-1),f=!0;var o=p;try{for(v(a),d=n(s);null!==d&&(!(d.expirationTime>a)||t&&!T());){var i=d.callback;if("function"==typeof i){d.callback=null,p=d.priorityLevel;var l=i(d.expirationTime<=a);a=e.unstable_now(),"function"==typeof l?d.callback=l:d===n(s)&&r(s),v(a)}else r(s);d=n(s)}if(null!==d)var u=!0;else{var m=n(c);null!==m&&R(b,m.startTime-a),u=!1}return u}finally{d=null,p=o,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,C=!1,S=null,j=-1,E=5,P=-1;function T(){return!(e.unstable_now()-P<E)}function I(){if(null!==S){var t=e.unstable_now();P=t;var n=!0;try{n=S(!0,t)}finally{n?k():(C=!1,S=null)}}else C=!1}if("function"==typeof y)k=function(){y(I)};else if("undefined"!=typeof MessageChannel){var N=new MessageChannel,L=N.port2;N.port1.onmessage=I,k=function(){L.postMessage(null)}}else k=function(){m(I,0)};function A(e){S=e,C||(C=!0,k())}function R(t,n){j=m(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){h||f||(h=!0,A(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(s)},e.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_scheduleCallback=function(r,a,o){var i=e.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?i+o:i:o=i,r){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return r={id:u++,callback:a,priorityLevel:r,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>i?(r.sortIndex=o,t(c,r),null===n(s)&&r===n(c)&&(g?(x(j),j=-1):g=!0,R(b,o-i))):(r.sortIndex=l,t(s,r),h||f||(h=!0,A(w))),r},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}}(Z),X.exports=Z;var J=X.exports,ee=D,te=J;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var re=new Set,ae={};function oe(e,t){ie(e,t),ie(e+"Capture",t)}function ie(e,t){for(ae[e]=t,e=0;e<t.length;e++)re.add(t[e])}var le=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),se=Object.prototype.hasOwnProperty,ce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ue={},de={};function pe(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fe[e]=new pe(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fe[t]=new pe(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){fe[e]=new pe(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fe[e]=new pe(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fe[e]=new pe(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){fe[e]=new pe(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){fe[e]=new pe(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){fe[e]=new pe(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){fe[e]=new pe(e,5,!1,e.toLowerCase(),null,!1,!1)});var he=/[\-:]([a-z])/g;function ge(e){return e[1].toUpperCase()}function me(e,t,n,r){var a=fe.hasOwnProperty(t)?fe[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!se.call(de,e)||!se.call(ue,e)&&(ce.test(e)?de[e]=!0:(ue[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(he,ge);fe[t]=new pe(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(he,ge);fe[t]=new pe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(he,ge);fe[t]=new pe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){fe[e]=new pe(e,1,!1,e.toLowerCase(),null,!1,!1)}),fe.xlinkHref=new pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){fe[e]=new pe(e,1,!1,e.toLowerCase(),null,!0,!0)});var xe=ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ye=Symbol.for("react.element"),ve=Symbol.for("react.portal"),be=Symbol.for("react.fragment"),we=Symbol.for("react.strict_mode"),ke=Symbol.for("react.profiler"),Ce=Symbol.for("react.provider"),Se=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),Te=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),Le=Symbol.iterator;function Ae(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Le&&e[Le]||e["@@iterator"])?e:null}var Re,ze=Object.assign;function Me(e){if(void 0===Re)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Re=t&&t[1]||""}return"\n"+Re+e}var Oe=!1;function _e(e,t){if(!e||Oe)return"";Oe=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var a=c.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,l=o.length-1;1<=i&&0<=l&&a[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==o[l]){if(1!==i||1!==l)do{if(i--,0>--l||a[i]!==o[l]){var s="\n"+a[i].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=i&&0<=l);break}}}finally{Oe=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Me(e):""}function Fe(e){switch(e.tag){case 5:return Me(e.type);case 16:return Me("Lazy");case 13:return Me("Suspense");case 19:return Me("SuspenseList");case 0:case 2:case 15:return e=_e(e.type,!1);case 11:return e=_e(e.type.render,!1);case 1:return e=_e(e.type,!0);default:return""}}function Ue(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case be:return"Fragment";case ve:return"Portal";case ke:return"Profiler";case we:return"StrictMode";case Ee:return"Suspense";case Pe:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Se:return(e.displayName||"Context")+".Consumer";case Ce:return(e._context.displayName||"Context")+".Provider";case je:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Te:return null!==(t=e.displayName||null)?t:Ue(e.type)||"Memo";case Ie:t=e._payload,e=e._init;try{return Ue(e(t))}catch(n){}}return null}function De(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(t);case 8:return t===we?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Be(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function We(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $e(e){e._valueTracker||(e._valueTracker=function(e){var t=We(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function He(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=We(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ve(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ye(e,t){var n=t.checked;return ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ge(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Be(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Qe(e,t){null!=(t=t.checked)&&me(e,"checked",t,!1)}function Ke(e,t){Qe(e,t);var n=Be(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Xe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xe(e,t.type,Be(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function qe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Xe(e,t,n){"number"===t&&Ve(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ze=Array.isArray;function Je(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Be(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function et(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(ne(91));return ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tt(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(ne(92));if(Ze(n)){if(1<n.length)throw Error(ne(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Be(n)}}function nt(e,t){var n=Be(t.value),r=Be(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function rt(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function at(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ot(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?at(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var it,lt,st=(lt=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((it=it||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=it.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return lt(e,t)})}:lt);function ct(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dt=["Webkit","ms","Moz","O"];function pt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ut.hasOwnProperty(e)&&ut[e]?(""+t).trim():t+"px"}function ft(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=pt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(ut).forEach(function(e){dt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ut[t]=ut[e]})});var ht=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gt(e,t){if(t){if(ht[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(ne(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(ne(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(ne(62))}}function mt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function yt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var vt=null,bt=null,wt=null;function kt(e){if(e=xo(e)){if("function"!=typeof vt)throw Error(ne(280));var t=e.stateNode;t&&(t=vo(t),vt(e.stateNode,e.type,t))}}function Ct(e){bt?wt?wt.push(e):wt=[e]:bt=e}function St(){if(bt){var e=bt,t=wt;if(wt=bt=null,kt(e),t)for(e=0;e<t.length;e++)kt(t[e])}}function jt(e,t){return e(t)}function Et(){}var Pt=!1;function Tt(e,t,n){if(Pt)return e(t,n);Pt=!0;try{return jt(e,t,n)}finally{Pt=!1,(null!==bt||null!==wt)&&(Et(),St())}}function It(e,t){var n=e.stateNode;if(null===n)return null;var r=vo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(ne(231,t,typeof n));return n}var Nt=!1;if(le)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){Nt=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch(lt){Nt=!1}function At(e,t,n,r,a,o,i,l,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Rt=!1,zt=null,Mt=!1,Ot=null,_t={onError:function(e){Rt=!0,zt=e}};function Ft(e,t,n,r,a,o,i,l,s){Rt=!1,zt=null,At.apply(_t,arguments)}function Ut(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Dt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Bt(e){if(Ut(e)!==e)throw Error(ne(188))}function Wt(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ut(e)))throw Error(ne(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Bt(a),e;if(o===r)return Bt(a),t;o=o.sibling}throw Error(ne(188))}if(n.return!==r.return)n=a,r=o;else{for(var i=!1,l=a.child;l;){if(l===n){i=!0,n=a,r=o;break}if(l===r){i=!0,r=a,n=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===n){i=!0,n=o,r=a;break}if(l===r){i=!0,r=o,n=a;break}l=l.sibling}if(!i)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(3!==n.tag)throw Error(ne(188));return n.stateNode.current===n?e:t}(e))?$t(e):null}function $t(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=$t(e);if(null!==t)return t;e=e.sibling}return null}var Ht=te.unstable_scheduleCallback,Vt=te.unstable_cancelCallback,Yt=te.unstable_shouldYield,Gt=te.unstable_requestPaint,Qt=te.unstable_now,Kt=te.unstable_getCurrentPriorityLevel,qt=te.unstable_ImmediatePriority,Xt=te.unstable_UserBlockingPriority,Zt=te.unstable_NormalPriority,Jt=te.unstable_LowPriority,en=te.unstable_IdlePriority,tn=null,nn=null;var rn=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(an(e)/on|0)|0},an=Math.log,on=Math.LN2;var ln=64,sn=4194304;function cn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function un(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=268435455&n;if(0!==i){var l=i&~a;0!==l?r=cn(l):0!==(o&=i)&&(r=cn(o))}else 0!==(i=n&~a)?r=cn(i):0!==o&&(r=cn(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(o=t&-t)||16===a&&4194240&o))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-rn(t)),r|=e[n],t&=~a;return r}function dn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function fn(){var e=ln;return!(4194240&(ln<<=1))&&(ln=64),e}function hn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gn(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-rn(t)]=n}function mn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rn(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var xn=0;function yn(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var vn,bn,wn,kn,Cn,Sn=!1,jn=[],En=null,Pn=null,Tn=null,In=new Map,Nn=new Map,Ln=[],An="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rn(e,t){switch(e){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":In.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nn.delete(t.pointerId)}}function zn(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&(null!==(t=xo(t))&&bn(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Mn(e){var t=mo(e.target);if(null!==t){var n=Ut(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Dt(n)))return e.blockedOn=t,void Cn(e.priority,function(){wn(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function On(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xo(n))&&bn(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xt=r,n.target.dispatchEvent(r),xt=null,t.shift()}return!0}function _n(e,t,n){On(e)&&n.delete(t)}function Fn(){Sn=!1,null!==En&&On(En)&&(En=null),null!==Pn&&On(Pn)&&(Pn=null),null!==Tn&&On(Tn)&&(Tn=null),In.forEach(_n),Nn.forEach(_n)}function Un(e,t){e.blockedOn===t&&(e.blockedOn=null,Sn||(Sn=!0,te.unstable_scheduleCallback(te.unstable_NormalPriority,Fn)))}function Dn(e){function t(t){return Un(t,e)}if(0<jn.length){Un(jn[0],e);for(var n=1;n<jn.length;n++){var r=jn[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==En&&Un(En,e),null!==Pn&&Un(Pn,e),null!==Tn&&Un(Tn,e),In.forEach(t),Nn.forEach(t),n=0;n<Ln.length;n++)(r=Ln[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ln.length&&null===(n=Ln[0]).blockedOn;)Mn(n),null===n.blockedOn&&Ln.shift()}var Bn=xe.ReactCurrentBatchConfig,Wn=!0;function $n(e,t,n,r){var a=xn,o=Bn.transition;Bn.transition=null;try{xn=1,Vn(e,t,n,r)}finally{xn=a,Bn.transition=o}}function Hn(e,t,n,r){var a=xn,o=Bn.transition;Bn.transition=null;try{xn=4,Vn(e,t,n,r)}finally{xn=a,Bn.transition=o}}function Vn(e,t,n,r){if(Wn){var a=Gn(e,t,n,r);if(null===a)Ba(e,t,r,Yn,n),Rn(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return En=zn(En,e,t,n,r,a),!0;case"dragenter":return Pn=zn(Pn,e,t,n,r,a),!0;case"mouseover":return Tn=zn(Tn,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return In.set(o,zn(In.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Nn.set(o,zn(Nn.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Rn(e,r),4&t&&-1<An.indexOf(e)){for(;null!==a;){var o=xo(a);if(null!==o&&vn(o),null===(o=Gn(e,t,n,r))&&Ba(e,t,r,Yn,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Ba(e,t,r,null,n)}}var Yn=null;function Gn(e,t,n,r){if(Yn=null,null!==(e=mo(e=yt(r))))if(null===(t=Ut(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Dt(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yn=e,null}function Qn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kt()){case qt:return 1;case Xt:return 4;case Zt:case Jt:return 16;case en:return 536870912;default:return 16}default:return 16}}var Kn=null,qn=null,Xn=null;function Zn(){if(Xn)return Xn;var e,t,n=qn,r=n.length,a="value"in Kn?Kn.value:Kn.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return Xn=a.slice(e,1<t?1-t:void 0)}function Jn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function er(){return!0}function tr(){return!1}function nr(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?er:tr,this.isPropagationStopped=tr,this}return ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){},isPersistent:er}),t}var rr,ar,or,ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=nr(ir),sr=ze({},ir,{view:0,detail:0}),cr=nr(sr),ur=ze({},sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(rr=e.screenX-or.screenX,ar=e.screenY-or.screenY):ar=rr=0,or=e),rr)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),dr=nr(ur),pr=nr(ze({},ur,{dataTransfer:0})),fr=nr(ze({},sr,{relatedTarget:0})),hr=nr(ze({},ir,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=ze({},ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mr=nr(gr),xr=nr(ze({},ir,{data:0})),yr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},br={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=br[e])&&!!t[e]}function kr(){return wr}var Cr=ze({},sr,{key:function(e){if(e.key){var t=yr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Jn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?vr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return"keypress"===e.type?Jn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Jn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=nr(Cr),jr=nr(ze({},ur,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=nr(ze({},sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr})),Pr=nr(ze({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tr=ze({},ur,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ir=nr(Tr),Nr=[9,13,27,32],Lr=le&&"CompositionEvent"in window,Ar=null;le&&"documentMode"in document&&(Ar=document.documentMode);var Rr=le&&"TextEvent"in window&&!Ar,zr=le&&(!Lr||Ar&&8<Ar&&11>=Ar),Mr=String.fromCharCode(32),Or=!1;function _r(e,t){switch(e){case"keyup":return-1!==Nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ur=!1;var Dr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Dr[e.type]:"textarea"===t}function Wr(e,t,n,r){Ct(r),0<(t=$a(t,"onChange")).length&&(n=new lr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $r=null,Hr=null;function Vr(e){Ma(e,0)}function Yr(e){if(He(yo(e)))return e}function Gr(e,t){if("change"===e)return t}var Qr=!1;if(le){var Kr;if(le){var qr="oninput"in document;if(!qr){var Xr=document.createElement("div");Xr.setAttribute("oninput","return;"),qr="function"==typeof Xr.oninput}Kr=qr}else Kr=!1;Qr=Kr&&(!document.documentMode||9<document.documentMode)}function Zr(){$r&&($r.detachEvent("onpropertychange",Jr),Hr=$r=null)}function Jr(e){if("value"===e.propertyName&&Yr(Hr)){var t=[];Wr(t,Hr,e,yt(e)),Tt(Vr,t)}}function ea(e,t,n){"focusin"===e?(Zr(),Hr=n,($r=t).attachEvent("onpropertychange",Jr)):"focusout"===e&&Zr()}function ta(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yr(Hr)}function na(e,t){if("click"===e)return Yr(t)}function ra(e,t){if("input"===e||"change"===e)return Yr(t)}var aa="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function oa(e,t){if(aa(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!se.call(t,a)||!aa(e[a],t[a]))return!1}return!0}function ia(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function la(e,t){var n,r=ia(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ia(r)}}function sa(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?sa(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ca(){for(var e=window,t=Ve();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Ve((e=t.contentWindow).document)}return t}function ua(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function da(e){var t=ca(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&sa(n.ownerDocument.documentElement,n)){if(null!==r&&ua(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=void 0===r.end?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=la(n,o);var i=la(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pa=le&&"documentMode"in document&&11>=document.documentMode,fa=null,ha=null,ga=null,ma=!1;function xa(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ma||null==fa||fa!==Ve(r)||("selectionStart"in(r=fa)&&ua(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ga&&oa(ga,r)||(ga=r,0<(r=$a(ha,"onSelect")).length&&(t=new lr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fa)))}function ya(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var va={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},ba={},wa={};function ka(e){if(ba[e])return ba[e];if(!va[e])return e;var t,n=va[e];for(t in n)if(n.hasOwnProperty(t)&&t in wa)return ba[e]=n[t];return e}le&&(wa=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);var Ca=ka("animationend"),Sa=ka("animationiteration"),ja=ka("animationstart"),Ea=ka("transitionend"),Pa=new Map,Ta="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ia(e,t){Pa.set(e,t),oe(t,[e])}for(var Na=0;Na<Ta.length;Na++){var La=Ta[Na];Ia(La.toLowerCase(),"on"+(La[0].toUpperCase()+La.slice(1)))}Ia(Ca,"onAnimationEnd"),Ia(Sa,"onAnimationIteration"),Ia(ja,"onAnimationStart"),Ia("dblclick","onDoubleClick"),Ia("focusin","onFocus"),Ia("focusout","onBlur"),Ia(Ea,"onTransitionEnd"),ie("onMouseEnter",["mouseout","mouseover"]),ie("onMouseLeave",["mouseout","mouseover"]),ie("onPointerEnter",["pointerout","pointerover"]),ie("onPointerLeave",["pointerout","pointerover"]),oe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oe("onBeforeInput",["compositionend","keypress","textInput","paste"]),oe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ra=new Set("cancel close invalid load scroll toggle".split(" ").concat(Aa));function za(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,i,l,s){if(Ft.apply(this,arguments),Rt){if(!Rt)throw Error(ne(198));var c=zt;Rt=!1,zt=null,Mt||(Mt=!0,Ot=c)}}(r,t,void 0,e),e.currentTarget=null}function Ma(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],s=l.instance,c=l.currentTarget;if(l=l.listener,s!==o&&a.isPropagationStopped())break e;za(a,l,c),o=s}else for(i=0;i<r.length;i++){if(s=(l=r[i]).instance,c=l.currentTarget,l=l.listener,s!==o&&a.isPropagationStopped())break e;za(a,l,c),o=s}}}if(Mt)throw e=Ot,Mt=!1,Ot=null,e}function Oa(e,t){var n=t[fo];void 0===n&&(n=t[fo]=new Set);var r=e+"__bubble";n.has(r)||(Da(t,e,2,!1),n.add(r))}function _a(e,t,n){var r=0;t&&(r|=4),Da(n,e,r,t)}var Fa="_reactListening"+Math.random().toString(36).slice(2);function Ua(e){if(!e[Fa]){e[Fa]=!0,re.forEach(function(t){"selectionchange"!==t&&(Ra.has(t)||_a(t,!1,e),_a(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fa]||(t[Fa]=!0,_a("selectionchange",!1,t))}}function Da(e,t,n,r){switch(Qn(t)){case 1:var a=$n;break;case 4:a=Hn;break;default:a=Vn}n=a.bind(null,t,n,e),a=void 0,!Nt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Ba(e,t,n,r,a){var o=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===a||8===l.nodeType&&l.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var s=i.tag;if((3===s||4===s)&&((s=i.stateNode.containerInfo)===a||8===s.nodeType&&s.parentNode===a))return;i=i.return}for(;null!==l;){if(null===(i=mo(l)))return;if(5===(s=i.tag)||6===s){r=o=i;continue e}l=l.parentNode}}r=r.return}Tt(function(){var r=o,a=yt(n),i=[];e:{var l=Pa.get(e);if(void 0!==l){var s=lr,c=e;switch(e){case"keypress":if(0===Jn(n))break e;case"keydown":case"keyup":s=Sr;break;case"focusin":c="focus",s=fr;break;case"focusout":c="blur",s=fr;break;case"beforeblur":case"afterblur":s=fr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Er;break;case Ca:case Sa:case ja:s=hr;break;case Ea:s=Pr;break;case"scroll":s=cr;break;case"wheel":s=Ir;break;case"copy":case"cut":case"paste":s=mr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=jr}var u=!!(4&t),d=!u&&"scroll"===e,p=u?null!==l?l+"Capture":null:l;u=[];for(var f,h=r;null!==h;){var g=(f=h).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==p&&(null!=(g=It(h,p))&&u.push(Wa(h,g,f)))),d)break;h=h.return}0<u.length&&(l=new s(l,c,null,n,a),i.push({event:l,listeners:u}))}}if(!(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===xt||!(c=n.relatedTarget||n.fromElement)||!mo(c)&&!c[po])&&(s||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?mo(c):null)&&(c!==(d=Ut(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(u=dr,g="onMouseLeave",p="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(u=jr,g="onPointerLeave",p="onPointerEnter",h="pointer"),d=null==s?l:yo(s),f=null==c?l:yo(c),(l=new u(g,h+"leave",s,n,a)).target=d,l.relatedTarget=f,g=null,mo(a)===r&&((u=new u(p,h+"enter",c,n,a)).target=f,u.relatedTarget=d,g=u),d=g,s&&c)e:{for(p=c,h=0,f=u=s;f;f=Ha(f))h++;for(f=0,g=p;g;g=Ha(g))f++;for(;0<h-f;)u=Ha(u),h--;for(;0<f-h;)p=Ha(p),f--;for(;h--;){if(u===p||null!==p&&u===p.alternate)break e;u=Ha(u),p=Ha(p)}u=null}else u=null;null!==s&&Va(i,l,s,u,!1),null!==c&&null!==d&&Va(i,d,c,u,!0)}if("select"===(s=(l=r?yo(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===s&&"file"===l.type)var m=Gr;else if(Br(l))if(Qr)m=ra;else{m=ta;var x=ea}else(s=l.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(m=na);switch(m&&(m=m(e,r))?Wr(i,m,n,a):(x&&x(e,l,r),"focusout"===e&&(x=l._wrapperState)&&x.controlled&&"number"===l.type&&Xe(l,"number",l.value)),x=r?yo(r):window,e){case"focusin":(Br(x)||"true"===x.contentEditable)&&(fa=x,ha=r,ga=null);break;case"focusout":ga=ha=fa=null;break;case"mousedown":ma=!0;break;case"contextmenu":case"mouseup":case"dragend":ma=!1,xa(i,n,a);break;case"selectionchange":if(pa)break;case"keydown":case"keyup":xa(i,n,a)}var y;if(Lr)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ur?_r(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(zr&&"ko"!==n.locale&&(Ur||"onCompositionStart"!==v?"onCompositionEnd"===v&&Ur&&(y=Zn()):(qn="value"in(Kn=a)?Kn.value:Kn.textContent,Ur=!0)),0<(x=$a(r,v)).length&&(v=new xr(v,e,null,n,a),i.push({event:v,listeners:x}),y?v.data=y:null!==(y=Fr(n))&&(v.data=y))),(y=Rr?function(e,t){switch(e){case"compositionend":return Fr(t);case"keypress":return 32!==t.which?null:(Or=!0,Mr);case"textInput":return(e=t.data)===Mr&&Or?null:e;default:return null}}(e,n):function(e,t){if(Ur)return"compositionend"===e||!Lr&&_r(e,t)?(e=Zn(),Xn=qn=Kn=null,Ur=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zr&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=$a(r,"onBeforeInput")).length&&(a=new xr("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=y))}Ma(i,t)})}function Wa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $a(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=It(e,n))&&r.unshift(Wa(e,o,a)),null!=(o=It(e,t))&&r.push(Wa(e,o,a))),e=e.return}return r}function Ha(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Va(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var l=n,s=l.alternate,c=l.stateNode;if(null!==s&&s===r)break;5===l.tag&&null!==c&&(l=c,a?null!=(s=It(n,o))&&i.unshift(Wa(n,s,l)):a||null!=(s=It(n,o))&&i.push(Wa(n,s,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Ya=/\r\n?/g,Ga=/\u0000|\uFFFD/g;function Qa(e){return("string"==typeof e?e:""+e).replace(Ya,"\n").replace(Ga,"")}function Ka(e,t,n){if(t=Qa(t),Qa(e)!==t&&n)throw Error(ne(425))}function qa(){}var Xa=null,Za=null;function Ja(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var eo="function"==typeof setTimeout?setTimeout:void 0,to="function"==typeof clearTimeout?clearTimeout:void 0,no="function"==typeof Promise?Promise:void 0,ro="function"==typeof queueMicrotask?queueMicrotask:void 0!==no?function(e){return no.resolve(null).then(e).catch(ao)}:eo;function ao(e){setTimeout(function(){throw e})}function oo(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Dn(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Dn(t)}function io(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function lo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var so=Math.random().toString(36).slice(2),co="__reactFiber$"+so,uo="__reactProps$"+so,po="__reactContainer$"+so,fo="__reactEvents$"+so,ho="__reactListeners$"+so,go="__reactHandles$"+so;function mo(e){var t=e[co];if(t)return t;for(var n=e.parentNode;n;){if(t=n[po]||n[co]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=lo(e);null!==e;){if(n=e[co])return n;e=lo(e)}return t}n=(e=n).parentNode}return null}function xo(e){return!(e=e[co]||e[po])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(ne(33))}function vo(e){return e[uo]||null}var bo=[],wo=-1;function ko(e){return{current:e}}function Co(e){0>wo||(e.current=bo[wo],bo[wo]=null,wo--)}function So(e,t){wo++,bo[wo]=e.current,e.current=t}var jo={},Eo=ko(jo),Po=ko(!1),To=jo;function Io(e,t){var n=e.type.contextTypes;if(!n)return jo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function No(e){return null!=(e=e.childContextTypes)}function Lo(){Co(Po),Co(Eo)}function Ao(e,t,n){if(Eo.current!==jo)throw Error(ne(168));So(Eo,t),So(Po,n)}function Ro(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(ne(108,De(e)||"Unknown",a));return ze({},n,r)}function zo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jo,To=Eo.current,So(Eo,e),So(Po,Po.current),!0}function Mo(e,t,n){var r=e.stateNode;if(!r)throw Error(ne(169));n?(e=Ro(e,t,To),r.__reactInternalMemoizedMergedChildContext=e,Co(Po),Co(Eo),So(Eo,e)):Co(Po),So(Po,n)}var Oo=null,_o=!1,Fo=!1;function Uo(e){null===Oo?Oo=[e]:Oo.push(e)}function Do(){if(!Fo&&null!==Oo){Fo=!0;var e=0,t=xn;try{var n=Oo;for(xn=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Oo=null,_o=!1}catch(a){throw null!==Oo&&(Oo=Oo.slice(e+1)),Ht(qt,Do),a}finally{xn=t,Fo=!1}}return null}var Bo=[],Wo=0,$o=null,Ho=0,Vo=[],Yo=0,Go=null,Qo=1,Ko="";function qo(e,t){Bo[Wo++]=Ho,Bo[Wo++]=$o,$o=e,Ho=t}function Xo(e,t,n){Vo[Yo++]=Qo,Vo[Yo++]=Ko,Vo[Yo++]=Go,Go=e;var r=Qo;e=Ko;var a=32-rn(r)-1;r&=~(1<<a),n+=1;var o=32-rn(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Qo=1<<32-rn(t)+a|n<<a|r,Ko=o+e}else Qo=1<<o|n<<a|r,Ko=e}function Zo(e){null!==e.return&&(qo(e,1),Xo(e,1,0))}function Jo(e){for(;e===$o;)$o=Bo[--Wo],Bo[Wo]=null,Ho=Bo[--Wo],Bo[Wo]=null;for(;e===Go;)Go=Vo[--Yo],Vo[Yo]=null,Ko=Vo[--Yo],Vo[Yo]=null,Qo=Vo[--Yo],Vo[Yo]=null}var ei=null,ti=null,ni=!1,ri=null;function ai(e,t){var n=Tu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ei=e,ti=io(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ei=e,ti=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Go?{id:Qo,overflow:Ko}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ei=e,ti=null,!0);default:return!1}}function ii(e){return!(!(1&e.mode)||128&e.flags)}function li(e){if(ni){var t=ti;if(t){var n=t;if(!oi(e,t)){if(ii(e))throw Error(ne(418));t=io(n.nextSibling);var r=ei;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,ni=!1,ei=e)}}else{if(ii(e))throw Error(ne(418));e.flags=-4097&e.flags|2,ni=!1,ei=e}}}function si(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ei=e}function ci(e){if(e!==ei)return!1;if(!ni)return si(e),ni=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Ja(e.type,e.memoizedProps)),t&&(t=ti)){if(ii(e))throw ui(),Error(ne(418));for(;t;)ai(e,t),t=io(t.nextSibling)}if(si(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ti=io(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ti=null}}else ti=ei?io(e.stateNode.nextSibling):null;return!0}function ui(){for(var e=ti;e;)e=io(e.nextSibling)}function di(){ti=ei=null,ni=!1}function pi(e){null===ri?ri=[e]:ri.push(e)}var fi=xe.ReactCurrentBatchConfig;function hi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=a.refs;null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(ne(284));if(!n._owner)throw Error(ne(290,e))}return e}function gi(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mi(e){return(0,e._init)(e._payload)}function xi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Nu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zu(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function s(e,t,n,r){var o=n.type;return o===be?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===Ie&&mi(o)===t.type)?((r=a(t,n.props)).ref=hi(e,t,n),r.return=e,r):((r=Lu(n.type,n.key,n.props,null,e.mode,r)).ref=hi(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mu(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function u(e,t,n,r,o){return null===t||7!==t.tag?((t=Au(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=zu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ye:return(n=Lu(t.type,t.key,t.props,null,e.mode,n)).ref=hi(e,null,t),n.return=e,n;case ve:return(t=Mu(t,e.mode,n)).return=e,t;case Ie:return d(e,(0,t._init)(t._payload),n)}if(Ze(t)||Ae(t))return(t=Au(t,e.mode,n,null)).return=e,t;gi(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==a?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ye:return n.key===a?s(e,t,n,r):null;case ve:return n.key===a?c(e,t,n,r):null;case Ie:return p(e,t,(a=n._init)(n._payload),r)}if(Ze(n)||Ae(n))return null!==a?null:u(e,t,n,r,null);gi(e,n)}return null}function f(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ye:return s(t,e=e.get(null===r.key?n:r.key)||null,r,a);case ve:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case Ie:return f(e,t,n,(0,r._init)(r._payload),a)}if(Ze(r)||Ae(r))return u(t,e=e.get(n)||null,r,a,null);gi(t,r)}return null}return function l(s,c,u,h){if("object"==typeof u&&null!==u&&u.type===be&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case ye:e:{for(var g=u.key,m=c;null!==m;){if(m.key===g){if((g=u.type)===be){if(7===m.tag){n(s,m.sibling),(c=a(m,u.props.children)).return=s,s=c;break e}}else if(m.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===Ie&&mi(g)===m.type){n(s,m.sibling),(c=a(m,u.props)).ref=hi(s,m,u),c.return=s,s=c;break e}n(s,m);break}t(s,m),m=m.sibling}u.type===be?((c=Au(u.props.children,s.mode,h,u.key)).return=s,s=c):((h=Lu(u.type,u.key,u.props,null,s.mode,h)).ref=hi(s,c,u),h.return=s,s=h)}return i(s);case ve:e:{for(m=u.key;null!==c;){if(c.key===m){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(s,c.sibling),(c=a(c,u.children||[])).return=s,s=c;break e}n(s,c);break}t(s,c),c=c.sibling}(c=Mu(u,s.mode,h)).return=s,s=c}return i(s);case Ie:return l(s,c,(m=u._init)(u._payload),h)}if(Ze(u))return function(a,i,l,s){for(var c=null,u=null,h=i,g=i=0,m=null;null!==h&&g<l.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var x=p(a,h,l[g],s);if(null===x){null===h&&(h=m);break}e&&h&&null===x.alternate&&t(a,h),i=o(x,i,g),null===u?c=x:u.sibling=x,u=x,h=m}if(g===l.length)return n(a,h),ni&&qo(a,g),c;if(null===h){for(;g<l.length;g++)null!==(h=d(a,l[g],s))&&(i=o(h,i,g),null===u?c=h:u.sibling=h,u=h);return ni&&qo(a,g),c}for(h=r(a,h);g<l.length;g++)null!==(m=f(h,a,g,l[g],s))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),i=o(m,i,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(a,e)}),ni&&qo(a,g),c}(s,c,u,h);if(Ae(u))return function(a,i,l,s){var c=Ae(l);if("function"!=typeof c)throw Error(ne(150));if(null==(l=c.call(l)))throw Error(ne(151));for(var u=c=null,h=i,g=i=0,m=null,x=l.next();null!==h&&!x.done;g++,x=l.next()){h.index>g?(m=h,h=null):m=h.sibling;var y=p(a,h,x.value,s);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(a,h),i=o(y,i,g),null===u?c=y:u.sibling=y,u=y,h=m}if(x.done)return n(a,h),ni&&qo(a,g),c;if(null===h){for(;!x.done;g++,x=l.next())null!==(x=d(a,x.value,s))&&(i=o(x,i,g),null===u?c=x:u.sibling=x,u=x);return ni&&qo(a,g),c}for(h=r(a,h);!x.done;g++,x=l.next())null!==(x=f(h,a,g,x.value,s))&&(e&&null!==x.alternate&&h.delete(null===x.key?g:x.key),i=o(x,i,g),null===u?c=x:u.sibling=x,u=x);return e&&h.forEach(function(e){return t(a,e)}),ni&&qo(a,g),c}(s,c,u,h);gi(s,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(s,c.sibling),(c=a(c,u)).return=s,s=c):(n(s,c),(c=zu(u,s.mode,h)).return=s,s=c),i(s)):n(s,c)}}var yi=xi(!0),vi=xi(!1),bi=ko(null),wi=null,ki=null,Ci=null;function Si(){Ci=ki=wi=null}function ji(e){var t=bi.current;Co(bi),e._currentValue=t}function Ei(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pi(e,t){wi=e,Ci=ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ms=!0),e.firstContext=null)}function Ti(e){var t=e._currentValue;if(Ci!==e)if(e={context:e,memoizedValue:t,next:null},null===ki){if(null===wi)throw Error(ne(308));ki=e,wi.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var Ii=null;function Ni(e){null===Ii?Ii=[e]:Ii.push(e)}function Li(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ni(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ai(e,r)}function Ai(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ri=!1;function zi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _i(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&jc){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ai(e,n)}return null===(a=r.interleaved)?(t.next=t,Ni(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ai(e,n)}function Fi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mn(e,n)}}function Ui(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Di(e,t,n,r){var a=e.updateQueue;Ri=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var s=l,c=s.next;s.next=null,null===i?o=c:i.next=c,i=s;var u=e.alternate;null!==u&&((l=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===l?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=s))}if(null!==o){var d=a.baseState;for(i=0,u=c=s=null,l=o;;){var p=l.lane,f=l.eventTime;if((r&p)===p){null!==u&&(u=u.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=e,g=l;switch(p=t,f=n,g.tag){case 1:if("function"==typeof(h=g.payload)){d=h.call(f,d,p);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null==(p="function"==typeof(h=g.payload)?h.call(f,d,p):h))break e;d=ze({},d,p);break e;case 2:Ri=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(p=a.effects)?a.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===u?(c=u=f,s=d):u=u.next=f,i|=p;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(p=l).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===u&&(s=d),a.baseState=s,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===o&&(a.shared.lanes=0);Rc|=i,e.lanes=i,e.memoizedState=d}}function Bi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!=typeof a)throw Error(ne(191,a));a.call(r)}}}var Wi={},$i=ko(Wi),Hi=ko(Wi),Vi=ko(Wi);function Yi(e){if(e===Wi)throw Error(ne(174));return e}function Gi(e,t){switch(So(Vi,t),So(Hi,e),So($i,Wi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ot(null,"");break;default:t=ot(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Co($i),So($i,t)}function Qi(){Co($i),Co(Hi),Co(Vi)}function Ki(e){Yi(Vi.current);var t=Yi($i.current),n=ot(t,e.type);t!==n&&(So(Hi,e),So($i,n))}function qi(e){Hi.current===e&&(Co($i),Co(Hi))}var Xi=ko(0);function Zi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ji=[];function el(){for(var e=0;e<Ji.length;e++)Ji[e]._workInProgressVersionPrimary=null;Ji.length=0}var tl=xe.ReactCurrentDispatcher,nl=xe.ReactCurrentBatchConfig,rl=0,al=null,ol=null,il=null,ll=!1,sl=!1,cl=0,ul=0;function dl(){throw Error(ne(321))}function pl(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!aa(e[n],t[n]))return!1;return!0}function fl(e,t,n,r,a,o){if(rl=o,al=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tl.current=null===e||null===e.memoizedState?ql:Xl,e=n(r,a),sl){o=0;do{if(sl=!1,cl=0,25<=o)throw Error(ne(301));o+=1,il=ol=null,t.updateQueue=null,tl.current=Zl,e=n(r,a)}while(sl)}if(tl.current=Kl,t=null!==ol&&null!==ol.next,rl=0,il=ol=al=null,ll=!1,t)throw Error(ne(300));return e}function hl(){var e=0!==cl;return cl=0,e}function gl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===il?al.memoizedState=il=e:il=il.next=e,il}function ml(){if(null===ol){var e=al.alternate;e=null!==e?e.memoizedState:null}else e=ol.next;var t=null===il?al.memoizedState:il.next;if(null!==t)il=t,ol=e;else{if(null===e)throw Error(ne(310));e={memoizedState:(ol=e).memoizedState,baseState:ol.baseState,baseQueue:ol.baseQueue,queue:ol.queue,next:null},null===il?al.memoizedState=il=e:il=il.next=e}return il}function xl(e,t){return"function"==typeof t?t(e):t}function yl(e){var t=ml(),n=t.queue;if(null===n)throw Error(ne(311));n.lastRenderedReducer=e;var r=ol,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var i=a.next;a.next=o.next,o.next=i}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var l=i=null,s=null,c=o;do{var u=c.lane;if((rl&u)===u)null!==s&&(s=s.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===s?(l=s=d,i=r):s=s.next=d,al.lanes|=u,Rc|=u}c=c.next}while(null!==c&&c!==o);null===s?i=r:s.next=l,aa(r,t.memoizedState)||(ms=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=s,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,al.lanes|=o,Rc|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vl(e){var t=ml(),n=t.queue;if(null===n)throw Error(ne(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var i=a=a.next;do{o=e(o,i.action),i=i.next}while(i!==a);aa(o,t.memoizedState)||(ms=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function bl(){}function wl(e,t){var n=al,r=ml(),a=t(),o=!aa(r.memoizedState,a);if(o&&(r.memoizedState=a,ms=!0),r=r.queue,Rl(Sl.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==il&&1&il.memoizedState.tag){if(n.flags|=2048,Tl(9,Cl.bind(null,n,r,a,t),void 0,null),null===Ec)throw Error(ne(349));30&rl||kl(n,t,a)}return a}function kl(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=al.updateQueue)?(t={lastEffect:null,stores:null},al.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Cl(e,t,n,r){t.value=n,t.getSnapshot=r,jl(t)&&El(e)}function Sl(e,t,n){return n(function(){jl(t)&&El(e)})}function jl(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!aa(e,n)}catch(r){return!0}}function El(e){var t=Ai(e,1);null!==t&&Jc(t,e,1,-1)}function Pl(e){var t=gl();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xl,lastRenderedState:e},t.queue=e,e=e.dispatch=Vl.bind(null,al,e),[t.memoizedState,e]}function Tl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=al.updateQueue)?(t={lastEffect:null,stores:null},al.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Il(){return ml().memoizedState}function Nl(e,t,n,r){var a=gl();al.flags|=e,a.memoizedState=Tl(1|t,n,void 0,void 0===r?null:r)}function Ll(e,t,n,r){var a=ml();r=void 0===r?null:r;var o=void 0;if(null!==ol){var i=ol.memoizedState;if(o=i.destroy,null!==r&&pl(r,i.deps))return void(a.memoizedState=Tl(t,n,o,r))}al.flags|=e,a.memoizedState=Tl(1|t,n,o,r)}function Al(e,t){return Nl(8390656,8,e,t)}function Rl(e,t){return Ll(2048,8,e,t)}function zl(e,t){return Ll(4,2,e,t)}function Ml(e,t){return Ll(4,4,e,t)}function Ol(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function _l(e,t,n){return n=null!=n?n.concat([e]):null,Ll(4,4,Ol.bind(null,t,e),n)}function Fl(){}function Ul(e,t){var n=ml();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Dl(e,t){var n=ml();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bl(e,t,n){return 21&rl?(aa(n,t)||(n=fn(),al.lanes|=n,Rc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ms=!0),e.memoizedState=n)}function Wl(e,t){var n=xn;xn=0!==n&&4>n?n:4,e(!0);var r=nl.transition;nl.transition={};try{e(!1),t()}finally{xn=n,nl.transition=r}}function $l(){return ml().memoizedState}function Hl(e,t,n){var r=Zc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yl(e))Gl(t,n);else if(null!==(n=Li(e,t,n,r))){Jc(n,e,r,Xc()),Ql(n,t,r)}}function Vl(e,t,n){var r=Zc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yl(e))Gl(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=o(i,n);if(a.hasEagerState=!0,a.eagerState=l,aa(l,i)){var s=t.interleaved;return null===s?(a.next=a,Ni(t)):(a.next=s.next,s.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Li(e,t,a,r))&&(Jc(n,e,r,a=Xc()),Ql(n,t,r))}}function Yl(e){var t=e.alternate;return e===al||null!==t&&t===al}function Gl(e,t){sl=ll=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ql(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mn(e,n)}}var Kl={readContext:Ti,useCallback:dl,useContext:dl,useEffect:dl,useImperativeHandle:dl,useInsertionEffect:dl,useLayoutEffect:dl,useMemo:dl,useReducer:dl,useRef:dl,useState:dl,useDebugValue:dl,useDeferredValue:dl,useTransition:dl,useMutableSource:dl,useSyncExternalStore:dl,useId:dl,unstable_isNewReconciler:!1},ql={readContext:Ti,useCallback:function(e,t){return gl().memoizedState=[e,void 0===t?null:t],e},useContext:Ti,useEffect:Al,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Nl(4194308,4,Ol.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Nl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Nl(4,2,e,t)},useMemo:function(e,t){var n=gl();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gl();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Hl.bind(null,al,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},gl().memoizedState=e},useState:Pl,useDebugValue:Fl,useDeferredValue:function(e){return gl().memoizedState=e},useTransition:function(){var e=Pl(!1),t=e[0];return e=Wl.bind(null,e[1]),gl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=al,a=gl();if(ni){if(void 0===n)throw Error(ne(407));n=n()}else{if(n=t(),null===Ec)throw Error(ne(349));30&rl||kl(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Al(Sl.bind(null,r,o,e),[e]),r.flags|=2048,Tl(9,Cl.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=gl(),t=Ec.identifierPrefix;if(ni){var n=Ko;t=":"+t+"R"+(n=(Qo&~(1<<32-rn(Qo)-1)).toString(32)+n),0<(n=cl++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ul++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xl={readContext:Ti,useCallback:Ul,useContext:Ti,useEffect:Rl,useImperativeHandle:_l,useInsertionEffect:zl,useLayoutEffect:Ml,useMemo:Dl,useReducer:yl,useRef:Il,useState:function(){return yl(xl)},useDebugValue:Fl,useDeferredValue:function(e){return Bl(ml(),ol.memoizedState,e)},useTransition:function(){return[yl(xl)[0],ml().memoizedState]},useMutableSource:bl,useSyncExternalStore:wl,useId:$l,unstable_isNewReconciler:!1},Zl={readContext:Ti,useCallback:Ul,useContext:Ti,useEffect:Rl,useImperativeHandle:_l,useInsertionEffect:zl,useLayoutEffect:Ml,useMemo:Dl,useReducer:vl,useRef:Il,useState:function(){return vl(xl)},useDebugValue:Fl,useDeferredValue:function(e){var t=ml();return null===ol?t.memoizedState=e:Bl(t,ol.memoizedState,e)},useTransition:function(){return[vl(xl)[0],ml().memoizedState]},useMutableSource:bl,useSyncExternalStore:wl,useId:$l,unstable_isNewReconciler:!1};function Jl(e,t){if(e&&e.defaultProps){for(var n in t=ze({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function es(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:ze({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ts={isMounted:function(e){return!!(e=e._reactInternals)&&Ut(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xc(),a=Zc(e),o=Oi(r,a);o.payload=t,null!=n&&(o.callback=n),null!==(t=_i(e,o,a))&&(Jc(t,e,a,r),Fi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xc(),a=Zc(e),o=Oi(r,a);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=_i(e,o,a))&&(Jc(t,e,a,r),Fi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xc(),r=Zc(e),a=Oi(n,r);a.tag=2,null!=t&&(a.callback=t),null!==(t=_i(e,a,r))&&(Jc(t,e,r,n),Fi(t,e,r))}};function ns(e,t,n,r,a,o,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!oa(n,r)||!oa(a,o))}function rs(e,t,n){var r=!1,a=jo,o=t.contextType;return"object"==typeof o&&null!==o?o=Ti(o):(a=No(t)?To:Eo.current,o=(r=null!=(r=t.contextTypes))?Io(e,a):jo),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ts,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function as(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ts.enqueueReplaceState(t,t.state,null)}function os(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},zi(e);var o=t.contextType;"object"==typeof o&&null!==o?a.context=Ti(o):(o=No(t)?To:Eo.current,a.context=Io(e,o)),a.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(es(e,t,o,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ts.enqueueReplaceState(a,a.state,null),Di(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308)}function is(e,t){try{var n="",r=t;do{n+=Fe(r),r=r.return}while(r);var a=n}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:a,digest:null}}function ls(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var cs="function"==typeof WeakMap?WeakMap:Map;function us(e,t,n){(n=Oi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bc||(Bc=!0,Wc=r),ss(0,t)},n}function ds(e,t,n){(n=Oi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ss(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){ss(0,t),"function"!=typeof r&&(null===$c?$c=new Set([this]):$c.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ps(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new cs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=ku.bind(null,e,t,n),t.then(e,e))}function fs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function hs(e,t,n,r,a){return 1&e.mode?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oi(-1,1)).tag=2,_i(n,t,1))),n.lanes|=1),e)}var gs=xe.ReactCurrentOwner,ms=!1;function xs(e,t,n,r){t.child=null===e?vi(t,null,n,r):yi(t,e.child,n,r)}function ys(e,t,n,r,a){n=n.render;var o=t.ref;return Pi(t,a),r=fl(e,t,n,r,o,a),n=hl(),null===e||ms?(ni&&n&&Zo(t),t.flags|=1,xs(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bs(e,t,a))}function vs(e,t,n,r,a){if(null===e){var o=n.type;return"function"!=typeof o||Iu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,bs(e,t,o,r,a))}if(o=e.child,0===(e.lanes&a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:oa)(i,r)&&e.ref===t.ref)return Bs(e,t,a)}return t.flags|=1,(e=Nu(o,r)).ref=t.ref,e.return=t,t.child=e}function bs(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(oa(o,r)&&e.ref===t.ref){if(ms=!1,t.pendingProps=r=o,0===(e.lanes&a))return t.lanes=e.lanes,Bs(e,t,a);131072&e.flags&&(ms=!0)}}return Cs(e,t,n,r,a)}function ws(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,So(Nc,Ic),Ic|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,So(Nc,Ic),Ic|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},So(Nc,Ic),Ic|=n;else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,So(Nc,Ic),Ic|=r;return xs(e,t,a,n),t.child}function ks(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,r,a){var o=No(n)?To:Eo.current;return o=Io(t,o),Pi(t,a),n=fl(e,t,n,r,o,a),r=hl(),null===e||ms?(ni&&r&&Zo(t),t.flags|=1,xs(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bs(e,t,a))}function Ss(e,t,n,r,a){if(No(n)){var o=!0;zo(t)}else o=!1;if(Pi(t,a),null===t.stateNode)Ds(e,t),rs(t,n,r),os(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var s=i.context,c=n.contextType;"object"==typeof c&&null!==c?c=Ti(c):c=Io(t,c=No(n)?To:Eo.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(l!==r||s!==c)&&as(t,i,r,c),Ri=!1;var p=t.memoizedState;i.state=p,Di(t,r,i,a),s=t.memoizedState,l!==r||p!==s||Po.current||Ri?("function"==typeof u&&(es(t,n,u,r),s=t.memoizedState),(l=Ri||ns(t,n,l,r,p,s,c))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),i.props=r,i.state=s,i.context=c,r=l):("function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Mi(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Jl(t.type,l),i.props=c,d=t.pendingProps,p=i.context,"object"==typeof(s=n.contextType)&&null!==s?s=Ti(s):s=Io(t,s=No(n)?To:Eo.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(l!==d||p!==s)&&as(t,i,r,s),Ri=!1,p=t.memoizedState,i.state=p,Di(t,r,i,a);var h=t.memoizedState;l!==d||p!==h||Po.current||Ri?("function"==typeof f&&(es(t,n,f,r),h=t.memoizedState),(c=Ri||ns(t,n,c,r,p,h,s)||!1)?(u||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,h,s),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,h,s)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=s,r=c):("function"!=typeof i.componentDidUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return js(e,t,n,r,o,a)}function js(e,t,n,r,a,o){ks(e,t);var i=!!(128&t.flags);if(!r&&!i)return a&&Mo(t,n,!1),Bs(e,t,o);r=t.stateNode,gs.current=t;var l=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=yi(t,e.child,null,o),t.child=yi(t,null,l,o)):xs(e,t,l,o),t.memoizedState=r.state,a&&Mo(t,n,!0),t.child}function Es(e){var t=e.stateNode;t.pendingContext?Ao(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ao(0,t.context,!1),Gi(e,t.containerInfo)}function Ps(e,t,n,r,a){return di(),pi(a),t.flags|=256,xs(e,t,n,r),t.child}var Ts,Is,Ns,Ls,As={dehydrated:null,treeContext:null,retryLane:0};function Rs(e){return{baseLanes:e,cachePool:null,transitions:null}}function zs(e,t,n){var r,a=t.pendingProps,o=Xi.current,i=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&o)),r?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),So(Xi,1&o),null===e)return li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=a.children,e=a.fallback,i?(a=t.mode,i=t.child,l={mode:"hidden",children:l},1&a||null===i?i=Ru(l,a,0,null):(i.childLanes=0,i.pendingProps=l),e=Au(e,a,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Rs(n),t.memoizedState=As,e):Ms(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,i){if(n)return 256&t.flags?(t.flags&=-257,Os(e,t,i,r=ls(Error(ne(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=Ru({mode:"visible",children:r.children},a,0,null),(o=Au(o,a,i,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,1&t.mode&&yi(t,e.child,null,i),t.child.memoizedState=Rs(i),t.memoizedState=As,o);if(!(1&t.mode))return Os(e,t,i,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Os(e,t,i,r=ls(o=Error(ne(419)),r,void 0))}if(l=0!==(i&e.childLanes),ms||l){if(null!==(r=Ec)){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|i))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Ai(e,a),Jc(r,e,a,-1))}return pu(),Os(e,t,i,r=ls(Error(ne(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Su.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ti=io(a.nextSibling),ei=t,ni=!0,ri=null,null!==e&&(Vo[Yo++]=Qo,Vo[Yo++]=Ko,Vo[Yo++]=Go,Qo=e.id,Ko=e.overflow,Go=t),t=Ms(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,o,n);if(i){i=a.fallback,l=t.mode,r=(o=e.child).sibling;var s={mode:"hidden",children:a.children};return 1&l||t.child===o?(a=Nu(o,s)).subtreeFlags=14680064&o.subtreeFlags:((a=t.child).childLanes=0,a.pendingProps=s,t.deletions=null),null!==r?i=Nu(r,i):(i=Au(i,l,n,null)).flags|=2,i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,l=null===(l=e.child.memoizedState)?Rs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=As,a}return e=(i=e.child).sibling,a=Nu(i,{mode:"visible",children:a.children}),!(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Ms(e,t){return(t=Ru({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Os(e,t,n,r){return null!==r&&pi(r),yi(t,e.child,null,n),(e=Ms(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function _s(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ei(e.return,t,n)}function Fs(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Us(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(xs(e,t,r.children,n),2&(r=Xi.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&_s(e,n,t);else if(19===e.tag)_s(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(So(Xi,r),1&t.mode)switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Zi(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Fs(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Zi(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Fs(t,!0,n,null,o);break;case"together":Fs(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Ds(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(ne(153));if(null!==t.child){for(n=Nu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ni)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $s(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hs(e,t,n){var r=t.pendingProps;switch(Jo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $s(t),null;case 1:case 17:return No(t.type)&&Lo(),$s(t),null;case 3:return r=t.stateNode,Qi(),Co(Po),Co(Eo),el(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ci(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ri&&(ru(ri),ri=null))),Is(e,t),$s(t),null;case 5:qi(t);var a=Yi(Vi.current);if(n=t.type,null!==e&&null!=t.stateNode)Ns(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(ne(166));return $s(t),null}if(e=Yi($i.current),ci(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[co]=t,r[uo]=o,e=!!(1&t.mode),n){case"dialog":Oa("cancel",r),Oa("close",r);break;case"iframe":case"object":case"embed":Oa("load",r);break;case"video":case"audio":for(a=0;a<Aa.length;a++)Oa(Aa[a],r);break;case"source":Oa("error",r);break;case"img":case"image":case"link":Oa("error",r),Oa("load",r);break;case"details":Oa("toggle",r);break;case"input":Ge(r,o),Oa("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Oa("invalid",r);break;case"textarea":tt(r,o),Oa("invalid",r)}for(var i in gt(n,o),a=null,o)if(o.hasOwnProperty(i)){var l=o[i];"children"===i?"string"==typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Ka(r.textContent,l,e),a=["children",l]):"number"==typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Ka(r.textContent,l,e),a=["children",""+l]):ae.hasOwnProperty(i)&&null!=l&&"onScroll"===i&&Oa("scroll",r)}switch(n){case"input":$e(r),qe(r,o,!0);break;case"textarea":$e(r),rt(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=qa)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{i=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=at(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),"select"===n&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[co]=t,e[uo]=r,Ts(e,t,!1,!1),t.stateNode=e;e:{switch(i=mt(n,r),n){case"dialog":Oa("cancel",e),Oa("close",e),a=r;break;case"iframe":case"object":case"embed":Oa("load",e),a=r;break;case"video":case"audio":for(a=0;a<Aa.length;a++)Oa(Aa[a],e);a=r;break;case"source":Oa("error",e),a=r;break;case"img":case"image":case"link":Oa("error",e),Oa("load",e),a=r;break;case"details":Oa("toggle",e),a=r;break;case"input":Ge(e,r),a=Ye(e,r),Oa("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=ze({},r,{value:void 0}),Oa("invalid",e);break;case"textarea":tt(e,r),a=et(e,r),Oa("invalid",e)}for(o in gt(n,a),l=a)if(l.hasOwnProperty(o)){var s=l[o];"style"===o?ft(e,s):"dangerouslySetInnerHTML"===o?null!=(s=s?s.__html:void 0)&&st(e,s):"children"===o?"string"==typeof s?("textarea"!==n||""!==s)&&ct(e,s):"number"==typeof s&&ct(e,""+s):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(ae.hasOwnProperty(o)?null!=s&&"onScroll"===o&&Oa("scroll",e):null!=s&&me(e,o,s,i))}switch(n){case"input":$e(e),qe(e,r,!1);break;case"textarea":$e(e),rt(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Be(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?Je(e,!!r.multiple,o,!1):null!=r.defaultValue&&Je(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=qa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return $s(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(ne(166));if(n=Yi(Vi.current),Yi($i.current),ci(t)){if(r=t.stateNode,n=t.memoizedProps,r[co]=t,(o=r.nodeValue!==n)&&null!==(e=ei))switch(e.tag){case 3:Ka(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ka(r.nodeValue,n,!!(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[co]=t,t.stateNode=r}return $s(t),null;case 13:if(Co(Xi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ni&&null!==ti&&1&t.mode&&!(128&t.flags))ui(),di(),t.flags|=98560,o=!1;else if(o=ci(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(ne(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(ne(317));o[co]=t}else di(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;$s(t),o=!1}else null!==ri&&(ru(ri),ri=null),o=!0;if(!o)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Xi.current?0===Lc&&(Lc=3):pu())),null!==t.updateQueue&&(t.flags|=4),$s(t),null);case 4:return Qi(),Is(e,t),null===e&&Ua(t.stateNode.containerInfo),$s(t),null;case 10:return ji(t.type._context),$s(t),null;case 19:if(Co(Xi),null===(o=t.memoizedState))return $s(t),null;if(r=!!(128&t.flags),null===(i=o.rendering))if(r)Ws(o,!1);else{if(0!==Lc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=Zi(e))){for(t.flags|=128,Ws(o,!1),null!==(r=i.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(i=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return So(Xi,1&Xi.current|2),t.child}e=e.sibling}null!==o.tail&&Qt()>Uc&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Zi(i))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!i.alternate&&!ni)return $s(t),null}else 2*Qt()-o.renderingStartTime>Uc&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(null!==(n=o.last)?n.sibling=i:t.child=i,o.last=i)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qt(),t.sibling=null,n=Xi.current,So(Xi,r?1&n|2:1&n),t):($s(t),null);case 22:case 23:return su(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Ic)&&($s(t),6&t.subtreeFlags&&(t.flags|=8192)):$s(t),null;case 24:case 25:return null}throw Error(ne(156,t.tag))}function Vs(e,t){switch(Jo(t),t.tag){case 1:return No(t.type)&&Lo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qi(),Co(Po),Co(Eo),el(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return qi(t),null;case 13:if(Co(Xi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(ne(340));di()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Co(Xi),null;case 4:return Qi(),null;case 10:return ji(t.type._context),null;case 22:case 23:return su(),null;default:return null}}Ts=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Is=function(){},Ns=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Yi($i.current);var o,i=null;switch(n){case"input":a=Ye(e,a),r=Ye(e,r),i=[];break;case"select":a=ze({},a,{value:void 0}),r=ze({},r,{value:void 0}),i=[];break;case"textarea":a=et(e,a),r=et(e,r),i=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=qa)}for(c in gt(n,r),n=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var l=a[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(ae.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var s=r[c];if(l=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&s!==l&&(null!=s||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||s&&s.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in s)s.hasOwnProperty(o)&&l[o]!==s[o]&&(n||(n={}),n[o]=s[o])}else n||(i||(i=[]),i.push(c,n)),n=s;else"dangerouslySetInnerHTML"===c?(s=s?s.__html:void 0,l=l?l.__html:void 0,null!=s&&l!==s&&(i=i||[]).push(c,s)):"children"===c?"string"!=typeof s&&"number"!=typeof s||(i=i||[]).push(c,""+s):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(ae.hasOwnProperty(c)?(null!=s&&"onScroll"===c&&Oa("scroll",e),i||l===s||(i=[])):(i=i||[]).push(c,s))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Gs=!1,Qs="function"==typeof WeakSet?WeakSet:Set,Ks=null;function qs(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){wu(e,t,r)}else n.current=null}function Xs(e,t,n){try{n()}catch(r){wu(e,t,r)}}var Zs=!1;function Js(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,void 0!==o&&Xs(t,n,o)}a=a.next}while(a!==r)}}function ec(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function nc(e){var t=e.alternate;null!==t&&(e.alternate=null,nc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[co],delete t[uo],delete t[fo],delete t[ho],delete t[go])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rc(e){return 5===e.tag||3===e.tag||4===e.tag}function ac(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function oc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=qa));else if(4!==r&&null!==(e=e.child))for(oc(e,t,n),e=e.sibling;null!==e;)oc(e,t,n),e=e.sibling}function ic(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ic(e,t,n),e=e.sibling;null!==e;)ic(e,t,n),e=e.sibling}var lc=null,sc=!1;function cc(e,t,n){for(n=n.child;null!==n;)uc(e,t,n),n=n.sibling}function uc(e,t,n){if(nn&&"function"==typeof nn.onCommitFiberUnmount)try{nn.onCommitFiberUnmount(tn,n)}catch(l){}switch(n.tag){case 5:Gs||qs(n,t);case 6:var r=lc,a=sc;lc=null,cc(e,t,n),sc=a,null!==(lc=r)&&(sc?(e=lc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lc.removeChild(n.stateNode));break;case 18:null!==lc&&(sc?(e=lc,n=n.stateNode,8===e.nodeType?oo(e.parentNode,n):1===e.nodeType&&oo(e,n),Dn(e)):oo(lc,n.stateNode));break;case 4:r=lc,a=sc,lc=n.stateNode.containerInfo,sc=!0,cc(e,t,n),lc=r,sc=a;break;case 0:case 11:case 14:case 15:if(!Gs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,void 0!==i&&(2&o||4&o)&&Xs(n,t,i),a=a.next}while(a!==r)}cc(e,t,n);break;case 1:if(!Gs&&(qs(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){wu(n,t,l)}cc(e,t,n);break;case 21:cc(e,t,n);break;case 22:1&n.mode?(Gs=(r=Gs)||null!==n.memoizedState,cc(e,t,n),Gs=r):cc(e,t,n);break;default:cc(e,t,n)}}function dc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach(function(t){var r=ju.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 5:lc=l.stateNode,sc=!1;break e;case 3:case 4:lc=l.stateNode.containerInfo,sc=!0;break e}l=l.return}if(null===lc)throw Error(ne(160));uc(o,i,a),lc=null,sc=!1;var s=a.alternate;null!==s&&(s.return=null),a.return=null}catch(c){wu(a,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fc(t,e),t=t.sibling}function fc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pc(t,e),hc(e),4&r){try{Js(3,e,e.return),ec(3,e)}catch(g){wu(e,e.return,g)}try{Js(5,e,e.return)}catch(g){wu(e,e.return,g)}}break;case 1:pc(t,e),hc(e),512&r&&null!==n&&qs(n,n.return);break;case 5:if(pc(t,e),hc(e),512&r&&null!==n&&qs(n,n.return),32&e.flags){var a=e.stateNode;try{ct(a,"")}catch(g){wu(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,i=null!==n?n.memoizedProps:o,l=e.type,s=e.updateQueue;if(e.updateQueue=null,null!==s)try{"input"===l&&"radio"===o.type&&null!=o.name&&Qe(a,o),mt(l,i);var c=mt(l,o);for(i=0;i<s.length;i+=2){var u=s[i],d=s[i+1];"style"===u?ft(a,d):"dangerouslySetInnerHTML"===u?st(a,d):"children"===u?ct(a,d):me(a,u,d,c)}switch(l){case"input":Ke(a,o);break;case"textarea":nt(a,o);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?Je(a,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?Je(a,!!o.multiple,o.defaultValue,!0):Je(a,!!o.multiple,o.multiple?[]:"",!1))}a[uo]=o}catch(g){wu(e,e.return,g)}}break;case 6:if(pc(t,e),hc(e),4&r){if(null===e.stateNode)throw Error(ne(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(g){wu(e,e.return,g)}}break;case 3:if(pc(t,e),hc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Dn(t.containerInfo)}catch(g){wu(e,e.return,g)}break;case 4:default:pc(t,e),hc(e);break;case 13:pc(t,e),hc(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Fc=Qt())),4&r&&dc(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Gs=(c=Gs)||u,pc(t,e),Gs=c):pc(t,e),hc(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(Ks=e,u=e.child;null!==u;){for(d=Ks=u;null!==Ks;){switch(f=(p=Ks).child,p.tag){case 0:case 11:case 14:case 15:Js(4,p,p.return);break;case 1:qs(p,p.return);var h=p.stateNode;if("function"==typeof h.componentWillUnmount){r=p,n=p.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(g){wu(r,n,g)}}break;case 5:qs(p,p.return);break;case 22:if(null!==p.memoizedState){yc(d);continue}}null!==f?(f.return=p,Ks=f):yc(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{a=d.stateNode,c?"function"==typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,i=null!=(s=d.memoizedProps.style)&&s.hasOwnProperty("display")?s.display:null,l.style.display=pt("display",i))}catch(g){wu(e,e.return,g)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){wu(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:pc(t,e),hc(e),4&r&&dc(e);case 21:}}function hc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rc(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(ct(a,""),r.flags&=-33),ic(e,ac(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;oc(e,ac(e),o);break;default:throw Error(ne(161))}}catch(i){wu(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gc(e,t,n){Ks=e,mc(e)}function mc(e,t,n){for(var r=!!(1&e.mode);null!==Ks;){var a=Ks,o=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Ys;if(!i){var l=a.alternate,s=null!==l&&null!==l.memoizedState||Gs;l=Ys;var c=Gs;if(Ys=i,(Gs=s)&&!c)for(Ks=a;null!==Ks;)s=(i=Ks).child,22===i.tag&&null!==i.memoizedState?vc(a):null!==s?(s.return=i,Ks=s):vc(a);for(;null!==o;)Ks=o,mc(o),o=o.sibling;Ks=a,Ys=l,Gs=c}xc(e)}else 8772&a.subtreeFlags&&null!==o?(o.return=a,Ks=o):xc(e)}}function xc(e){for(;null!==Ks;){var t=Ks;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Gs||ec(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Gs)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Jl(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Bi(t,o,r);break;case 3:var i=t.updateQueue;if(null!==i){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bi(t,i,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var s=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break;case"img":s.src&&(n.src=s.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Dn(d)}}}break;default:throw Error(ne(163))}Gs||512&t.flags&&tc(t)}catch(p){wu(t,t.return,p)}}if(t===e){Ks=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ks=n;break}Ks=t.return}}function yc(e){for(;null!==Ks;){var t=Ks;if(t===e){Ks=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ks=n;break}Ks=t.return}}function vc(e){for(;null!==Ks;){var t=Ks;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ec(4,t)}catch(s){wu(t,n,s)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(s){wu(t,a,s)}}var o=t.return;try{tc(t)}catch(s){wu(t,o,s)}break;case 5:var i=t.return;try{tc(t)}catch(s){wu(t,i,s)}}}catch(s){wu(t,t.return,s)}if(t===e){Ks=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Ks=l;break}Ks=t.return}}var bc,wc=Math.ceil,kc=xe.ReactCurrentDispatcher,Cc=xe.ReactCurrentOwner,Sc=xe.ReactCurrentBatchConfig,jc=0,Ec=null,Pc=null,Tc=0,Ic=0,Nc=ko(0),Lc=0,Ac=null,Rc=0,zc=0,Mc=0,Oc=null,_c=null,Fc=0,Uc=1/0,Dc=null,Bc=!1,Wc=null,$c=null,Hc=!1,Vc=null,Yc=0,Gc=0,Qc=null,Kc=-1,qc=0;function Xc(){return 6&jc?Qt():-1!==Kc?Kc:Kc=Qt()}function Zc(e){return 1&e.mode?2&jc&&0!==Tc?Tc&-Tc:null!==fi.transition?(0===qc&&(qc=fn()),qc):0!==(e=xn)?e:e=void 0===(e=window.event)?16:Qn(e.type):1}function Jc(e,t,n,r){if(50<Gc)throw Gc=0,Qc=null,Error(ne(185));gn(e,n,r),2&jc&&e===Ec||(e===Ec&&(!(2&jc)&&(zc|=n),4===Lc&&au(e,Tc)),eu(e,r),1===n&&0===jc&&!(1&t.mode)&&(Uc=Qt()+500,_o&&Do()))}function eu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-rn(o),l=1<<i,s=a[i];-1===s?0!==(l&n)&&0===(l&r)||(a[i]=dn(l,t)):s<=t&&(e.expiredLanes|=l),o&=~l}}(e,t);var r=un(e,e===Ec?Tc:0);if(0===r)null!==n&&Vt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Vt(n),1===t)0===e.tag?function(e){_o=!0,Uo(e)}(ou.bind(null,e)):Uo(ou.bind(null,e)),ro(function(){!(6&jc)&&Do()}),n=null;else{switch(yn(r)){case 1:n=qt;break;case 4:n=Xt;break;case 16:default:n=Zt;break;case 536870912:n=en}n=Eu(n,tu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tu(e,t){if(Kc=-1,qc=0,6&jc)throw Error(ne(327));var n=e.callbackNode;if(vu()&&e.callbackNode!==n)return null;var r=un(e,e===Ec?Tc:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=fu(e,r);else{t=r;var a=jc;jc|=2;var o=du();for(Ec===e&&Tc===t||(Dc=null,Uc=Qt()+500,cu(e,t));;)try{gu();break}catch(l){uu(e,l)}Si(),kc.current=o,jc=a,null!==Pc?t=0:(Ec=null,Tc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(a=pn(e))&&(r=a,t=nu(e,a))),1===t)throw n=Ac,cu(e,0),au(e,r),eu(e,Qt()),n;if(6===t)au(e,r);else{if(a=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!aa(o(),a))return!1}catch(i){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)||(t=fu(e,r),2===t&&(o=pn(e),0!==o&&(r=o,t=nu(e,o))),1!==t)))throw n=Ac,cu(e,0),au(e,r),eu(e,Qt()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(ne(345));case 2:case 5:yu(e,_c,Dc);break;case 3:if(au(e,r),(130023424&r)===r&&10<(t=Fc+500-Qt())){if(0!==un(e,0))break;if(((a=e.suspendedLanes)&r)!==r){Xc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=eo(yu.bind(null,e,_c,Dc),t);break}yu(e,_c,Dc);break;case 4:if(au(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var i=31-rn(r);o=1<<i,(i=t[i])>a&&(a=i),r&=~o}if(r=a,10<(r=(120>(r=Qt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wc(r/1960))-r)){e.timeoutHandle=eo(yu.bind(null,e,_c,Dc),r);break}yu(e,_c,Dc);break;default:throw Error(ne(329))}}}return eu(e,Qt()),e.callbackNode===n?tu.bind(null,e):null}function nu(e,t){var n=Oc;return e.current.memoizedState.isDehydrated&&(cu(e,t).flags|=256),2!==(e=fu(e,t))&&(t=_c,_c=n,null!==t&&ru(t)),e}function ru(e){null===_c?_c=e:_c.push.apply(_c,e)}function au(e,t){for(t&=~Mc,t&=~zc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rn(t),r=1<<n;e[n]=-1,t&=~r}}function ou(e){if(6&jc)throw Error(ne(327));vu();var t=un(e,0);if(!(1&t))return eu(e,Qt()),null;var n=fu(e,t);if(0!==e.tag&&2===n){var r=pn(e);0!==r&&(t=r,n=nu(e,r))}if(1===n)throw n=Ac,cu(e,0),au(e,t),eu(e,Qt()),n;if(6===n)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yu(e,_c,Dc),eu(e,Qt()),null}function iu(e,t){var n=jc;jc|=1;try{return e(t)}finally{0===(jc=n)&&(Uc=Qt()+500,_o&&Do())}}function lu(e){null!==Vc&&0===Vc.tag&&!(6&jc)&&vu();var t=jc;jc|=1;var n=Sc.transition,r=xn;try{if(Sc.transition=null,xn=1,e)return e()}finally{xn=r,Sc.transition=n,!(6&(jc=t))&&Do()}}function su(){Ic=Nc.current,Co(Nc)}function cu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,to(n)),null!==Pc)for(n=Pc.return;null!==n;){var r=n;switch(Jo(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Lo();break;case 3:Qi(),Co(Po),Co(Eo),el();break;case 5:qi(r);break;case 4:Qi();break;case 13:case 19:Co(Xi);break;case 10:ji(r.type._context);break;case 22:case 23:su()}n=n.return}if(Ec=e,Pc=e=Nu(e.current,null),Tc=Ic=t,Lc=0,Ac=null,Mc=zc=Rc=0,_c=Oc=null,null!==Ii){for(t=0;t<Ii.length;t++)if(null!==(r=(n=Ii[t]).interleaved)){n.interleaved=null;var a=r.next,o=n.pending;if(null!==o){var i=o.next;o.next=a,r.next=i}n.pending=r}Ii=null}return e}function uu(e,t){for(;;){var n=Pc;try{if(Si(),tl.current=Kl,ll){for(var r=al.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ll=!1}if(rl=0,il=ol=al=null,sl=!1,cl=0,Cc.current=null,null===n||null===n.return){Lc=1,Ac=t,Pc=null;break}e:{var o=e,i=n.return,l=n,s=t;if(t=Tc,l.flags|=32768,null!==s&&"object"==typeof s&&"function"==typeof s.then){var c=s,u=l,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=fs(i);if(null!==f){f.flags&=-257,hs(f,i,l,0,t),1&f.mode&&ps(o,c,t),s=c;var h=(t=f).updateQueue;if(null===h){var g=new Set;g.add(s),t.updateQueue=g}else h.add(s);break e}if(!(1&t)){ps(o,c,t),pu();break e}s=Error(ne(426))}else if(ni&&1&l.mode){var m=fs(i);if(null!==m){!(65536&m.flags)&&(m.flags|=256),hs(m,i,l,0,t),pi(is(s,l));break e}}o=s=is(s,l),4!==Lc&&(Lc=2),null===Oc?Oc=[o]:Oc.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ui(o,us(0,s,t));break e;case 1:l=s;var x=o.type,y=o.stateNode;if(!(128&o.flags||"function"!=typeof x.getDerivedStateFromError&&(null===y||"function"!=typeof y.componentDidCatch||null!==$c&&$c.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,Ui(o,ds(o,l,t));break e}}o=o.return}while(null!==o)}xu(n)}catch(v){t=v,Pc===n&&null!==n&&(Pc=n=n.return);continue}break}}function du(){var e=kc.current;return kc.current=Kl,null===e?Kl:e}function pu(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Ec||!(268435455&Rc)&&!(268435455&zc)||au(Ec,Tc)}function fu(e,t){var n=jc;jc|=2;var r=du();for(Ec===e&&Tc===t||(Dc=null,cu(e,t));;)try{hu();break}catch(a){uu(e,a)}if(Si(),jc=n,kc.current=r,null!==Pc)throw Error(ne(261));return Ec=null,Tc=0,Lc}function hu(){for(;null!==Pc;)mu(Pc)}function gu(){for(;null!==Pc&&!Yt();)mu(Pc)}function mu(e){var t=bc(e.alternate,e,Ic);e.memoizedProps=e.pendingProps,null===t?xu(e):Pc=t,Cc.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Vs(n,t)))return n.flags&=32767,void(Pc=n);if(null===e)return Lc=6,void(Pc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Hs(n,t,Ic)))return void(Pc=n);if(null!==(t=t.sibling))return void(Pc=t);Pc=t=e}while(null!==t);0===Lc&&(Lc=5)}function yu(e,t,n){var r=xn,a=Sc.transition;try{Sc.transition=null,xn=1,function(e,t,n,r){do{vu()}while(null!==Vc);if(6&jc)throw Error(ne(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-rn(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}(e,o),e===Ec&&(Pc=Ec=null,Tc=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Hc||(Hc=!0,Eu(Zt,function(){return vu(),null})),o=!!(15990&n.flags),!!(15990&n.subtreeFlags)||o){o=Sc.transition,Sc.transition=null;var i=xn;xn=1;var l=jc;jc|=4,Cc.current=null,function(e,t){if(Xa=Wn,ua(e=ca())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var i=0,l=-1,s=-1,c=0,u=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==a&&3!==d.nodeType||(l=i+a),d!==o||0!==r&&3!==d.nodeType||(s=i+r),3===d.nodeType&&(i+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++c===a&&(l=i),p===o&&++u===r&&(s=i),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===s?null:{start:l,end:s}}else n=null}n=n||{start:0,end:0}}else n=null;for(Za={focusedElem:e,selectionRange:n},Wn=!1,Ks=t;null!==Ks;)if(e=(t=Ks).child,1028&t.subtreeFlags&&null!==e)e.return=t,Ks=e;else for(;null!==Ks;){t=Ks;try{var h=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var g=h.memoizedProps,m=h.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:Jl(t.type,g),m);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(ne(163))}}catch(b){wu(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Ks=e;break}Ks=t.return}h=Zs,Zs=!1}(e,n),fc(n,e),da(Za),Wn=!!Xa,Za=Xa=null,e.current=n,gc(n),Gt(),jc=l,xn=i,Sc.transition=o}else e.current=n;if(Hc&&(Hc=!1,Vc=e,Yc=a),o=e.pendingLanes,0===o&&($c=null),function(e){if(nn&&"function"==typeof nn.onCommitFiberRoot)try{nn.onCommitFiberRoot(tn,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),eu(e,Qt()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Bc)throw Bc=!1,e=Wc,Wc=null,e;!!(1&Yc)&&0!==e.tag&&vu(),o=e.pendingLanes,1&o?e===Qc?Gc++:(Gc=0,Qc=e):Gc=0,Do()}(e,t,n,r)}finally{Sc.transition=a,xn=r}return null}function vu(){if(null!==Vc){var e=yn(Yc),t=Sc.transition,n=xn;try{if(Sc.transition=null,xn=16>e?16:e,null===Vc)var r=!1;else{if(e=Vc,Vc=null,Yc=0,6&jc)throw Error(ne(331));var a=jc;for(jc|=4,Ks=e.current;null!==Ks;){var o=Ks,i=o.child;if(16&Ks.flags){var l=o.deletions;if(null!==l){for(var s=0;s<l.length;s++){var c=l[s];for(Ks=c;null!==Ks;){var u=Ks;switch(u.tag){case 0:case 11:case 15:Js(8,u,o)}var d=u.child;if(null!==d)d.return=u,Ks=d;else for(;null!==Ks;){var p=(u=Ks).sibling,f=u.return;if(nc(u),u===c){Ks=null;break}if(null!==p){p.return=f,Ks=p;break}Ks=f}}}var h=o.alternate;if(null!==h){var g=h.child;if(null!==g){h.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}Ks=o}}if(2064&o.subtreeFlags&&null!==i)i.return=o,Ks=i;else e:for(;null!==Ks;){if(2048&(o=Ks).flags)switch(o.tag){case 0:case 11:case 15:Js(9,o,o.return)}var x=o.sibling;if(null!==x){x.return=o.return,Ks=x;break e}Ks=o.return}}var y=e.current;for(Ks=y;null!==Ks;){var v=(i=Ks).child;if(2064&i.subtreeFlags&&null!==v)v.return=i,Ks=v;else e:for(i=y;null!==Ks;){if(2048&(l=Ks).flags)try{switch(l.tag){case 0:case 11:case 15:ec(9,l)}}catch(w){wu(l,l.return,w)}if(l===i){Ks=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Ks=b;break e}Ks=l.return}}if(jc=a,Do(),nn&&"function"==typeof nn.onPostCommitFiberRoot)try{nn.onPostCommitFiberRoot(tn,e)}catch(w){}r=!0}return r}finally{xn=n,Sc.transition=t}}return!1}function bu(e,t,n){e=_i(e,t=us(0,t=is(n,t),1),1),t=Xc(),null!==e&&(gn(e,1,t),eu(e,t))}function wu(e,t,n){if(3===e.tag)bu(e,e,n);else for(;null!==t;){if(3===t.tag){bu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===$c||!$c.has(r))){t=_i(t,e=ds(t,e=is(n,e),1),1),e=Xc(),null!==t&&(gn(t,1,e),eu(t,e));break}}t=t.return}}function ku(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Xc(),e.pingedLanes|=e.suspendedLanes&n,Ec===e&&(Tc&n)===n&&(4===Lc||3===Lc&&(130023424&Tc)===Tc&&500>Qt()-Fc?cu(e,0):Mc|=n),eu(e,t)}function Cu(e,t){0===t&&(1&e.mode?(t=sn,!(130023424&(sn<<=1))&&(sn=4194304)):t=1);var n=Xc();null!==(e=Ai(e,t))&&(gn(e,t,n),eu(e,n))}function Su(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function ju(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ne(314))}null!==r&&r.delete(t),Cu(e,n)}function Eu(e,t){return Ht(e,t)}function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tu(e,t,n,r){return new Pu(e,t,n,r)}function Iu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,t){var n=e.alternate;return null===n?((n=Tu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,a,o){var i=2;if(r=e,"function"==typeof e)Iu(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case be:return Au(n.children,a,o,t);case we:i=8,a|=8;break;case ke:return(e=Tu(12,n,t,2|a)).elementType=ke,e.lanes=o,e;case Ee:return(e=Tu(13,n,t,a)).elementType=Ee,e.lanes=o,e;case Pe:return(e=Tu(19,n,t,a)).elementType=Pe,e.lanes=o,e;case Ne:return Ru(n,a,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ce:i=10;break e;case Se:i=9;break e;case je:i=11;break e;case Te:i=14;break e;case Ie:i=16,r=null;break e}throw Error(ne(130,null==e?e:typeof e,""))}return(t=Tu(i,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Au(e,t,n,r){return(e=Tu(7,e,r,t)).lanes=n,e}function Ru(e,t,n,r){return(e=Tu(22,e,r,t)).elementType=Ne,e.lanes=n,e.stateNode={isHidden:!1},e}function zu(e,t,n){return(e=Tu(6,e,null,t)).lanes=n,e}function Mu(e,t,n){return(t=Tu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ou(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hn(0),this.expirationTimes=hn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hn(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function _u(e,t,n,r,a,o,i,l,s){return e=new Ou(e,t,n,l,s),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Tu(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zi(o),e}function Fu(e){if(!e)return jo;e:{if(Ut(e=e._reactInternals)!==e||1!==e.tag)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(No(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(ne(171))}if(1===e.tag){var n=e.type;if(No(n))return Ro(e,n,t)}return t}function Uu(e,t,n,r,a,o,i,l,s){return(e=_u(n,r,!0,e,0,o,0,l,s)).context=Fu(null),n=e.current,(o=Oi(r=Xc(),a=Zc(n))).callback=null!=t?t:null,_i(n,o,a),e.current.lanes=a,gn(e,a,r),eu(e,r),e}function Du(e,t,n,r){var a=t.current,o=Xc(),i=Zc(a);return n=Fu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oi(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=_i(a,t,i))&&(Jc(e,a,i,o),Fi(e,a,i)),i}function Bu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function $u(e,t){Wu(e,t),(e=e.alternate)&&Wu(e,t)}bc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Po.current)ms=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return ms=!1,function(e,t,n){switch(t.tag){case 3:Es(t),di();break;case 5:Ki(t);break;case 1:No(t.type)&&zo(t);break;case 4:Gi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;So(bi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(So(Xi,1&Xi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zs(e,t,n):(So(Xi,1&Xi.current),null!==(e=Bs(e,t,n))?e.sibling:null);So(Xi,1&Xi.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Us(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),So(Xi,Xi.current),r)break;return null;case 22:case 23:return t.lanes=0,ws(e,t,n)}return Bs(e,t,n)}(e,t,n);ms=!!(131072&e.flags)}else ms=!1,ni&&1048576&t.flags&&Xo(t,Ho,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ds(e,t),e=t.pendingProps;var a=Io(t,Eo.current);Pi(t,n),a=fl(null,t,r,e,a,n);var o=hl();return t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,No(r)?(o=!0,zo(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,zi(t),a.updater=ts,t.stateNode=a,a._reactInternals=t,os(t,r,e,n),t=js(null,t,r,!0,o,n)):(t.tag=0,ni&&o&&Zo(t),xs(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ds(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"==typeof e)return Iu(e)?1:0;if(null!=e){if((e=e.$$typeof)===je)return 11;if(e===Te)return 14}return 2}(r),e=Jl(r,e),a){case 0:t=Cs(null,t,r,e,n);break e;case 1:t=Ss(null,t,r,e,n);break e;case 11:t=ys(null,t,r,e,n);break e;case 14:t=vs(null,t,r,Jl(r.type,e),n);break e}throw Error(ne(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Cs(e,t,r,a=t.elementType===r?a:Jl(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ss(e,t,r,a=t.elementType===r?a:Jl(r,a),n);case 3:e:{if(Es(t),null===e)throw Error(ne(387));r=t.pendingProps,a=(o=t.memoizedState).element,Mi(e,t),Di(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,a=is(Error(ne(423)),t));break e}if(r!==a){t=Ps(e,t,r,n,a=is(Error(ne(424)),t));break e}for(ti=io(t.stateNode.containerInfo.firstChild),ei=t,ni=!0,ri=null,n=vi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(di(),r===a){t=Bs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return Ki(t),null===e&&li(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,i=a.children,Ja(r,a)?i=null:null!==o&&Ja(r,o)&&(t.flags|=32),ks(e,t),xs(e,t,i,n),t.child;case 6:return null===e&&li(t),null;case 13:return zs(e,t,n);case 4:return Gi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=yi(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ys(e,t,r,a=t.elementType===r?a:Jl(r,a),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,So(bi,r._currentValue),r._currentValue=i,null!==o)if(aa(o.value,i)){if(o.children===a.children&&!Po.current){t=Bs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){i=o.child;for(var s=l.firstContext;null!==s;){if(s.context===r){if(1===o.tag){(s=Oi(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?s.next=s:(s.next=u.next,u.next=s),c.pending=s}}o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),Ei(o.return,n,t),l.lanes|=n;break}s=s.next}}else if(10===o.tag)i=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(i=o.return))throw Error(ne(341));i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Ei(i,n,t),i=o.sibling}else i=o.child;if(null!==i)i.return=o;else for(i=o;null!==i;){if(i===t){i=null;break}if(null!==(o=i.sibling)){o.return=i.return,i=o;break}i=i.return}o=i}xs(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Pi(t,n),r=r(a=Ti(a)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return a=Jl(r=t.type,t.pendingProps),vs(e,t,r,a=Jl(r.type,a),n);case 15:return bs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Jl(r,a),Ds(e,t),t.tag=1,No(r)?(e=!0,zo(t)):e=!1,Pi(t,n),rs(t,r,a),os(t,r,a,n),js(null,t,r,!0,e,n);case 19:return Us(e,t,n);case 22:return ws(e,t,n)}throw Error(ne(156,t.tag))};var Hu="function"==typeof reportError?reportError:function(e){console.error(e)};function Vu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Gu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ku(){}function qu(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o;if("function"==typeof a){var l=a;a=function(){var e=Bu(i);l.call(e)}}Du(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"==typeof r){var o=r;r=function(){var e=Bu(i);o.call(e)}}var i=Uu(t,r,e,0,null,!1,0,"",Ku);return e._reactRootContainer=i,e[po]=i.current,Ua(8===e.nodeType?e.parentNode:e),lu(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"==typeof r){var l=r;r=function(){var e=Bu(s);l.call(e)}}var s=_u(e,0,!1,null,0,!1,0,"",Ku);return e._reactRootContainer=s,e[po]=s.current,Ua(8===e.nodeType?e.parentNode:e),lu(function(){Du(t,s,n,r)}),s}(n,t,e,a,r);return Bu(i)}Yu.prototype.render=Vu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(ne(409));Du(e,t,null,null)},Yu.prototype.unmount=Vu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lu(function(){Du(null,e,null,null)}),t[po]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=kn();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ln.length&&0!==t&&t<Ln[n].priority;n++);Ln.splice(n,0,e),0===n&&Mn(e)}},vn=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=cn(t.pendingLanes);0!==n&&(mn(t,1|n),eu(t,Qt()),!(6&jc)&&(Uc=Qt()+500,Do()))}break;case 13:lu(function(){var t=Ai(e,1);if(null!==t){var n=Xc();Jc(t,e,1,n)}}),$u(e,1)}},bn=function(e){if(13===e.tag){var t=Ai(e,134217728);if(null!==t)Jc(t,e,134217728,Xc());$u(e,134217728)}},wn=function(e){if(13===e.tag){var t=Zc(e),n=Ai(e,t);if(null!==n)Jc(n,e,t,Xc());$u(e,t)}},kn=function(){return xn},Cn=function(e,t){var n=xn;try{return xn=e,t()}finally{xn=n}},vt=function(e,t,n){switch(t){case"input":if(Ke(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=vo(r);if(!a)throw Error(ne(90));He(r),Ke(r,a)}}}break;case"textarea":nt(e,n);break;case"select":null!=(t=n.value)&&Je(e,!!n.multiple,t,!1)}},jt=iu,Et=lu;var Xu={usingClientEntryPoint:!1,Events:[xo,yo,vo,Ct,St,iu]},Zu={findFiberByHostInstance:mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ju={bundleType:Zu.bundleType,version:Zu.version,rendererPackageName:Zu.rendererPackageName,rendererConfig:Zu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xe.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Wt(e))?null:e.stateNode},findFiberByHostInstance:Zu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{tn=ed.inject(Ju),nn=ed}catch(lt){}}q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xu,q.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gu(t))throw Error(ne(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ve,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},q.createRoot=function(e,t){if(!Gu(e))throw Error(ne(299));var n=!1,r="",a=Hu;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=_u(e,1,!1,null,0,n,0,r,a),e[po]=t.current,Ua(8===e.nodeType?e.parentNode:e),new Vu(t)},q.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ne(188));throw e=Object.keys(e).join(","),Error(ne(268,e))}return e=null===(e=Wt(t))?null:e.stateNode},q.flushSync=function(e){return lu(e)},q.hydrate=function(e,t,n){if(!Qu(t))throw Error(ne(200));return qu(null,e,t,!0,n)},q.hydrateRoot=function(e,t,n){if(!Gu(e))throw Error(ne(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",i=Hu;if(null!=n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(i=n.onRecoverableError)),t=Uu(t,null,e,1,null!=n?n:null,a,0,o,i),e[po]=t.current,Ua(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Yu(t)},q.render=function(e,t,n){if(!Qu(t))throw Error(ne(200));return qu(null,e,t,!1,n)},q.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(ne(40));return!!e._reactRootContainer&&(lu(function(){qu(null,null,e,!1,function(){e._reactRootContainer=null,e[po]=null})}),!0)},q.unstable_batchedUpdates=iu,q.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qu(n))throw Error(ne(200));if(null==e||void 0===e._reactInternals)throw Error(ne(38));return qu(e,t,n,!1,r)},q.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),K.exports=q;var td,nd=K.exports;td=nd.createRoot,nd.hydrateRoot;const rd={activeTab:"home",isProcessing:!1,isHistoryPanelOpen:!1,settings:{language:"en-US",theme:"dark",localOnlyMode:!1,accentHue:255},pinnedNotes:[],currentText:"",currentResult:null,aiAvailability:{promptAPI:"unavailable",summarizerAPI:"unavailable",rewriterAPI:"unavailable",writerAPI:"unavailable"},error:null},ad=D.createContext(void 0);function od(){const e=D.useContext(ad);if(!e)throw new Error("useAppState must be used within AppProvider");return e}function id(){return crypto.randomUUID()}const ld={language:"en-US",theme:"dark",localOnlyMode:!1,accentHue:255,autoCorrectEnabled:!1,autoCorrectDelay:3e3,undoHistoryLimit:10};class sd{static async getSettings(){try{const e=await chrome.storage.local.get(this.SETTINGS_KEY);return e[this.SETTINGS_KEY]?{...ld,...e[this.SETTINGS_KEY]}:ld}catch(e){return console.error("[Storage] Failed to get settings:",e),ld}}static async saveSettings(e){try{await chrome.storage.local.set({[this.SETTINGS_KEY]:e})}catch(t){if(console.error("[Storage] Failed to save settings:",t),t instanceof Error&&t.message.includes("QUOTA_BYTES"))throw new Error("Storage quota exceeded. Please clear some data.");throw t}}static async updateSettings(e){const t={...await this.getSettings(),...e};await this.saveSettings(t)}static async clearSettings(){try{await chrome.storage.local.remove(this.SETTINGS_KEY)}catch(e){throw console.error("[Storage] Failed to clear settings:",e),e}}static onSettingsChange(e){const t=(t,n)=>{if("local"===n&&t[this.SETTINGS_KEY]){const n=t[this.SETTINGS_KEY];if(!n)return;const r=n.oldValue,a=n.newValue;r&&a&&e(a,r)}};return chrome.storage.onChanged.addListener(t),()=>{chrome.storage.onChanged.removeListener(t)}}}t(sd,"SETTINGS_KEY","settings");const cd="pinnedNotes",ud="history",dd="promptHistory",pd="projects",fd="snapshots",hd=2592e6;class gd{static async getDB(){return this.dbPromise||(this.dbPromise=new Promise((e,t)=>{const n=indexedDB.open("flint-db",4);n.onerror=()=>{console.error("[IndexedDB] Failed to open database:",n.error),t(n.error)},n.onsuccess=()=>{e(n.result)},n.onupgradeneeded=e=>{const t=e.target.result,n=e.oldVersion;if(!t.objectStoreNames.contains(cd)){t.createObjectStore(cd,{keyPath:"id"}).createIndex("updatedAt","updatedAt",{unique:!1})}if(!t.objectStoreNames.contains(ud)){const e=t.createObjectStore(ud,{keyPath:"id"});e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("type","type",{unique:!1})}if(n<2&&!t.objectStoreNames.contains(dd)){const e=t.createObjectStore(dd,{keyPath:"id"});e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("pinned","pinned",{unique:!1})}if(n<3&&!t.objectStoreNames.contains(pd)){const e=t.createObjectStore(pd,{keyPath:"id"});e.createIndex("updatedAt","updatedAt",{unique:!1}),e.createIndex("createdAt","createdAt",{unique:!1})}if(n<4&&!t.objectStoreNames.contains(fd)){const e=t.createObjectStore(fd,{keyPath:"id"});e.createIndex("projectId","projectId",{unique:!1}),e.createIndex("timestamp","timestamp",{unique:!1})}}})),this.dbPromise}static async transaction(e,t,n){const r=await this.getDB();return new Promise((a,o)=>{const i=r.transaction(e,t).objectStore(e),l=n(i);l.onsuccess=()=>a(l.result),l.onerror=()=>{console.error(`[IndexedDB] Transaction failed on ${e}:`,l.error),o(l.error)}})}static async getAll(e){return this.transaction(e,"readonly",e=>e.getAll())}static async get(e,t){return this.transaction(e,"readonly",e=>e.get(t))}static async put(e,t){await this.transaction(e,"readwrite",e=>e.put(t))}static async delete(e,t){await this.transaction(e,"readwrite",e=>e.delete(t))}static async clear(e){await this.transaction(e,"readwrite",e=>e.clear())}}t(gd,"dbPromise",null);class md extends sd{static async getPinnedNotes(){try{return(await gd.getAll(cd)).sort((e,t)=>t.updatedAt-e.updatedAt)}catch(e){return console.error("[Storage] Failed to get pinned notes:",e),[]}}static async savePinnedNote(e){try{const t=Date.now(),n={id:e.id||id(),title:e.title,content:e.content,createdAt:e.id&&(await this.getPinnedNote(e.id))?.createdAt||t,updatedAt:t};return await gd.put(cd,n),n}catch(t){throw console.error("[Storage] Failed to save pinned note:",t),t}}static async getPinnedNote(e){try{return await gd.get(cd,e)}catch(t){return void console.error("[Storage] Failed to get pinned note:",t)}}static async deletePinnedNote(e){try{await gd.delete(cd,e)}catch(t){throw console.error("[Storage] Failed to delete pinned note:",t),t}}static async getHistory(e){try{const t=(await gd.getAll(ud)).sort((e,t)=>t.timestamp-e.timestamp);return e?t.slice(0,e):t}catch(t){return console.error("[Storage] Failed to get history:",t),[]}}static async saveHistoryItem(e){try{const t={id:e.id||id(),type:e.type,originalText:e.originalText,resultText:e.resultText,timestamp:e.timestamp||Date.now(),metadata:e.metadata};return await gd.put(ud,t),await this.checkAndCleanupStorage(),t}catch(t){throw console.error("[Storage] Failed to save history item:",t),t}}static async searchHistory(e){try{const t=await this.getHistory(),n=e.toLowerCase();return t.filter(e=>e.originalText.toLowerCase().includes(n)||e.resultText.toLowerCase().includes(n))}catch(t){return console.error("[Storage] Failed to search history:",t),[]}}static async toggleHistoryLiked(e){try{const t=await gd.get(ud,e);if(!t)return;const n={...t,liked:!t.liked};return await gd.put(ud,n),n}catch(t){throw console.error("[Storage] Failed to toggle history liked:",t),t}}static async clearHistory(){try{await gd.clear(ud)}catch(e){throw console.error("[Storage] Failed to clear history:",e),e}}static async cleanupOldHistory(){try{const e=await gd.getAll(ud),t=Date.now()-hd,n=e.filter(e=>e.timestamp<t);for(const r of n)await gd.delete(ud,r.id);return n.length}catch(e){return console.error("[Storage] Failed to cleanup old history:",e),0}}static async checkAndCleanupStorage(){try{if("storage"in navigator&&"estimate"in navigator.storage){const e=await navigator.storage.estimate();if((e.usage||0)/1048576>40){const e=(await gd.getAll(ud)).sort((e,t)=>e.timestamp-t.timestamp),t=Math.ceil(.2*e.length);for(let n=0;n<t&&n<e.length;n++)await gd.delete(ud,e[n].id)}}}catch(e){console.error("[Storage] Failed to check storage:",e)}}static async getPromptHistory(e){try{const t=(await gd.getAll(dd)).sort((e,t)=>e.pinned!==t.pinned?e.pinned?-1:1:t.timestamp-e.timestamp);return e?t.slice(0,e):t}catch(t){return console.error("[Storage] Failed to get prompt history:",t),[]}}static async savePromptToHistory(e){try{const t=await gd.getAll(dd),n=t.filter(e=>e.pinned).length;if(t.length>=4&&n>=4)return;if(t.length>=4){const e=t.filter(e=>!e.pinned).sort((e,t)=>e.timestamp-t.timestamp);e.length>0&&await gd.delete(dd,e[0].id)}const r={id:id(),text:e,timestamp:Date.now(),pinned:!1};await gd.put(dd,r)}catch(t){console.error("[Storage] Failed to save prompt to history:",t)}}static async togglePromptPin(e){try{const t=await gd.get(dd,e);if(!t)return;const n={...t,pinned:!t.pinned};await gd.put(dd,n)}catch(t){throw console.error("[Storage] Failed to toggle prompt pin:",t),t}}static async deletePromptFromHistory(e){try{await gd.delete(dd,e)}catch(t){throw console.error("[Storage] Failed to delete prompt from history:",t),t}}static async cleanupOldPrompts(){try{const e=await gd.getAll(dd),t=Date.now()-hd,n=e.filter(e=>!e.pinned&&e.timestamp<t);for(const r of n)await gd.delete(dd,r.id);return n.length}catch(e){return console.error("[Storage] Failed to cleanup old prompts:",e),0}}static async getGenerateSettings(){try{const e=await chrome.storage.local.get("generateSettings");return e.generateSettings?{...this.DEFAULT_GENERATE_SETTINGS,...e.generateSettings}:this.DEFAULT_GENERATE_SETTINGS}catch(e){return console.error("[Storage] Failed to get generate settings:",e),this.DEFAULT_GENERATE_SETTINGS}}static async saveGenerateSettings(e){try{await chrome.storage.local.set({generateSettings:e})}catch(t){throw console.error("[Storage] Failed to save generate settings:",t),t}}static async createProject(e,t=""){try{const n=Date.now(),r={id:id(),title:e,content:t,createdAt:n,updatedAt:n};return await gd.put(pd,r),r}catch(n){throw console.error("[Storage] Failed to create project:",n),n}}static async getProjects(){try{return(await gd.getAll(pd)).sort((e,t)=>t.updatedAt-e.updatedAt)}catch(e){return console.error("[Storage] Failed to get projects:",e),[]}}static async getProject(e){try{return await gd.get(pd,e)}catch(t){return void console.error("[Storage] Failed to get project:",t)}}static async updateProject(e,t){try{const n=await gd.get(pd,e);if(!n)return;const r={...n,...t,updatedAt:Date.now()};return await gd.put(pd,r),r}catch(n){throw console.error("[Storage] Failed to update project:",n),n}}static async deleteProject(e){try{await gd.delete(pd,e)}catch(t){throw console.error("[Storage] Failed to delete project:",t),t}}static async getLastProjectId(){try{return(await chrome.storage.local.get("flint.lastProjectId"))["flint.lastProjectId"]||null}catch(e){return console.error("[Storage] Failed to get last project ID:",e),null}}static async setLastProjectId(e){try{await chrome.storage.local.set({"flint.lastProjectId":e})}catch(t){console.error("[Storage] Failed to set last project ID:",t)}}static async createSnapshot(e,t,n,r,a){try{const o={id:id(),projectId:e,content:t,actionType:n,actionDescription:r,timestamp:Date.now(),selectionRange:a};return await gd.put(fd,o),await this.deleteOldSnapshots(e,50),o}catch(o){throw console.error("[Storage] Failed to create snapshot:",o),o}}static async getSnapshots(e){try{const t=await gd.getDB();return new Promise((n,r)=>{const a=t.transaction(fd,"readonly").objectStore(fd).index("projectId").getAll(e);a.onsuccess=()=>{const e=a.result.sort((e,t)=>t.timestamp-e.timestamp);n(e)},a.onerror=()=>{console.error("[Storage] Failed to get snapshots:",a.error),r(a.error)}})}catch(t){return console.error("[Storage] Failed to get snapshots:",t),[]}}static async deleteOldSnapshots(e,t=50){try{const n=await this.getSnapshots(e);if(n.length<=t)return 0;const r=n.slice(t);for(const e of r)await gd.delete(fd,e.id);return r.length}catch(n){return console.error("[Storage] Failed to delete old snapshots:",n),0}}static async getSnapshot(e){try{return await gd.get(fd,e)}catch(t){return void console.error("[Storage] Failed to get snapshot:",t)}}static async updateSnapshot(e,t){try{const n=await this.getSnapshot(e);if(!n)return void console.error("[Storage] Snapshot not found:",e);const r={...n,...t,id:n.id,projectId:n.projectId};return await gd.put(fd,r),r}catch(n){return void console.error("[Storage] Failed to update snapshot:",n)}}static async deleteProjectSnapshots(e){try{const t=await this.getSnapshots(e);for(const e of t)await gd.delete(fd,e.id)}catch(t){throw console.error("[Storage] Failed to delete project snapshots:",t),t}}static async clearSnapshots(e){return this.deleteProjectSnapshots(e)}static async migrateHistoryToSnapshots(){try{if((await this.getSettings()).historyMigrated)return{success:!0,migratedCount:0};const t=await this.getHistory();if(0===t.length)return await this.updateSettings({historyMigrated:!0}),{success:!0,migratedCount:0};const n=await this.createProject("Migrated History","This project contains your previous history items converted to snapshots.");let r=0;for(const a of t)try{let e="";switch(a.type){case"generate":e="Generated text";break;case"rewrite":e=a.metadata?.preset?`Rewrote with ${a.metadata.preset} preset`:"Rewrote text";break;case"summarize":e=a.metadata?.mode?`Summarized as ${a.metadata.mode}`:"Summarized text"}const t={id:id(),projectId:n.id,content:a.resultText,actionType:a.type,actionDescription:e,timestamp:a.timestamp};await gd.put(fd,t),r++}catch(e){console.error(`[Storage] Failed to migrate history item ${a.id}:`,e)}return await this.updateSettings({historyMigrated:!0}),{success:!0,migratedCount:r,projectId:n.id}}catch(e){return console.error("[Storage] History migration failed:",e),{success:!1,migratedCount:0,error:e instanceof Error?e.message:"Unknown error"}}}static async checkAndMigrateHistory(){try{if((await this.getSettings()).historyMigrated)return;await this.migrateHistoryToSnapshots()}catch(e){console.error("[Storage] Failed to check and migrate history:",e)}}}function xd(e,t){const n=new Set(e.toLowerCase().split(/\W+/).filter(e=>e.length>2)),r=new Set(t.toLowerCase().split(/\W+/).filter(e=>e.length>2));if(0===n.size||0===r.size)return 0;let a=0;for(const o of n)r.has(o)&&a++;return a/(n.size+r.size-a)}function yd(e,t,n={}){const{localWindow:r=1500,maxRelatedSections:a=3,enableRelevanceScoring:o=!0,enableDeduplication:i=!0}=n,l=function(e,t,n=800){const r=Math.max(0,t-n),a=Math.min(e.length,t+n);return e.slice(r,a)}(e,t,r);let s=[];if(o&&e.length>2*r){const t=function(e,t,n=3){return function(e){const t=e.split(/\n{2,}/),n=[];for(const r of t)if(r.length>1e3){const e=r.split(/\n/).filter(e=>e.trim().length>0);n.push(...e)}else r.trim().length>0&&n.push(r);return n}(e).map((e,n)=>({text:e,score:xd(e,t),position:n})).filter(e=>e.score>.05).sort((e,t)=>t.score-e.score).slice(0,n)}(e,l,2*a);s=function(e,t=200){return e.map(e=>{const n=e.text.split(/[.!?]+/).filter(e=>e.trim().length>0);if(0===n.length)return e.text.slice(0,t);let r=n[0]?.trim()||"";for(let a=1;a<n.length&&r.length<t;a++){const e=n[a]?.trim();e&&r.length+e.length+2<t&&(r+=". "+e)}return r+(r.endsWith(".")?"":".")})}((i?function(e){const t=[],n=new Set;for(const r of e){const e=r.text.slice(0,60).toLowerCase().trim();!n.has(e)&&e.length>10&&(n.add(e),t.push(r))}return t}(t):t).slice(0,a),250)}const c=l.length+s.reduce((e,t)=>e+t.length,0);return{localContext:l,relatedSections:s,totalChars:c}}t(md,"DEFAULT_GENERATE_SETTINGS",{shortLength:25,mediumLength:50,contextAwarenessEnabled:!0});const vd=class e{static async checkAvailability(){const e=Date.now();if(this.availabilityCache&&e-this.cacheTimestamp<this.CACHE_DURATION)return this.availabilityCache;const t={promptAPI:"unavailable",summarizerAPI:"unavailable",rewriterAPI:"unavailable",writerAPI:"unavailable"};try{if("ai"in window&&"function"==typeof window.ai?.canCreateTextSession){const e=await window.ai.canCreateTextSession();t.promptAPI="readily"===e?"available":"after-download"===e?"after-download":"unavailable"}else if("ai"in self&&"function"==typeof self.ai?.canCreateTextSession){const e=await self.ai.canCreateTextSession();t.promptAPI="readily"===e?"available":"after-download"===e?"after-download":"unavailable"}else t.promptAPI="unavailable"}catch(n){console.error("[AI] Prompt API check failed:",n),t.promptAPI="unavailable"}try{if("Summarizer"in self){const e=await self.Summarizer.availability({outputLanguage:"en"});t.summarizerAPI="available"===e?"available":"downloadable"===e?"after-download":"unavailable"}}catch(n){console.error("[AI] Summarizer API check failed:",n)}try{if("Rewriter"in self){const e=await self.Rewriter.availability({outputLanguage:"en"});t.rewriterAPI="available"===e?"available":"downloadable"===e?"after-download":"unavailable"}}catch(n){console.error("[AI] Rewriter API check failed:",n)}try{if("Writer"in self){const e=await self.Writer.availability({outputLanguage:"en"});t.writerAPI="available"===e?"available":"downloadable"===e?"after-download":"unavailable"}}catch(n){console.error("[AI] Writer API check failed:",n)}return this.availabilityCache=t,this.cacheTimestamp=e,t}static isUserActivationActive(){return navigator.userActivation?.isActive??!1}static ensureUserActivation(){if(!this.isUserActivationActive())throw new Error("User activation required. Please click the button again to continue.")}static getErrorMessage(e){return e instanceof Error?e.message.includes("User activation")||e.message.includes("user gesture")?"Please click the button again to continue.":e.message.includes("not available")||e.message.includes("not supported")?"AI features require Chrome 128+ with Gemini Nano enabled.":e.message:"An unexpected error occurred. Please try again."}static clearCache(){this.availabilityCache=null,this.cacheTimestamp=0}static setDownloadProgressCallback(e){this.downloadProgressCallback=e}static async prewarmModels(){console.log("[AI] Pre-warming models (loading into memory)...");const e=await this.checkAvailability(),t=[],n=[],r=[];"available"===e.summarizerAPI&&r.push((async()=>{try{console.log("[AI] Warming up Summarizer..."),await self.Summarizer.create({type:"key-points",format:"plain-text",length:"short",outputLanguage:"en"}),t.push("Summarizer"),console.log("[AI] ✓ Summarizer warmed up")}catch(e){console.warn("[AI] Failed to warm up Summarizer:",e),n.push("Summarizer")}})()),"available"===e.rewriterAPI&&r.push((async()=>{try{console.log("[AI] Warming up Rewriter..."),await self.Rewriter.create({tone:"as-is",format:"plain-text",length:"as-is",outputLanguage:"en"}),t.push("Rewriter"),console.log("[AI] ✓ Rewriter warmed up")}catch(e){console.warn("[AI] Failed to warm up Rewriter:",e),n.push("Rewriter")}})()),"available"===e.writerAPI&&r.push((async()=>{try{console.log("[AI] Warming up Writer..."),await self.Writer.create({tone:"neutral",format:"plain-text",length:"short",outputLanguage:"en"}),t.push("Writer"),console.log("[AI] ✓ Writer warmed up")}catch(e){console.warn("[AI] Failed to warm up Writer:",e),n.push("Writer")}})()),await Promise.allSettled(r),t.length>0&&console.log(`[AI] ✓ Pre-warming complete! Warmed up: ${t.join(", ")}`),n.length>0&&console.log(`[AI] ⚠ Some models failed to warm up: ${n.join(", ")}`);const a=Object.entries(e).filter(([e,t])=>"after-download"===t).map(([e])=>e);return a.length>0&&(console.log("[AI] Models need download:",a.join(", ")),console.log("[AI] Models will download on first use. This may take 1-2 minutes.")),e}static async prompt(e){this.ensureUserActivation();if("unavailable"===(await this.checkAvailability()).promptAPI)throw new Error("Prompt API is not available. AI features require Chrome 128+ with Gemini Nano enabled.");try{console.log("[AI] Prompt API - Full prompt being sent:",e.substring(0,500)+(e.length>500?"...":""));const t=await window.ai.createTextSession();return await Promise.race([t.prompt(e),new Promise((e,t)=>setTimeout(()=>t(new Error("Operation timed out")),3e4))])}catch(t){throw console.error("[AI] Prompt API error:",t),new Error(this.getErrorMessage(t))}}static async summarize(t,n){this.ensureUserActivation();if("unavailable"===(await this.checkAvailability()).summarizerAPI)return wd.summarize(t,n);try{const r={bullets:"key-points",paragraph:"teaser",brief:"headline"},a={simple:"short",moderate:"medium",detailed:"medium",complex:"long"},o=n.length||a[n.readingLevel]||"medium",i={short:"Keep summary very brief, around 25 words total.",medium:"Provide a moderate summary, around 50 words total.",long:"Provide a detailed summary, around 200 words total."},l="bullets"===n.mode?"Each bullet point must be extremely brief - just the key point in 3-5 words maximum, like a headline.":"",s=new Date;let c=`Current date: ${s.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})} at ${s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`;n.pinnedNotes?.length&&(c+=`\n\nAudience and tone guidance:\n${n.pinnedNotes.join("\n\n")}`),i[o]&&(c+="\n\n"+i[o]),l&&(c+="\n\n"+l);const u=await self.Summarizer.create({type:r[n.mode]||"key-points",format:"plain-text",length:o,sharedContext:c,outputLanguage:"en",monitor(t){t.addEventListener("downloadprogress",t=>{const n=t.loaded||0;console.log(`[AI] Summarizer download progress: ${Math.round(100*n)}%`),e.downloadProgressCallback&&e.downloadProgressCallback(n)})}});return await Promise.race([u.summarize(t),new Promise((e,t)=>setTimeout(()=>t(new Error("Operation timed out")),3e4))])}catch(r){throw console.error("[AI] Summarizer API error:",r),new Error(this.getErrorMessage(r))}}static async rewrite(t,n){this.ensureUserActivation();const r=await this.checkAvailability();if("unavailable"===r.rewriterAPI&&"unavailable"===r.writerAPI&&"unavailable"===r.promptAPI)return wd.rewrite(t,n);const a=new Date;let o=`Current date: ${a.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})} at ${a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`;if(n.pinnedNotes?.length&&(o+=`\n\nAudience and tone guidance:\n${n.pinnedNotes.join("\n\n")}`),!n.customPrompt&&"available"===r.rewriterAPI)try{console.log("[AI] Rewrite - Using Rewriter API (preset tone)");const r=await self.Rewriter.create({tone:n.tone||"as-is",format:"plain-text",length:"as-is",sharedContext:o,outputLanguage:"en",monitor(t){t.addEventListener("downloadprogress",t=>{const n=t.loaded||0;console.log(`[AI] Rewriter download progress: ${Math.round(100*n)}%`),e.downloadProgressCallback&&e.downloadProgressCallback(n)})}});return await Promise.race([r.rewrite(t),new Promise((e,t)=>setTimeout(()=>t(new Error("Operation timed out")),3e4))])}catch(i){console.error("[AI] Rewriter API failed, trying Writer API:",i)}if(n.customPrompt&&"available"===r.writerAPI)try{console.log("[AI] Rewrite - Using Writer API for custom prompt");const e=`You are a text editor. Your ONLY job is to make a small edit to existing text.\n\nORIGINAL TEXT (do NOT change anything except what the instruction asks):\n${t}\n\nEDIT INSTRUCTION:\n${n.customPrompt}\n\nCRITICAL: Output ONLY the edited version of the ORIGINAL TEXT above. Do NOT write a new email or letter. Do NOT add greetings, signatures, or extra sentences. Just make the requested edit to the original text.`,r=await self.Writer.create({tone:"neutral",format:"plain-text",length:"medium",sharedContext:o,outputLanguage:"en"}),a=await Promise.race([r.write(e),new Promise((e,t)=>setTimeout(()=>t(new Error("Operation timed out")),3e4))]);return console.log("[AI] Rewrite - Writer API returned:",a),a}catch(i){console.error("[AI] Writer API failed, trying Prompt API:",i)}if("available"===r.promptAPI){console.log("[AI] Rewrite - Using Prompt API as fallback");const e=n.customPrompt||"Rewrite this text to improve clarity and flow",r=`Task: Edit the following text according to the instruction.\n\nText: "${t}"\n\nInstruction: ${e}\n\nRules:\n1. Start with the exact text shown in quotes above\n2. Make ONLY the change requested in the instruction\n3. Output the result with NO explanations, NO quotes, NO extra text\n\nOutput:`;console.log("[AI] Rewrite fallback - Original text:",t),console.log("[AI] Rewrite fallback - Instruction:",e);const a=await this.prompt(r);return console.log("[AI] Rewrite fallback - AI returned:",a),a}throw new Error("AI features not available. Please enable Chrome AI.")}static async generate(t,n={}){this.ensureUserActivation();const r=await this.checkAvailability();if("unavailable"===r.writerAPI&&"unavailable"===r.promptAPI)return wd.generate(t,n);let a="";const o=new Date,i=`CURRENT DATE AND TIME: ${o.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})} at ${o.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}\n`;let l="";if(n.projectTitle&&(l=`DOCUMENT TITLE: "${n.projectTitle}"\n`),n.context){const e=n.context.split("\n"),r=e.slice(0,-1).join("\n").slice(-1500),o=e.slice(-1).join("\n").slice(0,1500);a=`CRITICAL RULE: NEVER USE SQUARE BRACKETS [] FOR PLACEHOLDERS. NO [Name], [Date], [Company], [Boss's Name], [Your Name], or ANY [] placeholders. If you don't know a specific name or date, just omit it - do NOT make up fake names.\n\n${i}${l}\nYou are a writing assistant. The user is writing ${"email"===n.documentType?"an email":"letter"===n.documentType?"a letter":"article"===n.documentType?"an article":"a document"} and needs you to generate text at their cursor position.\n\nCONTEXT BEFORE CURSOR:\n${r||"[Start of document]"}\n\nCONTEXT AFTER CURSOR:\n${o||"[End of document]"}\n${n.pinnedNotes?.length?`\nAUDIENCE AND TONE GUIDANCE:\n${n.pinnedNotes.join("\n")}\n`:""}\nUSER'S INSTRUCTION: ${t}\n\n${n.smartInstructions?`SPECIFIC INSTRUCTIONS FOR THIS CONTEXT:\n- ${n.smartInstructions}\n\n`:""}\nRULES:\n1. Generate ONLY new text that fits at the cursor position\n2. Do NOT repeat, quote, or paraphrase any of the context text shown above - add NEW information only\n3. If the user asks to "talk more about" or "expand on" something, provide NEW details, examples, or perspectives - do NOT restate what's already written\n4. Match the writing style, tone, and format of the surrounding text\n5. Ensure the generated text flows naturally with what comes before and after\n6. Output ONLY the new text itself - no explanations, no meta-commentary\n7. Do NOT say things like "Here's the text:" or "Based on the context..."\n8. Start directly with the actual content\n\nABSOLUTELY NO SQUARE BRACKETS [] - If you don't know a name or date, omit it completely.`}else a=`CRITICAL RULE: NEVER USE SQUARE BRACKETS [] FOR PLACEHOLDERS. NO [Name], [Date], [Company], or ANY [] placeholders. If you don't know a specific name or date, just omit it - do NOT make up fake names.\n\n${i}${l}${n.pinnedNotes?.length?`AUDIENCE AND TONE GUIDANCE:\n${n.pinnedNotes.join("\n")}\n\n`:""}USER'S INSTRUCTION: ${t}\n\n${n.smartInstructions?`SPECIFIC INSTRUCTIONS:\n- ${n.smartInstructions}\n\n`:""}\nINSTRUCTIONS:\n- Output ONLY the generated text itself\n- Do NOT include any meta-commentary, explanations, or acknowledgments\n- Do NOT say things like "Here's the text:" or "I will generate..."\n- Start directly with the requested content\n\nABSOLUTELY NO SQUARE BRACKETS [] - If you don't know a name or date, omit it completely.`;n.lengthHint?a+=`\n- Generate approximately ${n.lengthHint} words`:"long"===n.length?a+="\n- Generate a detailed response (around 200 words)":"short"===n.length?a+="\n- Generate a very brief response (around 25 words)":a+="\n- Generate a moderate response (around 50 words)";if("available"===r.writerAPI)try{const t=await self.Writer.create({tone:"neutral",format:"plain-text",length:n.length||"medium",sharedContext:"",outputLanguage:"en",monitor(t){t.addEventListener("downloadprogress",t=>{const n=t.loaded||0;console.log(`[AI] Writer download progress: ${Math.round(100*n)}%`),e.downloadProgressCallback&&e.downloadProgressCallback(n)})}});return await Promise.race([t.write(a),new Promise((e,t)=>setTimeout(()=>t(new Error("Operation timed out")),3e4))])}catch(s){console.error("[AI] Writer API failed, falling back to Prompt API:",s)}return this.prompt(a)}static async generateOutputSummary(e){return e.length<=300?e:"..."+e.slice(-300).trim()}static async generateWithEnhancedContext(t,n,r,a={},o={}){this.ensureUserActivation();const i=await this.checkAvailability();if("unavailable"===i.writerAPI&&"unavailable"===i.promptAPI)return wd.generate(t,a);const l=yd(n,r,{localWindow:1500,maxRelatedSections:3,enableRelevanceScoring:!0,enableDeduplication:!0,...o});console.log("[AI] Enhanced context assembled:",{localChars:l.localContext.length,relatedSections:l.relatedSections.length,totalChars:l.totalChars});const s=function(e,t=!0){let n="";if(e.localContext.trim()){const t=Math.floor(e.localContext.length/2),r=e.localContext.slice(0,t).trim(),a=e.localContext.slice(t).trim();r&&(n+=`[CONTEXT BEFORE CURSOR]\n${r}\n\n`),a&&(n+=`[CONTEXT AFTER CURSOR]\n${a}\n\n`)}return t&&e.relatedSections.length>0&&(n+="[RELATED SECTIONS FROM DOCUMENT]\n",e.relatedSections.forEach((e,t)=>{n+=`${t+1}. ${e.trim()}\n\n`})),n.trim()}(l,!0),c=function(e,t){const n=e.slice(0,t).split("\n");for(let r=n.length-1;r>=0;r--){const e=n[r]?.trim();if(e){if(/^#{1,6}\s+.+/.test(e))return e.replace(/^#+\s*/,"");if(/^[A-Z][A-Z\s]{10,}$/.test(e))return e}}return null}(n,r),u=new Date,d=`CURRENT DATE AND TIME: ${u.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})} at ${u.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}\n`;let p="";a.projectTitle&&(p=`DOCUMENT TITLE: "${a.projectTitle}"\n`),c&&(p+=`CURRENT SECTION: "${c}"\n`);let f=`CRITICAL RULE: NEVER USE SQUARE BRACKETS [] FOR PLACEHOLDERS. NO [Name], [Date], [Company], or ANY [] placeholders. If you don't know a specific name or date, just omit it.\n\n${d}${p}\nYou are a writing assistant. The user is writing ${"email"===a.documentType?"an email":"letter"===a.documentType?"a letter":"article"===a.documentType?"an article":"a document"} and needs you to generate text at their cursor position.\n\n${s}\n${a.pinnedNotes?.length?`\nAUDIENCE AND TONE GUIDANCE:\n${a.pinnedNotes.join("\n")}\n`:""}\nUSER'S INSTRUCTION: ${t}\n\n${a.smartInstructions?`SPECIFIC INSTRUCTIONS FOR THIS CONTEXT:\n- ${a.smartInstructions}\n\n`:""}\nRULES:\n1. Generate ONLY new text that fits at the cursor position\n2. Do NOT repeat any of the context text shown above - add NEW information only\n3. If the user asks to "talk more about" or "expand on" something, provide NEW details, examples, or perspectives - do NOT restate what's already written\n4. Match the writing style, tone, and format of the surrounding text\n5. Use information from related sections to maintain consistency\n6. Ensure the generated text flows naturally with what comes before and after\n7. Output ONLY the new text itself - no explanations, no meta-commentary\n8. Start directly with the actual content\n\nABSOLUTELY NO SQUARE BRACKETS [] - If you don't know a name or date, omit it completely.`;a.lengthHint?f+=`\n- Generate approximately ${a.lengthHint} words`:"long"===a.length?f+="\n- Generate a detailed response (around 200 words)":"short"===a.length?f+="\n- Generate a very brief response (around 25 words)":f+="\n- Generate a moderate response (around 50 words)";const h=a.pinnedNotes?.length?`Audience and tone guidance:\n${a.pinnedNotes.join("\n\n")}`:"";if("available"===i.writerAPI)try{const t=await self.Writer.create({tone:"neutral",format:"plain-text",length:a.length||"medium",sharedContext:h,outputLanguage:"en",monitor(t){t.addEventListener("downloadprogress",t=>{const n=t.loaded||0;console.log(`[AI] Writer download progress: ${Math.round(100*n)}%`),e.downloadProgressCallback&&e.downloadProgressCallback(n)})}});return await Promise.race([t.write(f),new Promise((e,t)=>setTimeout(()=>t(new Error("Operation timed out")),3e4))])}catch(m){console.error("[AI] Writer API failed, falling back to Prompt API:",m)}const g=h?`${h}\n\n${f}`:f;return this.prompt(g)}static async rewriteWithContext(t,n,r,a){this.ensureUserActivation();const o=await this.checkAvailability();if("unavailable"===o.rewriterAPI&&"unavailable"===o.promptAPI)return wd.rewrite(t,a);const i=n.substring(Math.max(0,r-500),r),l=n.substring(r+t.length,Math.min(n.length,r+t.length+500)),s=new Date;let c=`Current date: ${s.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})} at ${s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`;if((i.trim()||l.trim())&&(c+="\n\nSurrounding context for style matching:",i.trim()&&(c+=`\nBefore: "${i.trim().slice(-200)}"`),l.trim()&&(c+=`\nAfter: "${l.trim().slice(0,200)}"`),c+="\n\nEnsure the rewritten text flows naturally with the surrounding context."),a.pinnedNotes?.length&&(c+=`\n\nAudience and tone guidance:\n${a.pinnedNotes.join("\n\n")}`),console.log("[AI] RewriteWithContext - customPrompt:",a.customPrompt),console.log("[AI] RewriteWithContext - rewriterAPI availability:",o.rewriterAPI),console.log("[AI] RewriteWithContext - writerAPI availability:",o.writerAPI),console.log("[AI] RewriteWithContext - promptAPI availability:",o.promptAPI),!a.customPrompt&&"available"===o.rewriterAPI)try{console.log("[AI] RewriteWithContext - Using Rewriter API (preset tone)");const n=await self.Rewriter.create({tone:a.tone||"as-is",format:"plain-text",length:"as-is",sharedContext:c,outputLanguage:"en",monitor(t){t.addEventListener("downloadprogress",t=>{const n=t.loaded||0;console.log(`[AI] Rewriter download progress: ${Math.round(100*n)}%`),e.downloadProgressCallback&&e.downloadProgressCallback(n)})}});return await Promise.race([n.rewrite(t),new Promise((e,t)=>setTimeout(()=>t(new Error("Operation timed out")),3e4))])}catch(u){console.error("[AI] Rewriter API failed, trying Writer API:",u)}if(a.customPrompt&&"available"===o.writerAPI)try{console.log("[AI] RewriteWithContext - Using Writer API for custom prompt");const e=`You are a text editor. Your ONLY job is to make a small edit to existing text.\n\nORIGINAL TEXT (do NOT change anything except what the instruction asks):\n${t}\n\nEDIT INSTRUCTION:\n${a.customPrompt}\n\nCRITICAL: Output ONLY the edited version of the ORIGINAL TEXT above. Do NOT write a new email or letter. Do NOT add greetings, signatures, or extra sentences. Just make the requested edit to the original text.`,n=await self.Writer.create({tone:"neutral",format:"plain-text",length:"medium",sharedContext:c,outputLanguage:"en"}),r=await Promise.race([n.write(e),new Promise((e,t)=>setTimeout(()=>t(new Error("Operation timed out")),3e4))]);return console.log("[AI] RewriteWithContext - Writer API returned:",r),r}catch(u){console.error("[AI] Writer API failed, trying Prompt API:",u)}if("available"===o.promptAPI){console.log("[AI] RewriteWithContext - Using Prompt API as fallback");const e=a.customPrompt||"Rewrite this text to improve clarity and flow",n=`Task: Edit the following text according to the instruction.\n\nText: "${t}"\n\nInstruction: ${e}\n\nRules:\n1. Start with the exact text shown in quotes above\n2. Make ONLY the change requested in the instruction\n3. Output the result with NO explanations, NO quotes, NO extra text\n\nOutput:`;console.log("[AI] RewriteWithContext fallback - Original text:",t),console.log("[AI] RewriteWithContext fallback - Instruction:",e);const r=await this.prompt(n);return console.log("[AI] RewriteWithContext fallback - AI returned:",r),r}throw new Error("AI features not available. Please enable Chrome AI.")}static async generateTitle(e){this.ensureUserActivation();const t=await this.checkAvailability();if("unavailable"===t.summarizerAPI&&"unavailable"===t.promptAPI){return e.split(" ").slice(0,6).join(" ").slice(0,50)}try{const n=new Date,r=`Current date: ${n.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})} at ${n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`;if("available"===t.summarizerAPI){const t=await self.Summarizer.create({type:"headline",format:"plain-text",length:"short",sharedContext:`${r}\n\nCreate an extremely brief title using ONLY 4-5 words maximum. Be concise and descriptive.`,outputLanguage:"en"}),n=await Promise.race([t.summarize(e),new Promise((e,t)=>setTimeout(()=>t(new Error("Operation timed out")),1e4))]);return n.trim().replace(/^(Title:|Document:|Here's the title:)\s*/i,"").replace(/^["']|["']$/g,"").replace(/\.$/,"").trim().slice(0,50)||"Untitled"}const a=`${r}\n\nCreate a brief title using ONLY 4-5 words maximum for a document based on this request:\n\n"${e}"\n\nOutput ONLY the title text. Use 4-5 words maximum. Be extremely concise.`;let o=(await this.prompt(a)).trim().replace(/^(Title:|Document:|Here's the title:)\s*/i,"").replace(/^["']|["']$/g,"").replace(/\.$/,"").trim();return o.length>50&&(o=o.slice(0,47)+"..."),o||"Untitled"}catch(n){console.error("[AI] Title generation failed:",n);return e.split(" ").slice(0,6).join(" ").slice(0,50)||"Untitled"}}static async proofread(e){this.ensureUserActivation();if("unavailable"===(await this.checkAvailability()).promptAPI)throw new Error("Prompt API not available. Please enable Chrome AI features.");try{const t=`You are a spell checker and grammar corrector. Fix all spelling and grammar errors in the following text.\n\nCRITICAL RULES:\n- Output ONLY the corrected text\n- Do NOT add explanations, comments, or meta-text\n- Do NOT say things like "Here's the corrected text:" or "I fixed..."\n- Keep the same formatting and structure\n- Only fix spelling and grammar errors\n- Do NOT change the meaning or rewrite the content\n\nText to correct:\n${e}`;let n=(await this.prompt(t)).trim();n=n.replace(/^(Here's the corrected text:|Corrected text:|Here is the corrected version:)\s*/i,"").replace(/^["']|["']$/g,"").trim();return{corrected:n,corrections:n!==e?[{type:"correction"}]:[]}}catch(t){throw console.error("[AI] Prompt API proofreading failed:",t),new Error("Proofreading failed: "+(t instanceof Error?t.message:"Unknown error"))}}};t(vd,"availabilityCache",null),t(vd,"cacheTimestamp",0),t(vd,"CACHE_DURATION",6e4),t(vd,"downloadProgressCallback",null);let bd=vd;class wd{static summarize(e,t){const n=e.split(/[.!?]+/).filter(e=>e.trim().length>0);if("brief"===t.mode)return n[0]?.trim()+"."||e.slice(0,100)+"...";const r="simple"===t.readingLevel?2:3,a=n.slice(0,r).join(". ")+".";return"bullets"===t.mode?n.slice(0,r).map(e=>`• ${e.trim()}`).join("\n"):a}static rewrite(e,t){return console.warn("[AI] Using mock provider - AI features require Chrome 128+ with Gemini Nano enabled"),"formal"===t.preset?e.replace(/\b(gonna|wanna|gotta)\b/gi,e=>({gonna:"going to",wanna:"want to",gotta:"have to"}[e.toLowerCase()]||e)):"concise"===t.preset?e.replace(/\b(very|really|quite|rather)\s+/gi,"").replace(/\s+/g," ").trim():"friendly"===t.preset?e+" 😊":`[Mock rewrite] ${e}`}static generate(e,t){if(e.toLowerCase().includes("continue writing")||e.toLowerCase().includes("extend this content"))return"What should we write about? Try adding a prompt to get started!\n\n(Note: This is a mock response. Enable Chrome's built-in AI for real generation.)";const n=e.toLowerCase();let r="";return r=n.includes("song")||n.includes("lyrics")?"Verse 1:\nUnder the stars we dance tonight\nHearts beating in the pale moonlight\n\nChorus:\nThis is our moment, this is our time\nTogether we shine, together we climb":n.includes("story")||n.includes("tale")?"Once upon a time, in a land far away, there lived a curious traveler who sought adventure beyond the horizon. Each day brought new discoveries and unexpected friendships.":n.includes("poem")||n.includes("verse")?"Whispers of wind through autumn trees,\nGolden leaves dance in the breeze,\nNature's beauty, wild and free,\nA moment of peace for you and me.":n.includes("email")||n.includes("letter")?"Dear [Recipient],\n\nI hope this message finds you well. I wanted to reach out regarding our recent conversation and share some thoughts on the next steps.\n\nBest regards":n.includes("list")||n.includes("ideas")?"1. Start with a clear goal\n2. Break it into smaller steps\n3. Set realistic timelines\n4. Track your progress\n5. Celebrate small wins":`Here's a response to your request: "${e.slice(0,40)}${e.length>40?"...":""}"\n\nThis is a simple demonstration. With Chrome's built-in AI enabled, you would receive more detailed and contextually relevant content.`,"short"===t.length&&t.lengthHint?(r=r.slice(0,Math.min(r.length,t.lengthHint)),r.length<t.lengthHint&&(r+=" This is a short response tailored to your length preference.",r=r.slice(0,t.lengthHint))):"long"===t.length&&(r+="\n\nThis extended section provides additional detail and context. With longer content, you can explore topics more thoroughly and include supporting information that adds depth to the response."),r}}function kd({children:e}){const[t,n]=D.useState(rd),r=D.useCallback(e=>{n(t=>({...t,activeTab:e}))},[]),a=D.useCallback(e=>{n(t=>({...t,isProcessing:e}))},[]),o=D.useCallback(e=>{n(t=>({...t,isHistoryPanelOpen:e}))},[]),i=D.useCallback(()=>{n(e=>({...e,isHistoryPanelOpen:!e.isHistoryPanelOpen}))},[]),l=D.useCallback(e=>{n(t=>({...t,settings:e}))},[]),s=D.useCallback(async e=>{n(t=>({...t,settings:{...t.settings,...e}}));try{await md.updateSettings(e)}catch(t){console.error("[AppProvider] Failed to update settings:",t),n(e=>({...e,error:t instanceof Error?t.message:"Failed to save settings"}))}},[]),c=D.useCallback(e=>{n(t=>({...t,pinnedNotes:e}))},[]),u=D.useCallback(async e=>{n(t=>({...t,pinnedNotes:[e,...t.pinnedNotes]}));try{await md.savePinnedNote(e)}catch(t){console.error("[AppProvider] Failed to add pinned note:",t),n(n=>({...n,pinnedNotes:n.pinnedNotes.filter(t=>t.id!==e.id),error:t instanceof Error?t.message:"Failed to save pinned note"}))}},[]),d=D.useCallback(async(e,t)=>{let r;n(n=>(r=n.pinnedNotes.find(t=>t.id===e),{...n,pinnedNotes:n.pinnedNotes.map(n=>n.id===e?{...n,...t,updatedAt:Date.now()}:n)}));try{const e=r?{...r,...t}:void 0;e&&await md.savePinnedNote(e)}catch(a){console.error("[AppProvider] Failed to update pinned note:",a),r&&n(t=>({...t,pinnedNotes:t.pinnedNotes.map(t=>t.id===e?r:t),error:a instanceof Error?a.message:"Failed to update pinned note"}))}},[]),p=D.useCallback(async e=>{let t;n(n=>(t=n.pinnedNotes.find(t=>t.id===e),{...n,pinnedNotes:n.pinnedNotes.filter(t=>t.id!==e)}));try{await md.deletePinnedNote(e)}catch(r){console.error("[AppProvider] Failed to delete pinned note:",r),t&&n(e=>({...e,pinnedNotes:[t,...e.pinnedNotes],error:r instanceof Error?r.message:"Failed to delete pinned note"}))}},[]),f=D.useCallback(e=>{n(t=>({...t,currentText:e}))},[]),h=D.useCallback(e=>{n(t=>({...t,currentResult:e}))},[]),g=D.useCallback(e=>{n(t=>({...t,aiAvailability:e}))},[]),m=D.useCallback(async()=>{try{const e=await bd.checkAvailability();g(e)}catch(e){console.error("[AppProvider] Failed to check AI availability:",e),g({promptAPI:"unavailable",summarizerAPI:"unavailable",rewriterAPI:"unavailable",writerAPI:"unavailable"})}},[g]),x=D.useCallback(e=>{n(t=>({...t,error:e}))},[]),y={setActiveTab:r,setIsProcessing:a,setIsHistoryPanelOpen:o,toggleHistoryPanel:i,setSettings:l,updateSettings:s,setPinnedNotes:c,addPinnedNote:u,updatePinnedNote:d,deletePinnedNote:p,setCurrentText:f,setCurrentResult:h,setAIAvailability:g,checkAIAvailability:m,setError:x};return D.useEffect(()=>{(async()=>{try{console.log("[AppProvider] Loading initial data from storage...");const e=await md.getSettings();console.log("[AppProvider] Loaded settings:",e),l(e),"light"===e.theme?document.documentElement.classList.add("light"):document.documentElement.classList.remove("light");const t=await md.getPinnedNotes();console.log("[AppProvider] Loaded pinned notes:",t.length),c(t),await m(),console.log("[AppProvider] Initial data loaded successfully")}catch(e){console.error("[AppProvider] Failed to load initial data:",e),x("Failed to load application data")}})()},[l,c,m,x]),D.useEffect(()=>md.onSettingsChange(e=>{l(e)}),[l]),Q.jsx(ad.Provider,{value:{state:t,actions:y},children:e})}function Cd({availability:e}){const t=function(e){return"unavailable"===e.promptAPI||"unavailable"===e.summarizerAPI||"unavailable"===e.rewriterAPI}(e),n=function(e){return"after-download"===e.promptAPI||"after-download"===e.summarizerAPI||"after-download"===e.rewriterAPI}(e),r="unavailable"===e.promptAPI&&"available"===e.summarizerAPI&&"available"===e.rewriterAPI;return t||n?r?null:Q.jsxs("div",{role:"alert","aria-live":"polite",style:{padding:"12px 16px",margin:"16px",borderRadius:"12px",backgroundColor:t?"rgba(251, 146, 60, 0.1)":"rgba(59, 130, 246, 0.1)",border:t?"1px solid rgba(251, 146, 60, 0.3)":"1px solid rgba(59, 130, 246, 0.3)",color:"var(--text)",fontSize:"13px",lineHeight:"1.5"},children:[Q.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[Q.jsx("div",{style:{flexShrink:0,width:"20px",height:"20px",marginTop:"2px"},children:t?Q.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:Q.jsx("path",{d:"M10 6V10M10 14H10.01M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z",stroke:"#fb923c",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):Q.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:Q.jsx("path",{d:"M10 11V15M10 7H10.01M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),Q.jsx("div",{style:{flex:1},children:t?Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{style:{fontWeight:600,marginBottom:"4px",color:"#fb923c"},children:"AI Features Unavailable"}),Q.jsx("div",{style:{marginBottom:"8px"},children:"AI features require Chrome 128 or later with Gemini Nano enabled. The extension will use a mock provider to demonstrate functionality with example outputs."}),Q.jsx("a",{href:"https://developer.chrome.com/docs/ai/built-in",target:"_blank",rel:"noopener noreferrer",style:{color:"#fb923c",textDecoration:"underline",fontWeight:500},children:"View setup instructions →"})]}):Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{style:{fontWeight:600,marginBottom:"4px",color:"#3b82f6"},children:"AI Model Download Required"}),Q.jsx("div",{style:{marginBottom:"8px"},children:"Some AI features require downloading the Gemini Nano model. The download will start automatically when you use AI features. This may take a few minutes."}),Q.jsx("a",{href:"https://developer.chrome.com/docs/ai/built-in",target:"_blank",rel:"noopener noreferrer",style:{color:"#3b82f6",textDecoration:"underline",fontWeight:500},children:"Learn more →"})]})})]}),t&&Q.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",fontSize:"12px",color:"var(--muted)"},children:[Q.jsx("div",{style:{fontWeight:600,marginBottom:"6px"},children:"API Status:"}),Q.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[Q.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[Q.jsx("span",{children:"Prompt API:"}),Q.jsx("span",{style:{color:"available"===e.promptAPI?"#10b981":"after-download"===e.promptAPI?"#3b82f6":"#fb923c"},children:"available"===e.promptAPI?"✓ Available":"after-download"===e.promptAPI?"↓ Download Required":"✗ Unavailable"})]}),Q.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[Q.jsx("span",{children:"Summarizer API:"}),Q.jsx("span",{style:{color:"available"===e.summarizerAPI?"#10b981":"after-download"===e.summarizerAPI?"#3b82f6":"#fb923c"},children:"available"===e.summarizerAPI?"✓ Available":"after-download"===e.summarizerAPI?"↓ Download Required":"✗ Unavailable"})]}),Q.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[Q.jsx("span",{children:"Rewriter API:"}),Q.jsx("span",{style:{color:"available"===e.rewriterAPI?"#10b981":"after-download"===e.rewriterAPI?"#3b82f6":"#fb923c"},children:"available"===e.rewriterAPI?"✓ Available":"after-download"===e.rewriterAPI?"↓ Download Required":"✗ Unavailable"})]})]})]})]}):null}function Sd({settings:e,pinnedNotes:t,activePinnedNoteIds:n,onSettingsChange:r,onPinnedNotesChange:a,onActivePinnedNoteIdsChange:o}){const{state:i}=od(),l=i.aiAvailability,[s,c]=D.useState(null),[u,d]=D.useState([]),[p,f]=D.useState(null),[h,g]=D.useState(null),[m,x]=D.useState(""),[y,v]=D.useState(""),[b,w]=D.useState({dataManagement:!0,appearance:!1,voiceRecognition:!1,shortcuts:!1,generatePanel:!1,privacy:!1,pinnedNotes:!1}),k=e=>{w(t=>({...t,[e]:!t[e]}))},[C,S]=D.useState(null),[j,E]=D.useState({}),[P,T]=D.useState(""),[I,N]=D.useState(""),[L,A]=D.useState(""),[R,z]=D.useState("");D.useEffect(()=>{(async()=>{try{const e=await chrome.storage.local.get("settings");if(e.settings)c(e.settings);else{c({language:"en-US",theme:"dark",localOnlyMode:!1,accentHue:255})}const t=await md.getPinnedNotes();d(t);const n=await md.getGenerateSettings();S(n),T(n.shortLength.toString()),N(n.mediumLength.toString()),A((5*n.shortLength).toString()),z((5*n.mediumLength).toString())}catch(e){console.error("[Settings] Failed to load data:",e)}})()},[]);const M=e||s;if(D.useEffect(()=>{e&&c(e)},[e]),D.useEffect(()=>{t&&d(t)},[t]),!M)return Q.jsxs("div",{className:"flint-section flex flex-col h-full overflow-y-auto",children:[Q.jsx("h2",{className:"flint-section-header",children:"Settings"}),Q.jsx("div",{style:{padding:"24px",textAlign:"center",color:"var(--text-muted)"},children:"Loading settings..."})]});const O=async(e,t)=>{const n={...M,[e]:t};c(n);try{await chrome.storage.local.set({settings:n}),r&&r(n)}catch(a){console.error("[Settings] Failed to save settings:",a)}},_=e=>isNaN(e)||e<5?5:e>2e3?2e3:e,F=async e=>{if(!C)return;const t={...C,...e};S(t);try{await md.saveGenerateSettings(t)}catch(n){console.error("[Settings] Failed to save generate settings:",n)}},U=()=>{f(null),g(null),x(""),v("")};return Q.jsxs("div",{className:"flint-section flex flex-col h-full overflow-y-auto",children:[Q.jsx(Cd,{availability:l}),Q.jsxs("section",{style:{marginBottom:"24px",paddingBottom:"24px",borderBottom:"1px solid var(--border-muted)"},children:[Q.jsxs("button",{onClick:()=>k("appearance"),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",background:"none",border:"none",padding:0,marginBottom:b.appearance?"16px":"0",cursor:"pointer",color:"var(--text)"},"aria-expanded":b.appearance,"aria-controls":"appearance-content",children:[Q.jsx("h3",{style:{fontSize:"var(--fs-sm)",fontWeight:600,color:"var(--text)",margin:0,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Theme"}),Q.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",style:{transform:b.appearance?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:Q.jsx("polyline",{points:"9 18 15 12 9 6"})})]}),b.appearance&&Q.jsxs("div",{id:"appearance-content",children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[Q.jsxs("div",{style:{flex:1},children:[Q.jsx("label",{htmlFor:"light-mode-toggle",style:{display:"block",fontSize:"var(--fs-sm)",color:"var(--text)",fontWeight:500,marginBottom:"4px"},children:"Light mode"}),Q.jsx("p",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)",margin:0},children:"Switch between dark and light themes"})]}),Q.jsxs("label",{className:"flint-toggle",style:{position:"relative",display:"inline-block",width:"48px",height:"28px",flexShrink:0,marginLeft:"16px"},children:[Q.jsx("input",{id:"light-mode-toggle",type:"checkbox",checked:"light"===M.theme,onChange:e=>{const t=e.target.checked?"light":"dark";O("theme",t),"light"===t?document.documentElement.classList.add("light"):document.documentElement.classList.remove("light")},"aria-label":"Toggle light mode",style:{opacity:0,width:0,height:0}}),Q.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:"light"===M.theme?"var(--primary)":"var(--surface-2)",transition:"0.2s",borderRadius:"28px",border:"1px solid var(--border)"},children:Q.jsx("span",{style:{position:"absolute",content:'""',height:"20px",width:"20px",left:"light"===M.theme?"24px":"4px",bottom:"3px",background:"white",transition:"0.2s",borderRadius:"50%"}})})]})]}),Q.jsxs("div",{style:{marginBottom:"0"},children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"4px"},children:[Q.jsx("label",{htmlFor:"accent-hue",style:{display:"block",fontSize:"var(--fs-sm)",color:"var(--text)",fontWeight:500},children:"Accent color"}),Q.jsx("button",{className:"flint-btn ghost",onClick:()=>{O("accentHue",255),document.documentElement.style.setProperty("--accent-hue","255")},style:{height:"28px",padding:"0 12px",fontSize:"var(--fs-xs)"},children:"Reset to Default"})]}),Q.jsx("p",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)",marginBottom:"12px"},children:"Adjust the hue to customize your accent color"}),Q.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[Q.jsx("input",{id:"accent-hue",type:"range",min:"0",max:"360",value:M.accentHue,onChange:e=>{const t=parseInt(e.target.value);O("accentHue",t),document.documentElement.style.setProperty("--accent-hue",t.toString())},"aria-label":"Select accent hue",style:{flex:1,height:"8px",borderRadius:"4px",background:"linear-gradient(to right, oklch(60% 0.12 0), oklch(60% 0.12 30), oklch(60% 0.12 60), oklch(60% 0.12 90), oklch(60% 0.12 120), oklch(60% 0.12 150), oklch(60% 0.12 180), oklch(60% 0.12 210), oklch(60% 0.12 240), oklch(60% 0.12 270), oklch(60% 0.12 300), oklch(60% 0.12 330), oklch(60% 0.12 360))",cursor:"pointer",appearance:"none",WebkitAppearance:"none"}}),Q.jsx("div",{role:"img",style:{width:"48px",height:"48px",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",background:`oklch(60% 0.12 ${M.accentHue})`,flexShrink:0},"aria-label":"Current accent color preview"})]})]})]})]}),C&&Q.jsxs("section",{style:{marginBottom:"24px",paddingBottom:"24px",borderBottom:"1px solid var(--border-muted)"},children:[Q.jsxs("button",{onClick:()=>k("generatePanel"),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",background:"none",border:"none",padding:0,marginBottom:b.generatePanel?"16px":"0",cursor:"pointer",color:"var(--text)"},"aria-expanded":b.generatePanel,"aria-controls":"generate-panel-content",children:[Q.jsx("h3",{style:{fontSize:"var(--fs-sm)",fontWeight:600,color:"var(--text)",margin:0,textTransform:"uppercase",letterSpacing:"0.05em"},children:"AI Settings"}),Q.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",style:{transform:b.generatePanel?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:Q.jsx("polyline",{points:"9 18 15 12 9 6"})})]}),b.generatePanel&&Q.jsxs("div",{id:"generate-panel-content",children:[Q.jsxs("div",{style:{marginBottom:"16px"},children:[Q.jsx("label",{style:{display:"block",fontSize:"var(--fs-sm)",color:"var(--text-muted)",marginBottom:"8px",fontWeight:500},children:"Short length"}),Q.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"flex-start"},children:[Q.jsxs("div",{style:{flex:1},children:[Q.jsx("input",{id:"short-length",type:"number",className:"flint-input",min:"5",max:"2000",value:P,onChange:e=>(e=>{T(e),E(e=>({...e,short:""}));const t=parseInt(e);isNaN(t)||(F({shortLength:t}),A((5*t).toString()))})(e.target.value),onBlur:e=>(e=>{const t=parseInt(e),n=_(t);T(n.toString()),A((5*n).toString()),E(e=>({...e,short:""})),F({shortLength:n})})(e.target.value),placeholder:"Words","aria-label":"Short length in words","aria-invalid":!!j.short,style:{width:"100%",borderColor:j.short?"#ef4444":void 0}}),Q.jsx("p",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)",marginTop:"4px",marginBottom:0},children:"words"})]}),Q.jsxs("div",{style:{flex:1},children:[Q.jsx("input",{id:"short-chars",type:"number",className:"flint-input",min:"25",max:"10000",value:L,onChange:e=>(e=>{A(e),E(e=>({...e,short:""}));const t=parseInt(e);if(!isNaN(t)){const e=Math.round(t/5);T(e.toString()),F({shortLength:e})}})(e.target.value),onBlur:e=>(e=>{const t=parseInt(e),n=Math.max(25,Math.min(1e4,t)),r=Math.round(n/5),a=_(r);T(a.toString()),A((5*a).toString()),E(e=>({...e,short:""})),F({shortLength:a})})(e.target.value),placeholder:"Characters","aria-label":"Short length in characters",style:{width:"100%"}}),Q.jsx("p",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)",marginTop:"4px",marginBottom:0},children:"chars"})]})]}),j.short&&Q.jsx("p",{id:"error-short-length",style:{fontSize:"var(--fs-xs)",color:"#ef4444",marginTop:"4px",marginBottom:0},children:j.short})]}),Q.jsxs("div",{style:{marginBottom:"16px"},children:[Q.jsx("label",{style:{display:"block",fontSize:"var(--fs-sm)",color:"var(--text-muted)",marginBottom:"8px",fontWeight:500},children:"Medium length"}),Q.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"flex-start"},children:[Q.jsxs("div",{style:{flex:1},children:[Q.jsx("input",{id:"medium-length",type:"number",className:"flint-input",min:"5",max:"2000",value:I,onChange:e=>(e=>{N(e),E(e=>({...e,medium:""}));const t=parseInt(e);isNaN(t)||(F({mediumLength:t}),z((5*t).toString()))})(e.target.value),onBlur:e=>(e=>{const t=parseInt(e),n=_(t);N(n.toString()),z((5*n).toString()),E(e=>({...e,medium:""})),F({mediumLength:n})})(e.target.value),placeholder:"Words","aria-label":"Medium length in words","aria-invalid":!!j.medium,style:{width:"100%",borderColor:j.medium?"#ef4444":void 0}}),Q.jsx("p",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)",marginTop:"4px",marginBottom:0},children:"words"})]}),Q.jsxs("div",{style:{flex:1},children:[Q.jsx("input",{id:"medium-chars",type:"number",className:"flint-input",min:"25",max:"10000",value:R,onChange:e=>(e=>{z(e),E(e=>({...e,medium:""}));const t=parseInt(e);if(!isNaN(t)){const e=Math.round(t/5);N(e.toString()),F({mediumLength:e})}})(e.target.value),onBlur:e=>(e=>{const t=parseInt(e),n=Math.max(25,Math.min(1e4,t)),r=Math.round(n/5),a=_(r);N(a.toString()),z((5*a).toString()),E(e=>({...e,medium:""})),F({mediumLength:a})})(e.target.value),placeholder:"Characters","aria-label":"Medium length in characters",style:{width:"100%"}}),Q.jsx("p",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)",marginTop:"4px",marginBottom:0},children:"chars"})]})]}),j.medium&&Q.jsx("p",{id:"error-medium-length",style:{fontSize:"var(--fs-xs)",color:"#ef4444",marginTop:"4px",marginBottom:0},children:j.medium})]}),Q.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Q.jsxs("div",{style:{flex:1},children:[Q.jsx("label",{htmlFor:"context-awareness-toggle",style:{display:"block",fontSize:"var(--fs-sm)",color:"var(--text)",fontWeight:500,marginBottom:"4px"},children:"Context aware"}),Q.jsx("p",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)",margin:0},children:"When enabled, the AI will reference your last prompt to understand follow-up requests"})]}),Q.jsxs("label",{className:"flint-toggle",style:{position:"relative",display:"inline-block",width:"48px",height:"28px",flexShrink:0,marginLeft:"16px"},children:[Q.jsx("input",{id:"context-awareness-toggle",type:"checkbox",checked:C.contextAwarenessEnabled,onChange:e=>F({contextAwarenessEnabled:e.target.checked}),"aria-label":"Toggle context awareness",style:{opacity:0,width:0,height:0}}),Q.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:C.contextAwarenessEnabled?"var(--primary)":"var(--surface-2)",transition:"0.2s",borderRadius:"28px",border:"1px solid var(--border)"},children:Q.jsx("span",{style:{position:"absolute",content:'""',height:"20px",width:"20px",left:C.contextAwarenessEnabled?"24px":"4px",bottom:"3px",background:"white",transition:"0.2s",borderRadius:"50%"}})})]})]})]})]}),Q.jsxs("section",{style:{marginBottom:"24px",paddingBottom:"24px",borderBottom:"1px solid var(--border-muted)"},children:[Q.jsxs("button",{onClick:()=>k("voiceRecognition"),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",background:"none",border:"none",padding:0,marginBottom:b.voiceRecognition?"16px":"0",cursor:"pointer",color:"var(--text)"},"aria-expanded":b.voiceRecognition,"aria-controls":"voice-recognition-content",children:[Q.jsx("h3",{style:{fontSize:"var(--fs-sm)",fontWeight:600,color:"var(--text)",margin:0,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Transcribe"}),Q.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",style:{transform:b.voiceRecognition?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:Q.jsx("polyline",{points:"9 18 15 12 9 6"})})]}),b.voiceRecognition&&Q.jsxs("div",{id:"voice-recognition-content",children:[Q.jsxs("div",{style:{marginBottom:"16px"},children:[Q.jsx("label",{htmlFor:"language-select",style:{display:"block",fontSize:"var(--fs-sm)",color:"var(--text-muted)",marginBottom:"8px",fontWeight:500},children:"Language"}),Q.jsxs("select",{id:"language-select",className:"flint-input",value:M.language,onChange:e=>O("language",e.target.value),"aria-label":"Select speech recognition language",style:{width:"100%",height:"48px",padding:"12px 40px 12px 16px",cursor:"pointer",appearance:"none",backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%23888' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 16px center",backgroundSize:"12px"},children:[Q.jsx("option",{value:"en-US",children:"English (US)"}),Q.jsx("option",{value:"en-GB",children:"English (UK)"}),Q.jsx("option",{value:"es-ES",children:"Spanish (Spain)"}),Q.jsx("option",{value:"es-MX",children:"Spanish (Mexico)"}),Q.jsx("option",{value:"fr-FR",children:"French"}),Q.jsx("option",{value:"de-DE",children:"German"}),Q.jsx("option",{value:"it-IT",children:"Italian"}),Q.jsx("option",{value:"pt-BR",children:"Portuguese (Brazil)"}),Q.jsx("option",{value:"ja-JP",children:"Japanese"}),Q.jsx("option",{value:"ko-KR",children:"Korean"}),Q.jsx("option",{value:"zh-CN",children:"Chinese (Simplified)"}),Q.jsx("option",{value:"zh-TW",children:"Chinese (Traditional)"})]})]}),Q.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Q.jsxs("div",{style:{flex:1},children:[Q.jsx("label",{htmlFor:"local-only-toggle",style:{display:"block",fontSize:"var(--fs-sm)",color:"var(--text)",fontWeight:500,marginBottom:"4px"},children:"Local-only mode"}),Q.jsx("p",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)",margin:0},children:"Disable network-dependent features"})]}),Q.jsxs("label",{className:"flint-toggle",style:{position:"relative",display:"inline-block",width:"48px",height:"28px",flexShrink:0,marginLeft:"16px"},children:[Q.jsx("input",{id:"local-only-toggle",type:"checkbox",checked:M.localOnlyMode,onChange:e=>O("localOnlyMode",e.target.checked),"aria-label":"Toggle local-only mode",style:{opacity:0,width:0,height:0}}),Q.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:M.localOnlyMode?"var(--primary)":"var(--surface-2)",transition:"0.2s",borderRadius:"28px",border:"1px solid var(--border)"},children:Q.jsx("span",{style:{position:"absolute",content:'""',height:"20px",width:"20px",left:M.localOnlyMode?"24px":"4px",bottom:"3px",background:"white",transition:"0.2s",borderRadius:"50%"}})})]})]})]})]}),Q.jsxs("section",{style:{marginBottom:"24px",paddingBottom:"24px",borderBottom:"1px solid var(--border-muted)"},children:[Q.jsxs("button",{onClick:()=>k("shortcuts"),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",background:"none",border:"none",padding:0,marginBottom:b.shortcuts?"16px":"0",cursor:"pointer",color:"var(--text)"},"aria-expanded":b.shortcuts,"aria-controls":"shortcuts-content",children:[Q.jsx("h3",{style:{fontSize:"var(--fs-sm)",fontWeight:600,color:"var(--text)",textTransform:"uppercase",letterSpacing:"0.05em",margin:0},children:"Undo/Redo"}),Q.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",style:{transform:b.shortcuts?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:Q.jsx("polyline",{points:"9 18 15 12 9 6"})})]}),b.shortcuts&&Q.jsxs("div",{id:"shortcuts-content",children:[Q.jsxs("div",{style:{marginBottom:"24px"},children:[Q.jsx("label",{htmlFor:"undo-history-limit",style:{display:"block",fontSize:"var(--fs-base)",fontWeight:500,color:"var(--text)",marginBottom:"8px"},children:"Undo History Limit"}),Q.jsx("p",{style:{fontSize:"var(--fs-sm)",color:"var(--text-muted)",margin:"0 0 12px 0"},children:"Maximum number of undo steps to keep (5-200). Higher values use more memory."}),Q.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[Q.jsx("input",{id:"undo-history-limit",type:"number",min:"5",max:"200",value:M.undoHistoryLimit||10,onChange:e=>{const t=parseInt(e.target.value);!isNaN(t)&&t>=5&&t<=200&&O("undoHistoryLimit",t)},onBlur:e=>{const t=parseInt(e.target.value);isNaN(t)||t<5?O("undoHistoryLimit",5):t>200&&O("undoHistoryLimit",200)},style:{width:"100px",padding:"8px 12px",fontSize:"var(--fs-base)",color:"var(--text)",background:"var(--surface-2)",border:"1px solid var(--border)",borderRadius:"var(--radius-sm)",outline:"none"}}),Q.jsx("button",{className:"flint-btn ghost",onClick:()=>{O("undoHistoryLimit",10)},style:{padding:"8px 16px",fontSize:"var(--fs-sm)"},children:"Reset to 10"})]})]}),Q.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[Q.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Q.jsx("span",{style:{fontSize:"var(--fs-sm)",color:"var(--text-muted)"},children:"Undo"}),Q.jsx("code",{style:{padding:"4px 12px",background:"var(--surface)",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-muted)",fontSize:"var(--fs-sm)",fontFamily:"monospace",color:"var(--text)"},children:navigator.platform.includes("Mac")?"⌘Z":"Ctrl+Z"})]}),Q.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Q.jsx("span",{style:{fontSize:"var(--fs-sm)",color:"var(--text-muted)"},children:"Redo"}),Q.jsx("code",{style:{padding:"4px 12px",background:"var(--surface)",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-muted)",fontSize:"var(--fs-sm)",fontFamily:"monospace",color:"var(--text)"},children:navigator.platform.includes("Mac")?"⌘⇧Z":"Ctrl+Y"})]})]})]})]}),Q.jsx("section",{className:"privacy-notice-section",style:{marginBottom:"24px",paddingBottom:"24px",borderBottom:"1px solid var(--border-muted)",background:"var(--warning-bg)",border:"1px solid var(--warning-border)",borderRadius:"var(--radius-md)",padding:"16px"},children:Q.jsxs("button",{onClick:()=>k("privacy"),style:{width:"100%",display:"flex",alignItems:"flex-start",gap:"12px",background:"none",border:"none",padding:0,cursor:"pointer",color:"var(--text)",textAlign:"left"},"aria-expanded":b.privacy,"aria-controls":"privacy-content",children:[Q.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"var(--warning-text)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",style:{flexShrink:0,marginTop:"2px"},children:[Q.jsx("circle",{cx:"12",cy:"12",r:"10"}),Q.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),Q.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Q.jsxs("div",{style:{flex:1},children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Q.jsx("h3",{style:{fontSize:"var(--fs-sm)",fontWeight:600,color:"var(--warning-text)",margin:0},children:"Privacy Notice"}),Q.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"var(--warning-text)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",style:{transform:b.privacy?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease",marginLeft:"8px"},children:Q.jsx("polyline",{points:"9 18 15 12 9 6"})})]}),b.privacy&&Q.jsx("p",{id:"privacy-content",style:{fontSize:"var(--fs-sm)",color:"var(--text-muted)",margin:"8px 0 0 0",lineHeight:"1.5"},children:"Speech recognition uses the Web Speech API, which may send audio to a network-based service for transcription. All AI text processing (summarization and rewriting) happens locally on your device using Chrome's built-in AI."})]})]})}),Q.jsxs("section",{style:{marginBottom:"24px"},children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[Q.jsx("h3",{style:{fontSize:"var(--fs-sm)",fontWeight:600,color:"var(--text)",textTransform:"uppercase",letterSpacing:"0.05em",margin:0},children:"Pinned Notes"}),Q.jsxs("button",{className:"flint-btn ghost",onClick:()=>{x(""),v(""),g(null),f("add")},"aria-label":"Add pinned note",style:{height:"32px",padding:"0 12px",fontSize:"var(--fs-xs)"},children:[Q.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),Q.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Note"]})]}),0===u.length?Q.jsxs("div",{style:{padding:"24px",textAlign:"center",color:"var(--text-muted)",fontSize:"var(--fs-sm)"},children:[Q.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",style:{margin:"0 auto 12px",opacity:.5},children:[Q.jsx("path",{d:"M12 17V3"}),Q.jsx("path",{d:"m6 11 6 6 6-6"}),Q.jsx("path",{d:"M19 21H5"})]}),Q.jsx("p",{style:{margin:0},children:"No pinned notes yet. Add notes to provide context for AI operations."})]}):Q.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:u.map(e=>Q.jsxs("div",{style:{padding:"12px",borderRadius:"var(--radius-md)",background:"var(--surface-2)",border:"1px solid var(--stroke)"},children:[Q.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[Q.jsx("h4",{style:{fontSize:"var(--fs-sm)",fontWeight:600,color:"var(--text)",margin:0,flex:1},children:e.title}),Q.jsxs("div",{style:{display:"flex",gap:"4px"},children:[Q.jsx("button",{className:"flint-btn ghost",onClick:()=>(e=>{x(e.title),v(e.content),g(e),f("edit")})(e),"aria-label":`Edit ${e.title}`,style:{height:"24px",width:"24px",padding:0,minWidth:"auto"},children:Q.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),Q.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),Q.jsx("button",{className:"flint-btn ghost",onClick:()=>(e=>{g(e),f("delete")})(e),"aria-label":`Delete ${e.title}`,style:{height:"24px",width:"24px",padding:0,minWidth:"auto",color:"#ef4444"},children:Q.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("polyline",{points:"3 6 5 6 21 6"}),Q.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]}),Q.jsx("p",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)",margin:0,lineHeight:"1.5",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.content})]},e.id))})]}),("add"===p||"edit"===p)&&Q.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"stretch",justifyContent:"center",zIndex:1e3,padding:"0"},onClick:U,role:"dialog","aria-modal":"true","aria-labelledby":"dialog-title",children:Q.jsxs("div",{style:{width:"100%",maxWidth:"600px",height:"100vh",background:"var(--bg)",display:"flex",flexDirection:"column",overflow:"hidden"},onClick:e=>e.stopPropagation(),children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 24px",borderBottom:"1px solid var(--stroke)",flexShrink:0},children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[Q.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",borderRadius:"10px",background:"var(--surface)",color:"var(--primary)"},children:Q.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("path",{d:"M12 20h9"}),Q.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]})}),Q.jsx("h3",{id:"dialog-title",style:{fontSize:"var(--fs-lg)",fontWeight:600,color:"var(--text)",margin:0},children:"add"===p?"Add Pinned Note":"Edit Pinned Note"})]}),Q.jsx("button",{onClick:U,"aria-label":"Close dialog",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",borderRadius:"8px",background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="var(--surface)",e.currentTarget.style.color="var(--text)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="var(--text-muted)"},children:Q.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Q.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"24px",overflow:"hidden"},children:[Q.jsxs("div",{style:{marginBottom:"16px"},children:[Q.jsx("label",{htmlFor:"note-title",style:{display:"block",fontSize:"var(--fs-sm)",color:"var(--text-muted)",marginBottom:"8px",fontWeight:500},children:"Title"}),Q.jsx("input",{id:"note-title",type:"text",className:"flint-input",value:m,onChange:e=>x(e.target.value),placeholder:"Enter note title",autoFocus:!0,style:{width:"100%",background:"transparent",border:"none"}})]}),Q.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:[Q.jsx("label",{htmlFor:"note-content",style:{display:"block",fontSize:"var(--fs-sm)",color:"var(--text-muted)",marginBottom:"8px",fontWeight:500},children:"Content"}),Q.jsx("textarea",{id:"note-content",className:"flint-input",value:y,onChange:e=>v(e.target.value),placeholder:"Enter note content (e.g., audience, tone, style guidelines)",style:{width:"100%",flex:1,resize:"none",padding:"12px 16px",background:"transparent",border:"none",overflowY:"auto"}})]}),Q.jsx("p",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)",marginTop:"16px",marginBottom:0,textAlign:"center"},children:"This note will be merged into AI prompts for summarization and rewriting."})]}),Q.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end",padding:"16px 24px",borderTop:"1px solid var(--stroke)",flexShrink:0},children:[Q.jsx("button",{className:"flint-btn ghost",onClick:U,style:{height:"40px",padding:"0 20px"},children:"Cancel"}),Q.jsx("button",{className:"flint-btn primary",onClick:async()=>{if(m.trim()&&y.trim())try{const e=await md.savePinnedNote({id:h?.id,title:m.trim(),content:y.trim()});if(h?d(t=>t.map(t=>t.id===e.id?e:t)):(d(t=>[e,...t]),o&&n&&o([...n,e.id])),a){const t=h?u.map(t=>t.id===e.id?e:t):[e,...u];a(t)}f(null),g(null),x(""),v("")}catch(e){console.error("[Settings] Failed to save pinned note:",e)}},disabled:!m.trim()||!y.trim(),style:{height:"40px",padding:"0 20px",opacity:m.trim()&&y.trim()?1:.5,cursor:m.trim()&&y.trim()?"pointer":"not-allowed"},children:"add"===p?"Add Note":"Save Changes"})]})]})}),"delete"===p&&h&&Q.jsx("div",{style:{position:"fixed",top:0,left:0,right:"72px",bottom:0,background:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"stretch",justifyContent:"flex-end",zIndex:1e3,padding:"0"},onClick:U,role:"dialog","aria-modal":"true","aria-labelledby":"delete-dialog-title",children:Q.jsxs("div",{style:{width:"100%",maxWidth:"500px",height:"100vh",background:"var(--bg)",display:"flex",flexDirection:"column",overflow:"hidden",borderLeft:"1px solid var(--border)"},onClick:e=>e.stopPropagation(),children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 24px",borderBottom:"1px solid var(--stroke)",flexShrink:0},children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[Q.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",borderRadius:"10px",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444"},children:Q.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("circle",{cx:"12",cy:"12",r:"10"}),Q.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),Q.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})}),Q.jsx("h3",{id:"delete-dialog-title",style:{fontSize:"var(--fs-lg)",fontWeight:600,color:"var(--text)",margin:0},children:"Delete Pinned Note?"})]}),Q.jsx("button",{onClick:U,"aria-label":"Close dialog",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",borderRadius:"8px",background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="var(--surface)",e.currentTarget.style.color="var(--text)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="var(--text-muted)"},children:Q.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Q.jsx("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:Q.jsxs("p",{style:{fontSize:"var(--fs-base)",color:"var(--text-muted)",margin:0,lineHeight:"1.6"},children:["Are you sure you want to delete"," ",Q.jsxs("strong",{style:{color:"var(--text)"},children:['"',h.title,'"']}),"? This action cannot be undone."]})}),Q.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end",padding:"16px 24px",borderTop:"1px solid var(--stroke)",flexShrink:0},children:[Q.jsx("button",{className:"flint-btn ghost",onClick:U,style:{height:"40px",padding:"0 20px"},children:"Cancel"}),Q.jsx("button",{className:"flint-btn",onClick:async()=>{if(h)try{if(await md.deletePinnedNote(h.id),d(e=>e.filter(e=>e.id!==h.id)),a){const e=u.filter(e=>e.id!==h.id);a(e)}f(null),g(null)}catch(e){console.error("[Settings] Failed to delete pinned note:",e)}},style:{height:"40px",padding:"0 20px",background:"#ef4444",color:"white"},children:"Delete"})]})]})})]})}function jd(){return Q.jsxs("div",{className:"flint-section",children:[Q.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[Q.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 1024 1024",fill:"currentColor",style:{margin:"0 auto 16px"},children:[Q.jsx("path",{opacity:"1.000000",stroke:"none",d:"M420.622864,818.744873 C428.345612,783.067200 435.904907,747.784851 443.722443,712.559753 C457.631531,649.886902 471.518066,587.208008 485.755219,524.609314 C496.564301,477.083374 507.992371,429.698547 518.979004,382.212555 C528.725586,340.086487 538.240540,297.906830 547.866150,255.752747 C549.113342,250.290665 551.605164,245.840851 555.936646,241.855347 C574.570923,224.709412 592.621887,206.928955 611.278320,189.807877 C630.290222,172.360550 649.703430,155.356903 669.346741,138.604477 C695.704468,116.125778 722.385864,94.050461 749.320007,72.275101 C760.455872,63.272099 771.748291,54.462837 782.961609,45.555523 C784.262451,44.522205 785.445251,43.267097 787.843994,43.777775 C787.969421,49.512825 785.894592,54.984104 784.848389,60.531807 C778.468384,94.364838 771.796265,128.143204 765.129822,161.921707 C759.107239,192.437515 752.974426,222.931610 746.873718,253.432007 C745.471802,260.440582 743.828369,267.406403 742.644470,274.450409 C742.123596,277.549713 740.653748,279.499603 738.179382,281.216705 C713.281616,298.494598 688.385559,315.775665 663.583557,333.190521 C644.100159,346.870880 624.997131,361.076294 606.090820,375.544189 C605.336365,376.121460 604.669434,376.812988 604.246643,378.084534 C644.717346,364.050842 684.856934,349.237244 725.482117,336.379272 C726.775085,337.699402 726.278198,338.825409 725.958252,339.934570 C707.872070,402.613556 690.081482,465.378021 669.911865,527.439636 C667.551086,534.703430 663.973938,539.762207 657.619324,543.917419 C624.170410,565.789185 590.702026,587.648010 558.444336,611.275391 C552.435486,615.676636 546.349304,620.015198 541.151794,625.811523 C573.529175,619.647827 605.142212,610.373413 636.958862,602.680542 C638.036438,605.240540 636.881042,606.374939 636.164062,607.654480 C628.428528,621.459106 620.692688,635.263550 612.983032,649.082581 C608.744812,656.679138 602.201172,662.171936 595.701904,667.591309 C569.363281,689.553650 542.641602,711.052612 516.951721,733.794373 C502.980286,746.162476 488.956299,758.451843 475.467285,771.358826 C470.681152,775.938354 467.703735,780.861145 466.370239,787.407043 C462.819458,804.837646 459.346771,822.279053 456.323730,839.807922 C456.024658,841.542236 455.326355,843.366333 456.471558,845.751099 C471.621338,845.751099 487.020996,845.751099 502.420654,845.751099 C502.715973,846.241638 503.011322,846.732239 503.306671,847.222778 C466.405457,885.100037 427.760773,921.263184 391.449524,959.917664 C399.997375,912.493164 410.282928,865.828796 420.622864,818.744873 z"}),Q.jsx("path",{opacity:"1.000000",stroke:"none",d:"M360.556580,712.334473 C353.704987,693.505859 347.009369,675.034363 340.227905,656.594482 C338.023773,650.601074 339.874298,644.786133 340.694366,638.925415 C344.288696,613.237366 347.967499,587.561035 351.549805,561.871277 C356.257202,528.113220 360.943390,494.351990 365.552338,460.580383 C367.102570,449.221252 368.447357,437.832855 369.758606,426.443176 C370.130920,423.209167 371.924438,420.997498 374.013458,418.771912 C409.950134,380.486237 447.854858,344.147797 484.750183,306.811005 C492.245728,299.225769 499.828186,291.726440 507.368530,284.185455 C508.293152,283.260742 509.115173,282.179474 511.932678,281.951569 C473.140350,454.009125 435.222595,625.750610 394.821869,797.228088 C391.837891,797.195435 391.627777,794.569824 390.823456,792.598083 C380.068542,766.233643 370.476166,739.430115 360.556580,712.334473 z"})]}),Q.jsx("h1",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"8px"},children:"Welcome to Flint"}),Q.jsx("p",{className:"text-text-muted",children:"Local-first AI assistant for Chrome"})]}),Q.jsxs("div",{style:{marginBottom:"32px"},children:[Q.jsx("h2",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"16px"},children:"What is Flint?"}),Q.jsx("p",{style:{lineHeight:"1.6",marginBottom:"16px"},children:"Flint is a privacy-focused Chrome extension that brings AI-powered text tools directly to your browser. All processing happens locally using Chrome's built-in AI APIs—no data leaves your device."})]}),Q.jsxs("div",{style:{marginBottom:"32px"},children:[Q.jsx("h2",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"16px"},children:"Features"}),Q.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[Q.jsxs("div",{children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[Q.jsx("svg",{width:"16",height:"16",viewBox:"0 0 56 56",fill:"currentColor",children:Q.jsx("path",{d:"M 26.6875 12.6602 C 26.9687 12.6602 27.1094 12.4961 27.1797 12.2383 C 27.9062 8.3242 27.8594 8.2305 31.9375 7.4570 C 32.2187 7.4102 32.3828 7.2461 32.3828 6.9648 C 32.3828 6.6836 32.2187 6.5195 31.9375 6.4726 C 27.8828 5.6524 28.0000 5.5586 27.1797 1.6914 C 27.1094 1.4336 26.9687 1.2695 26.6875 1.2695 C 26.4062 1.2695 26.2656 1.4336 26.1953 1.6914 C 25.3750 5.5586 25.5156 5.6524 21.4375 6.4726 C 21.1797 6.5195 20.9922 6.6836 20.9922 6.9648 C 20.9922 7.2461 21.1797 7.4102 21.4375 7.4570 C 25.5156 8.2774 25.4687 8.3242 26.1953 12.2383 C 26.2656 12.4961 26.4062 12.6602 26.6875 12.6602 Z M 15.3438 28.7852 C 15.7891 28.7852 16.0938 28.5039 16.1406 28.0821 C 16.9844 21.8242 17.1953 21.8242 23.6641 20.5821 C 24.0860 20.5117 24.3906 20.2305 24.3906 19.7852 C 24.3906 19.3633 24.0860 19.0586 23.6641 18.9883 C 17.1953 18.0977 16.9609 17.8867 16.1406 11.5117 C 16.0938 11.0899 15.7891 10.7852 15.3438 10.7852 C 14.9219 10.7852 14.6172 11.0899 14.5703 11.5352 C 13.7969 17.8164 13.4687 17.7930 7.0469 18.9883 C 6.6250 19.0821 6.3203 19.3633 6.3203 19.7852 C 6.3203 20.2539 6.6250 20.5117 7.1406 20.5821 C 13.5156 21.6133 13.7969 21.7774 14.5703 28.0352 C 14.6172 28.5039 14.9219 28.7852 15.3438 28.7852 Z M 31.2344 54.7305 C 31.8438 54.7305 32.2891 54.2852 32.4062 53.6524 C 34.0703 40.8086 35.8750 38.8633 48.5781 37.4570 C 49.2344 37.3867 49.6797 36.8945 49.6797 36.2852 C 49.6797 35.6758 49.2344 35.2070 48.5781 35.1133 C 35.8750 33.7070 34.0703 31.7617 32.4062 18.9180 C 32.2891 18.2852 31.8438 17.8633 31.2344 17.8633 C 30.6250 17.8633 30.1797 18.2852 30.0860 18.9180 C 28.4219 31.7617 26.5938 33.7070 13.9140 35.1133 C 13.2344 35.2070 12.7891 35.6758 12.7891 36.2852 C 12.7891 36.8945 13.2344 37.3867 13.9140 37.4570 C 26.5703 39.1211 28.3281 40.8321 30.0860 53.6524 C 30.1797 54.2852 30.6250 54.7305 31.2344 54.7305 Z"})}),Q.jsx("strong",{children:"Generate Text"})]}),Q.jsx("p",{className:"text-text-muted",style:{fontSize:"14px",paddingLeft:"24px"},children:"Generate text from prompts using AI"})]}),Q.jsxs("div",{children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),Q.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),Q.jsx("strong",{children:"Rewrite Text"})]}),Q.jsx("p",{className:"text-text-muted",style:{fontSize:"14px",paddingLeft:"24px"},children:"Adjust tone, make text concise, or expand with custom prompts"})]}),Q.jsxs("div",{children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),Q.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),Q.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),Q.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),Q.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),Q.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Q.jsx("strong",{children:"Summarize"})]}),Q.jsx("p",{className:"text-text-muted",style:{fontSize:"14px",paddingLeft:"24px"},children:"Create bullet points, paragraphs, or outlines from long text"})]})]})]}),Q.jsxs("div",{style:{padding:"16px",background:"var(--surface)",borderRadius:"var(--radius-md)",border:"1px solid var(--border-muted)"},children:[Q.jsx("h3",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"🔒 Privacy First"}),Q.jsx("p",{className:"text-text-muted",style:{fontSize:"14px",lineHeight:"1.5"},children:"All AI processing happens locally on your device using Chrome's built-in Gemini Nano model. Your data never leaves your browser."})]}),Q.jsx("div",{style:{marginTop:"32px",textAlign:"center"},children:Q.jsx("p",{className:"text-text-muted",style:{fontSize:"12px"},children:"Get started by selecting a tool from the sidebar"})})]})}function Ed(e){const t={width:18,height:18,fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};switch(e){case"mic":return Q.jsxs("svg",{...t,viewBox:"0 0 24 24",children:[Q.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),Q.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2M12 19v4M8 23h8"})]});case"edit":return Q.jsxs("svg",{...t,viewBox:"0 0 24 24",children:[Q.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),Q.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]});case"list":return Q.jsxs("svg",{...t,viewBox:"0 0 24 24",children:[Q.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),Q.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),Q.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),Q.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),Q.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),Q.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]});case"clock":return Q.jsxs("svg",{...t,viewBox:"0 0 24 24",children:[Q.jsx("circle",{cx:"12",cy:"12",r:"10"}),Q.jsx("polyline",{points:"12 6 12 12 16 14"})]});case"settings":return Q.jsxs("svg",{...t,viewBox:"0 0 24 24",children:[Q.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),Q.jsx("circle",{cx:"12",cy:"12",r:"3"})]});case"sparkles":return Q.jsx("svg",{...t,viewBox:"0 0 56 56",fill:"currentColor",children:Q.jsx("path",{d:"M 26.6875 12.6602 C 26.9687 12.6602 27.1094 12.4961 27.1797 12.2383 C 27.9062 8.3242 27.8594 8.2305 31.9375 7.4570 C 32.2187 7.4102 32.3828 7.2461 32.3828 6.9648 C 32.3828 6.6836 32.2187 6.5195 31.9375 6.4726 C 27.8828 5.6524 28.0000 5.5586 27.1797 1.6914 C 27.1094 1.4336 26.9687 1.2695 26.6875 1.2695 C 26.4062 1.2695 26.2656 1.4336 26.1953 1.6914 C 25.3750 5.5586 25.5156 5.6524 21.4375 6.4726 C 21.1797 6.5195 20.9922 6.6836 20.9922 6.9648 C 20.9922 7.2461 21.1797 7.4102 21.4375 7.4570 C 25.5156 8.2774 25.4687 8.3242 26.1953 12.2383 C 26.2656 12.4961 26.4062 12.6602 26.6875 12.6602 Z M 15.3438 28.7852 C 15.7891 28.7852 16.0938 28.5039 16.1406 28.0821 C 16.9844 21.8242 17.1953 21.8242 23.6641 20.5821 C 24.0860 20.5117 24.3906 20.2305 24.3906 19.7852 C 24.3906 19.3633 24.0860 19.0586 23.6641 18.9883 C 17.1953 18.0977 16.9609 17.8867 16.1406 11.5117 C 16.0938 11.0899 15.7891 10.7852 15.3438 10.7852 C 14.9219 10.7852 14.6172 11.0899 14.5703 11.5352 C 13.7969 17.8164 13.4687 17.7930 7.0469 18.9883 C 6.6250 19.0821 6.3203 19.3633 6.3203 19.7852 C 6.3203 20.2539 6.6250 20.5117 7.1406 20.5821 C 13.5156 21.6133 13.7969 21.7774 14.5703 28.0352 C 14.6172 28.5039 14.9219 28.7852 15.3438 28.7852 Z M 31.2344 54.7305 C 31.8438 54.7305 32.2891 54.2852 32.4062 53.6524 C 34.0703 40.8086 35.8750 38.8633 48.5781 37.4570 C 49.2344 37.3867 49.6797 36.8945 49.6797 36.2852 C 49.6797 35.6758 49.2344 35.2070 48.5781 35.1133 C 35.8750 33.7070 34.0703 31.7617 32.4062 18.9180 C 32.2891 18.2852 31.8438 17.8633 31.2344 17.8633 C 30.6250 17.8633 30.1797 18.2852 30.0860 18.9180 C 28.4219 31.7617 26.5938 33.7070 13.9140 35.1133 C 13.2344 35.2070 12.7891 35.6758 12.7891 36.2852 C 12.7891 36.8945 13.2344 37.3867 13.9140 37.4570 C 26.5703 39.1211 28.3281 40.8321 30.0860 53.6524 C 30.1797 54.2852 30.6250 54.7305 31.2344 54.7305 Z"})});case"folder":return Q.jsx("svg",{...t,viewBox:"0 0 24 24",children:Q.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})});default:return null}}function Pd({items:e,activeItemId:t,onNavigate:n}){const r=e=>{e!==t&&n(e)};return Q.jsx("div",{className:"flint-sidebar",children:Q.jsxs("div",{className:"sidebar-content",children:[Q.jsx("button",{className:"sidebar-logo-btn "+("home"===t?"active":""),onClick:()=>r("home"),"aria-label":"Home",title:"Home",children:Q.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 1024 1024",fill:"currentColor",children:[Q.jsx("path",{opacity:"1.000000",stroke:"none",d:"M420.622864,818.744873 C428.345612,783.067200 435.904907,747.784851 443.722443,712.559753 C457.631531,649.886902 471.518066,587.208008 485.755219,524.609314 C496.564301,477.083374 507.992371,429.698547 518.979004,382.212555 C528.725586,340.086487 538.240540,297.906830 547.866150,255.752747 C549.113342,250.290665 551.605164,245.840851 555.936646,241.855347 C574.570923,224.709412 592.621887,206.928955 611.278320,189.807877 C630.290222,172.360550 649.703430,155.356903 669.346741,138.604477 C695.704468,116.125778 722.385864,94.050461 749.320007,72.275101 C760.455872,63.272099 771.748291,54.462837 782.961609,45.555523 C784.262451,44.522205 785.445251,43.267097 787.843994,43.777775 C787.969421,49.512825 785.894592,54.984104 784.848389,60.531807 C778.468384,94.364838 771.796265,128.143204 765.129822,161.921707 C759.107239,192.437515 752.974426,222.931610 746.873718,253.432007 C745.471802,260.440582 743.828369,267.406403 742.644470,274.450409 C742.123596,277.549713 740.653748,279.499603 738.179382,281.216705 C713.281616,298.494598 688.385559,315.775665 663.583557,333.190521 C644.100159,346.870880 624.997131,361.076294 606.090820,375.544189 C605.336365,376.121460 604.669434,376.812988 604.246643,378.084534 C644.717346,364.050842 684.856934,349.237244 725.482117,336.379272 C726.775085,337.699402 726.278198,338.825409 725.958252,339.934570 C707.872070,402.613556 690.081482,465.378021 669.911865,527.439636 C667.551086,534.703430 663.973938,539.762207 657.619324,543.917419 C624.170410,565.789185 590.702026,587.648010 558.444336,611.275391 C552.435486,615.676636 546.349304,620.015198 541.151794,625.811523 C573.529175,619.647827 605.142212,610.373413 636.958862,602.680542 C638.036438,605.240540 636.881042,606.374939 636.164062,607.654480 C628.428528,621.459106 620.692688,635.263550 612.983032,649.082581 C608.744812,656.679138 602.201172,662.171936 595.701904,667.591309 C569.363281,689.553650 542.641602,711.052612 516.951721,733.794373 C502.980286,746.162476 488.956299,758.451843 475.467285,771.358826 C470.681152,775.938354 467.703735,780.861145 466.370239,787.407043 C462.819458,804.837646 459.346771,822.279053 456.323730,839.807922 C456.024658,841.542236 455.326355,843.366333 456.471558,845.751099 C471.621338,845.751099 487.020996,845.751099 502.420654,845.751099 C502.715973,846.241638 503.011322,846.732239 503.306671,847.222778 C466.405457,885.100037 427.760773,921.263184 391.449524,959.917664 C399.997375,912.493164 410.282928,865.828796 420.622864,818.744873 z"}),Q.jsx("path",{opacity:"1.000000",stroke:"none",d:"M360.556580,712.334473 C353.704987,693.505859 347.009369,675.034363 340.227905,656.594482 C338.023773,650.601074 339.874298,644.786133 340.694366,638.925415 C344.288696,613.237366 347.967499,587.561035 351.549805,561.871277 C356.257202,528.113220 360.943390,494.351990 365.552338,460.580383 C367.102570,449.221252 368.447357,437.832855 369.758606,426.443176 C370.130920,423.209167 371.924438,420.997498 374.013458,418.771912 C409.950134,380.486237 447.854858,344.147797 484.750183,306.811005 C492.245728,299.225769 499.828186,291.726440 507.368530,284.185455 C508.293152,283.260742 509.115173,282.179474 511.932678,281.951569 C473.140350,454.009125 435.222595,625.750610 394.821869,797.228088 C391.837891,797.195435 391.627777,794.569824 390.823456,792.598083 C380.068542,766.233643 370.476166,739.430115 360.556580,712.334473 z"})]})}),Q.jsx("nav",{className:"sidebar-nav","aria-label":"Main navigation",children:e.map(e=>Q.jsx("button",{className:"flint-btn "+(t===e.id?"active":""),onClick:()=>r(e.id),"aria-label":e.label,"aria-current":t===e.id?"page":void 0,title:e.label,children:Q.jsx("span",{className:"icon","aria-hidden":"true",children:Ed(e.icon)})},e.id))})]})})}class Td extends D.Component{constructor(e){super(e),t(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})}),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("[ErrorBoundary] Caught error:",e),console.error("[ErrorBoundary] Error info:",t),console.error("[ErrorBoundary] Component stack:",t.componentStack),this.setState({errorInfo:t}),this.props.onError&&this.props.onError(e,t)}renderDefaultFallback(){const{error:e,errorInfo:t}=this.state;return Q.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",padding:"32px",textAlign:"center"},role:"alert","aria-live":"assertive",children:[Q.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(239, 68, 68, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"24px"},children:Q.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("circle",{cx:"12",cy:"12",r:"10"}),Q.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),Q.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),Q.jsx("h2",{style:{fontSize:"var(--fs-xl)",fontWeight:600,color:"var(--text)",marginBottom:"12px"},children:"Something went wrong"}),Q.jsx("p",{style:{fontSize:"var(--fs-md)",color:"var(--text-muted)",marginBottom:"24px",maxWidth:"400px"},children:e?.message||"An unexpected error occurred. Please try again."}),Q.jsxs("button",{className:"flint-btn primary",onClick:this.handleRetry,"aria-label":"Retry",style:{marginBottom:"16px"},children:[Q.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:Q.jsx("path",{d:"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"})}),"Try Again"]}),t&&Q.jsxs("details",{style:{marginTop:"16px",padding:"16px",borderRadius:"var(--radius-md)",background:"var(--surface-2)",border:"1px solid var(--stroke)",maxWidth:"600px",width:"100%",textAlign:"left"},children:[Q.jsx("summary",{style:{fontSize:"var(--fs-sm)",color:"var(--text-muted)",cursor:"pointer",fontWeight:500,marginBottom:"8px"},children:"Error Details"}),Q.jsxs("pre",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)",whiteSpace:"pre-wrap",wordBreak:"break-word",margin:0,fontFamily:"monospace",lineHeight:"1.5"},children:[e?.stack,"\n\n",t.componentStack]})]})]})}render(){const{hasError:e,error:t,errorInfo:n}=this.state,{children:r,fallback:a}=this.props;return e&&t&&n?a?a(t,n,this.handleRetry):this.renderDefaultFallback():r}}function Id({show:e,direction:t="forward"}){return e?Q.jsx("div",{className:"cursor-indicator",style:{display:"inline-flex",alignItems:"center",gap:"2px",color:"var(--text-muted)",fontSize:"10px",userSelect:"none",opacity:.7},role:"status","aria-label":"Text will be generated "+("bidirectional"===t?"around cursor":"backward"===t?"before cursor":"after cursor"),children:"bidirectional"===t?Q.jsxs(Q.Fragment,{children:[Q.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"slide-left 1s ease-in-out infinite"},children:Q.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),Q.jsx("span",{style:{fontSize:"8px",opacity:.5},children:"|"}),Q.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"slide-right 1s ease-in-out infinite"},children:Q.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]}):"backward"===t?Q.jsxs(Q.Fragment,{children:[Q.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"slide-left 1s ease-in-out infinite"},children:Q.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),Q.jsx("span",{style:{fontSize:"8px",opacity:.5},children:"|"})]}):Q.jsxs(Q.Fragment,{children:[Q.jsx("span",{style:{fontSize:"8px",opacity:.5},children:"|"}),Q.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"slide-right 1s ease-in-out infinite"},children:Q.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]})}):null}if("undefined"!=typeof document){const e=document.createElement("style");e.textContent="\n    @keyframes slide-right {\n      0%, 100% {\n        transform: translateX(0);\n      }\n      50% {\n        transform: translateX(2px);\n      }\n    }\n    \n    @keyframes slide-left {\n      0%, 100% {\n        transform: translateX(0);\n      }\n      50% {\n        transform: translateX(-2px);\n      }\n    }\n  ",document.head.appendChild(e)}function Nd({show:e,textarea:t,selectionStart:n,selectionEnd:r,color:a="var(--accent)"}){const o=D.useRef(null),i=D.useRef(null),l=D.useRef("255");return D.useEffect(()=>{if(!e||!o.current||!t||n===r)return o.current&&(o.current.innerHTML=""),void(i.current=null);const a=()=>{if(!o.current||!t)return;const e=getComputedStyle(document.documentElement).getPropertyValue("--accent-hue").trim()||"255";l.current=e;const a=document.createElement("div");i.current=a;const c=window.getComputedStyle(t);["fontFamily","fontSize","fontWeight","fontStyle","fontVariant","lineHeight","letterSpacing","wordSpacing","textTransform","textIndent","textAlign","whiteSpace","wordWrap","wordBreak","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","border","borderWidth","boxSizing","width","height"].forEach(e=>{const t=c[e];t&&(a.style[e]=t)}),a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.width=`${t.clientWidth}px`,a.style.height=`${t.clientHeight}px`,a.style.overflow="auto",a.style.pointerEvents="none",a.style.zIndex="1",a.style.willChange="scroll-position",a.style.scrollbarWidth="none",a.style.msOverflowStyle="none",a.addEventListener("wheel",e=>e.stopPropagation(),{passive:!0}),a.addEventListener("touchmove",e=>e.stopPropagation(),{passive:!0});const u=document.createElement("div");u.style.minHeight="100%";const d=t.value.substring(0,n),p=t.value.substring(n,r),f=t.value.substring(r),h=document.createElement("span");h.textContent=d,h.style.color="transparent";const g=document.createElement("span");g.textContent=p,g.style.color="transparent";const m=`oklch(60% 0.12 ${l.current} / 0.9)`;g.style.background=`color-mix(in oklab, ${m} 15%, transparent)`,g.style.border=`1px solid ${m}`,g.style.borderRadius="6px",g.style.boxShadow=`0 0 0 1px color-mix(in oklab, ${m} 30%, transparent), 0 0 12px color-mix(in oklab, ${m} 40%, transparent)`,g.style.animation="selection-pulse 1.5s ease-in-out infinite";const x=document.createElement("span");x.textContent=f,x.style.color="transparent",u.appendChild(h),u.appendChild(g),u.appendChild(x),a.appendChild(u),o.current.innerHTML="",o.current.appendChild(a),s()},s=()=>{i.current&&t&&(i.current.scrollTop=t.scrollTop,i.current.scrollLeft=t.scrollLeft)},c=()=>{a()},u=()=>{a()};a(),t.addEventListener("scroll",s),t.addEventListener("input",u),window.addEventListener("resize",c);const d=new MutationObserver(()=>{a()});return d.observe(document.documentElement,{attributes:!0,attributeFilter:["class","style"]}),()=>{t.removeEventListener("scroll",s),t.removeEventListener("input",u),window.removeEventListener("resize",c),d.disconnect(),o.current&&(o.current.innerHTML="")}},[e,t,n,r,a]),Q.jsx("div",{ref:o,style:{position:"absolute",top:0,left:0,pointerEvents:"none",zIndex:1,width:"100%",height:"100%",overflow:"hidden"}})}if("undefined"!=typeof document&&!document.getElementById("selection-overlay-styles")){const e=document.createElement("style");e.id="selection-overlay-styles",e.textContent='\n    @keyframes selection-pulse {\n      0%, 100% {\n        opacity: 1;\n      }\n      50% {\n        opacity: 0.8;\n      }\n    }\n    \n    /* Hide scrollbar in mirror divs */\n    div[style*="overflow: scroll"]::-webkit-scrollbar {\n      display: none;\n    }\n  ',document.head.appendChild(e)}const Ld=D.forwardRef(function({content:e,onContentChange:t,activeTool:n,onSelectionChange:r,placeholder:a="Start typing or paste text here...",disabled:o=!1,readOnly:i=!1,undoHistoryLimit:l=10},s){const c=D.useRef(null),u=D.useRef({start:0,end:0}),[d,p]=D.useState(!1),[f,h]=D.useState({start:0,end:0}),g=D.useRef({start:0,end:0}),m=function(e=100){const t=D.useRef([]),n=D.useRef(-1);return{pushState:D.useCallback(r=>{t.current=t.current.slice(0,n.current+1),t.current.push(r),t.current.length>e?t.current.shift():n.current++,console.log("[UndoRedo] Pushed state. History size:",t.current.length,"Index:",n.current)},[e]),undo:D.useCallback(()=>{if(n.current<=0)return console.log("[UndoRedo] Cannot undo - at beginning of history"),null;n.current--;const e=t.current[n.current];return console.log("[UndoRedo] Undo to index:",n.current),e??null},[]),redo:D.useCallback(()=>{if(n.current>=t.current.length-1)return console.log("[UndoRedo] Cannot redo - at end of history"),null;n.current++;const e=t.current[n.current];return console.log("[UndoRedo] Redo to index:",n.current),e??null},[]),canUndo:D.useCallback(()=>n.current>0,[]),canRedo:D.useCallback(()=>n.current<t.current.length-1,[]),clear:D.useCallback(()=>{t.current=[],n.current=-1,console.log("[UndoRedo] History cleared")},[])}}(l||10),x=D.useRef(m);x.current=m;const y=D.useRef(!1),v=D.useRef(null),b=D.useRef(!1);D.useEffect(()=>{!b.current&&e&&(console.log("[UnifiedEditor] Initializing undo history with content:",e.substring(0,50)),x.current.pushState({content:e,selectionStart:0,selectionEnd:0}),b.current=!0)},[e]),D.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),D.useImperativeHandle(s,()=>({getTextarea:()=>c.current,showCursorIndicator:()=>{console.log("[UnifiedEditor] showCursorIndicator called (now automatic in generate tool)")},hideCursorIndicator:()=>{},showSelectionOverlay:()=>{p(!0)},hideSelectionOverlay:()=>{p(!1)},updateCapturedSelection:(e,t)=>{g.current={start:e,end:t},u.current={start:e,end:t},h({start:e,end:t}),p(!0)},getCapturedSelection:()=>g.current,undo:()=>{const e=x.current.undo();e&&c.current&&(y.current=!0,t(e.content),setTimeout(()=>{c.current&&(c.current.setSelectionRange(e.selectionStart,e.selectionEnd),c.current.focus()),y.current=!1},0))},redo:()=>{const e=x.current.redo();e&&c.current&&(y.current=!0,t(e.content),setTimeout(()=>{c.current&&(c.current.setSelectionRange(e.selectionStart,e.selectionEnd),c.current.focus()),y.current=!1},0))},canUndo:()=>x.current.canUndo(),canRedo:()=>x.current.canRedo(),pushToHistory:(e,t,n)=>{console.log("[UnifiedEditor] Manually pushing to history:",e.substring(0,50)),x.current.pushState({content:e,selectionStart:t,selectionEnd:n})},insertAtCursor:(n,a=!1,o=!1)=>{if(!c.current)return;console.log("[UnifiedEditor] insertAtCursor called with text:",n.substring(0,50)+"...","select:",a,"replace:",o);const i=c.current;let l,s;o&&g.current.start!==g.current.end?(l=g.current.start,s=g.current.end,console.log("[UnifiedEditor] Replacing selection:",l,"-",s)):(l=i.selectionStart,s=l);const d=e.substring(0,l),f=e.substring(s);console.log("[UnifiedEditor] Insert/replace position:",l,"-",s),console.log("[UnifiedEditor] Content length before:",e.length);const m=!o&&d.length>0&&!d.endsWith("\n")&&!d.endsWith(" ")?" ":"",y=m+n+(!o&&f.length>0&&!f.startsWith("\n")&&!f.startsWith(" ")?" ":""),v=d+y+f;console.log("[UnifiedEditor] New content length:",v.length),t(v);const b=l+m.length,w=b+n.length;setTimeout(()=>{if(i.focus(),a)i.setSelectionRange(b,w),g.current={start:b,end:w},u.current={start:b,end:w},h({start:b,end:w}),p(!0),r({start:b,end:w}),console.log("[UnifiedEditor] Text inserted and selected:",{start:b,end:w}),x.current.pushState({content:v,selectionStart:b,selectionEnd:w});else{const e=l+y.length;i.setSelectionRange(e,e),x.current.pushState({content:v,selectionStart:e,selectionEnd:e})}},0)}}));const w=()=>{if(!c.current)return;const t=c.current.selectionStart,n=c.current.selectionEnd;u.current={start:t,end:n},g.current={start:t,end:n};if(t!==n){const a=function(e,t,n){if(t===n)return{start:t,end:n};let r=t,a=n;for(;r>0;){const t=e[r-1];if(!t||/\s/.test(t))break;r--}for(;a<e.length;){const t=e[a];if(!t||/\s/.test(t))break;a++}for(;r<a;){const t=e[r];if(!t||!/\s/.test(t))break;r++}for(;a>r;){const t=e[a-1];if(!t||!/\s/.test(t))break;a--}return{start:r,end:a}}(e,t,n);u.current=a,g.current=a,h(a);const o=e.substring(a.start,a.end);p(!0),c.current&&c.current.setSelectionRange(a.start,a.end),console.log("[UnifiedEditor] ✓ Selection captured and expanded:",{original:{start:t,end:n},expanded:a,text:o.substring(0,50)}),r({start:a.start,end:a.end})}else h({start:t,end:n}),p(!1)},k=D.useMemo(()=>f.start!==f.end,[f.start,f.end]),C=D.useMemo(()=>{if(k){const t=e.substring(f.start,f.end);return""===t.trim()?0:t.trim().split(/\s+/).length}return""===e.trim()?0:e.trim().split(/\s+/).length},[e,k,f.start,f.end]),S=D.useMemo(()=>k?f.end-f.start:e.length,[e.length,k,f.start,f.end]),j=D.useMemo(()=>{const t=f.start,n=t>0?e[t-1]:"",r=t<e.length?e[t]:"";return 0===t&&e.length>0?"backward":t>=e.length||"\n"===r?"forward":"\n"===n||0===t?"backward":"bidirectional"},[e,f.start]);return Q.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,position:"relative"},children:[o&&Q.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.02)",zIndex:100,cursor:"not-allowed",pointerEvents:"all"},"aria-hidden":"true"}),Q.jsx(Nd,{show:d,textarea:c.current,selectionStart:f.start,selectionEnd:f.end}),Q.jsx("textarea",{ref:c,value:e,onChange:e=>{const n=e.target.value;t(n),y.current?console.log("[UnifiedEditor] Content changed during undo/redo, NOT pushing to history"):(v.current&&clearTimeout(v.current),console.log("[UnifiedEditor] Content changed, will push state in 300ms"),v.current=setTimeout(()=>{if(c.current){const e=c.current.value;console.log("[UnifiedEditor] Pushing state to history:",e.substring(0,50)),x.current.pushState({content:e,selectionStart:c.current.selectionStart,selectionEnd:c.current.selectionEnd})}},300))},onSelect:w,onKeyUp:w,onKeyDown:e=>{if(!e.metaKey&&!e.ctrlKey||"z"!==e.key||e.shiftKey){if((e.metaKey||e.ctrlKey)&&e.shiftKey&&"z"===e.key||e.ctrlKey&&"y"===e.key){e.preventDefault(),console.log("[UnifiedEditor] Redo triggered, canRedo:",x.current.canRedo());const n=x.current.redo();console.log("[UnifiedEditor] Redo returned state:",n?"YES":"NO"),n&&c.current?(y.current=!0,console.log("[UnifiedEditor] Restoring content:",n.content.substring(0,50)),t(n.content),setTimeout(()=>{c.current&&c.current.setSelectionRange(n.selectionStart,n.selectionEnd),y.current=!1},0)):console.log("[UnifiedEditor] Cannot redo - no next state")}}else{e.preventDefault(),console.log("[UnifiedEditor] Undo triggered, canUndo:",x.current.canUndo());const n=x.current.undo();console.log("[UnifiedEditor] Undo returned state:",n?"YES":"NO"),n&&c.current?(y.current=!0,console.log("[UnifiedEditor] Restoring content:",n.content.substring(0,50)),t(n.content),setTimeout(()=>{c.current&&c.current.setSelectionRange(n.selectionStart,n.selectionEnd),y.current=!1},0)):console.log("[UnifiedEditor] Cannot undo - no previous state")}},onClick:()=>{w()},onBlur:()=>{if(!c.current)return;const e=c.current.selectionStart,t=c.current.selectionEnd;u.current={start:e,end:t},g.current={start:e,end:t},h({start:e,end:t});e!==t&&r({start:e,end:t})},onMouseUp:w,placeholder:a,disabled:o,readOnly:i,spellCheck:!0,"aria-label":"Document editor",dir:"ltr",style:{width:"100%",flex:1,resize:"none",border:"none",background:"var(--bg)",paddingTop:"16px",paddingLeft:"12px",paddingRight:"10px",paddingBottom:"48px",fontSize:"var(--fs-md)",lineHeight:"1.6",color:"var(--text)",borderRadius:"0",cursor:i?"default":"text",fontFamily:"var(--font-sans)",direction:"ltr",textAlign:"left",outline:"none"}}),e.length>0&&Q.jsxs("div",{style:{position:"absolute",bottom:"16px",right:"32px",fontSize:"var(--fs-xs)",color:"var(--text-muted)",fontWeight:500,userSelect:"none",display:"flex",alignItems:"center",gap:"8px",pointerEvents:"none",background:"var(--bg)",padding:"4px 8px",borderRadius:"var(--radius-sm)",zIndex:10},children:["generate"===n&&!k&&Q.jsx(Id,{show:!0,direction:j}),Q.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"2px 8px",borderRadius:k?"12px":"0",border:k?"1px solid var(--primary)":"1px solid transparent",boxShadow:k?"0 0 8px color-mix(in srgb, var(--primary) 40%, transparent)":"none",transition:"all 0.2s ease"},"aria-label":k?`${C} ${1===C?"word":"words"}, ${S} ${1===S?"character":"characters"} selected`:`${C} ${1===C?"word":"words"}, ${S} ${1===S?"character":"characters"}`,children:[Q.jsxs("span",{children:[C,"w"]}),Q.jsx("span",{style:{opacity:.5},children:"·"}),Q.jsxs("span",{children:[S,"c"]})]})]})]})});function Ad(e){if(!e.trim())return"Untitled";const t=e.split("\n").filter(e=>e.trim().length>0),n=t.find(e=>/^subject:/i.test(e));if(n)return n.replace(/^subject:\s*/i,"").trim().slice(0,50);const r=t.find(e=>/^#{1,6}\s+/.test(e));if(r)return r.replace(/^#{1,6}\s+/,"").trim().slice(0,50);const a=t.find(e=>e.trim().length>3&&e.trim()===e.trim().toUpperCase());if(a)return a.trim().slice(0,50);const o=t.find(e=>e.trim().length>10&&!/^(dear|hi|hello|greetings)/i.test(e));if(o){const e=o.trim().replace(/[•\-*]\s*/,"").replace(/^\d+\.\s*/,"");return e.slice(0,50)+(e.length>50?"...":"")}return e.trim().slice(0,50)+(e.trim().length>50?"...":"")}function Rd({activeTool:e,pinnedNotes:t=[],content:n,projectTitle:r,selection:a,editorRef:o,generatePrompt:i="",rewritePrompt:l="",summarizePrompt:s="",onGeneratePromptChange:c,onRewritePromptChange:u,onSummarizePromptChange:d,onOperationStart:p,onOperationComplete:f,onOperationError:h}){const[g,m]=D.useState(i),[x,y]=D.useState(l),[v,b]=D.useState(s);D.useEffect(()=>{m(i)},[i]),D.useEffect(()=>{y(l)},[l]),D.useEffect(()=>{b(s)},[s]);const w=e=>{m(e),c?.(e)},k=e=>{y(e),u?.(e)},C=e=>{b(e),d?.(e)},[S,j]=D.useState("short"),[E,P]=D.useState(!1),[T,I]=D.useState(!1),[N,L]=D.useState([]),[A,R]=D.useState(null),[z,M]=D.useState(!1),[O,_]=D.useState(!1),[F,U]=D.useState("Simplify"),[B,W]=D.useState(!1),[$,H]=D.useState(!1),[V,Y]=D.useState("bullets"),[G,K]=D.useState("moderate"),[q,X]=D.useState("short"),[Z,J]=D.useState(!1),[ee,te]=D.useState(!1),[ne,re]=D.useState(!1),[ae,oe]=D.useState(!1),[ie,le]=D.useState(!1),se=D.useRef(null),ce=D.useRef(null),ue=D.useRef(null),de=D.useRef(null),pe=D.useRef(null),fe=D.useRef(null),he=D.useRef(null),ge=D.useRef(null),me=D.useRef(null),xe=D.useRef(null),ye=D.useRef(null),ve=D.useRef(null),be=["Simplify","Clarify","Concise","Expand","Friendly","Formal","Poetic","Persuasive"];D.useEffect(()=>{(async()=>{try{const e=await md.getPromptHistory(4);L(e);const t=await md.getGenerateSettings();R(t)}catch(e){console.error("[ToolControlsContainer] Failed to load data:",e)}})()},[]),D.useEffect(()=>{const e=e=>{const t=o?.current?.getTextarea();e.target===t?ve.current="editor":e.target!==se.current&&e.target!==ce.current&&e.target!==ue.current||(ve.current="prompt")};return document.addEventListener("focusin",e),()=>document.removeEventListener("focusin",e)},[o]),D.useEffect(()=>{const e=e=>{de.current&&!de.current.contains(e.target)&&P(!1),pe.current&&!pe.current.contains(e.target)&&I(!1),fe.current&&!fe.current.contains(e.target)&&W(!1),he.current&&!he.current.contains(e.target)&&J(!1),ge.current&&!ge.current.contains(e.target)&&te(!1),me.current&&!me.current.contains(e.target)&&re(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const we=()=>{ye.current&&(ye.current.abort(),ye.current=null),le(!1),h?.("Operation cancelled by user")},ke=async()=>{const e=o?.current?.getCapturedSelection(),a=function(e){const t=[];let n=0,r=0,a=0,o=0,i=0;const l=e.split("\n"),s=l.slice(0,10).join("\n").toLowerCase(),c=e.toLowerCase();/^(subject|to|from|cc|bcc):/im.test(e)&&(n+=3,t.push("email headers")),/@[\w.-]+\.\w+/.test(e)&&(n+=1,t.push("email addresses")),/^(dear|hi|hello|greetings)/im.test(s)&&(r+=2,t.push("salutation")),/(sincerely|regards|best|yours)/im.test(c)&&(r+=1,t.push("closing"));const u=(e.match(/^#{1,6}\s+.+$/gm)||[]).length;u>0&&(a+=u,t.push(`${u} markdown headings`));const d=l.filter(e=>e.trim().length>3&&e.trim()===e.trim().toUpperCase()).length;d>0&&(a+=.5*d,t.push(`${d} all-caps headings`));const p=(e.match(/^[\s]*[•\-*]\s+/gm)||[]).length,f=(e.match(/^[\s]*\d+\.\s+/gm)||[]).length;p>2&&(o+=.5*p,t.push(`${p} bullet points`)),f>2&&(o+=.5*f,t.push(`${f} numbered items`)),/```[\s\S]*```/.test(e)&&(i+=3,t.push("code blocks")),/^(function|const|let|var|class|import|export)/m.test(e)&&(i+=2,t.push("code keywords"));const h={email:n,letter:r,article:a,list:o,code:i},g=Math.max(...Object.values(h));return 0===g?{type:"general",confidence:1,indicators:["no specific patterns"]}:{type:Object.keys(h).find(e=>h[e]===g),confidence:Math.min(g/5,1),indicators:t}}(n),i=e?function(e,t){const n=e.split("\n");let r=0,a=0;for(let m=0;m<n.length;m++){const e=n[m].length+1;if(r+e>t){a=m;break}r+=e}const o=n[a]||"",i=n[a-1]||"",l=n[a+1]||"",s=/^subject:/i.test(o)||/^subject:/i.test(i)&&o.trim().length<100,c=/^#{1,6}\s+/.test(o)||o.trim().length>0&&o.trim()===o.trim().toUpperCase(),u=/^[\s]*[•\-*]\s+/.test(o)||/^[\s]*\d+\.\s+/.test(o),d=(e.substring(0,t).match(/```/g)||[]).length%2==1,p=/^(dear|hi|hello|greetings)/i.test(i),f=/(sincerely|regards|best|yours)/i.test(l);let h;for(let m=a-1;m>=0;m--){const e=n[m];if(/^#{1,6}\s+/.test(e)){h=e.replace(/^#{1,6}\s+/,"").trim();break}if(e.trim().length>0&&e.trim()===e.trim().toUpperCase()){h=e.trim();break}}let g="none";return/^[\s]*[•\-*]\s+/.test(o)?g="bullet":/^[\s]*\d+\.\s+/.test(o)&&(g="numbered"),{isInSubjectLine:s,isInHeading:c,isInList:u,isInCodeBlock:d,isAfterSalutation:p,isBeforeSignature:f,nearestHeading:h,listStyle:g,indentLevel:o.match(/^[\s]*/)?.[0].length||0}}(n,e.start):{isInSubjectLine:!1,isInHeading:!1,isInList:!1,isInCodeBlock:!1,isAfterSalutation:!1,isBeforeSignature:!1,indentLevel:0};console.log("[Generate] Document type:",a),console.log("[Generate] Cursor context:",i);const l=function(e,t){const n=[];return t.isInSubjectLine?(n.push("Generate a VERY SHORT subject line (5-10 words maximum)"),n.push("Be concise and specific"),n.push("Do NOT write a full email or paragraph"),n.join("\n- ")):t.isInHeading?(n.push("Generate a heading or title (one line only)"),n.push("Be concise and descriptive"),n.push("Do NOT write body text or paragraphs"),n.join("\n- ")):t.isInList?("bullet"===t.listStyle?(n.push("Continue the bullet point list"),n.push("Each item should be brief (one line)")):"numbered"===t.listStyle&&(n.push("Continue the numbered list"),n.push("Each item should be brief (one line)")),n.join("\n- ")):t.isInCodeBlock?(n.push("Generate code only (no explanations)"),n.push("Match the coding style and language"),n.join("\n- ")):("email"===e.type&&(t.isAfterSalutation&&n.push("Write the email body (2-3 paragraphs)"),t.isBeforeSignature&&(n.push("Write a closing paragraph"),n.push("Keep it brief and professional"))),"letter"===e.type&&(n.push("Match formal letter style"),n.push("Use appropriate tone and structure")),"article"===e.type&&(t.nearestHeading&&n.push(`Continue writing about: "${t.nearestHeading}"`),n.push("Write in article/blog style"),n.push("Use clear paragraphs")),n.length>0?n.join("\n- "):"")}(a,i);let s=g.trim();s||(s=n.trim()?"Continue writing and extend this content naturally":"Introduce Flint, a Chrome extension for AI-powered writing. Explain how it can help users generate, rewrite, and summarize text using Chrome's built-in AI. Keep it friendly and concise."),o?.current?.showCursorIndicator(),le(!0),p?.("generate");try{const o=A||{shortLength:100,mediumLength:300,contextAwarenessEnabled:!0},i=t.map(e=>`${e.title}: ${e.content}`);let c;"short"===S?c=o.shortLength:"medium"===S&&(c=o.mediumLength);const u=e&&e.start!==e.end,d=u?n.substring(e.start,e.end):"";let p;if(u&&/\b(change|modify|update|replace|edit|fix|correct|adjust|revise|alter)\b/i.test(s))console.log("[Generate] Detected modification request on selection, using rewrite logic"),p=await bd.rewriteWithContext(d,n,e.start,{customPrompt:s,pinnedNotes:i.length>0?i:void 0});else if(e&&o.contextAwarenessEnabled&&n.trim()){const t=e.start;console.log("[Generate] Using enhanced context engine"),p=await bd.generateWithEnhancedContext(s,n,t,{pinnedNotes:i.length>0?i:void 0,length:S,lengthHint:c,projectTitle:r&&"Untitled"!==r&&"My first project"!==r&&"My project"!==r?r:void 0,smartInstructions:l||void 0,documentType:a.type},{localWindow:1500,maxRelatedSections:3,enableRelevanceScoring:!0,enableDeduplication:!0})}else{let t;if(console.log("[Generate] Using basic generation (context disabled or empty document)"),e&&n.trim()){const r=e.start,a=1500,o=n.substring(Math.max(0,r-a),r),i=n.substring(r,Math.min(n.length,r+a));(o.trim()||i.trim())&&(t=`${o}\n${i}`)}p=await bd.generate(s,{pinnedNotes:i.length>0?i:void 0,length:S,lengthHint:c,context:t,projectTitle:r&&"Untitled"!==r&&"My first project"!==r&&"My project"!==r?r:void 0,smartInstructions:l||void 0,documentType:a.type})}if(g.trim()&&!O){await md.savePromptToHistory(g);const e=await md.getPromptHistory(4);L(e)}const h=g;w(""),_(!1),f?.(p,"generate",h)}catch(c){const e=c instanceof Error?c.message:"Generation failed";h?.(e)}finally{le(!1),o?.current?.hideCursorIndicator()}},Ce=async()=>{const e=o?.current?.getCapturedSelection();if(!e)return void h?.("Please select text or position your cursor first");if(e.start<0||e.end>n.length||e.start>e.end)return void h?.("Selection is no longer valid. Please select text again.");if(e.start===e.end){const e=o?.current?.getTextarea();return e&&n.trim()?(e.focus(),e.setSelectionRange(0,n.length),o?.current&&o.current.updateCapturedSelection(0,n.length),void console.log("[ToolControls] No selection - selected all text. Press again to rewrite.")):void h?.("Please type or paste text in the editor first")}const r=n.substring(e.start,e.end);if(console.log("[ToolControls] Text to rewrite:",r.substring(0,50)+"..."),!r.trim())return void h?.("Please select text to rewrite");console.log("[ToolControls] customPrompt value:",x,"length:",x.length);const a=x.trim()||"Simplify";le(!0),p?.("rewrite");try{const o=t.map(e=>`${e.title}: ${e.content}`),i="Simplify"===a?"Simplify and make it shorter":a;console.log("[ToolControls] Calling AIService.rewriteWithContext...");let l;(A||{shortLength:100,mediumLength:300,contextAwarenessEnabled:!0}).contextAwarenessEnabled&&n.trim().length>r.length?(console.log("[ToolControls] Using context-aware rewriting"),l=await bd.rewriteWithContext(r,n,e.start,{customPrompt:i,pinnedNotes:o.length>0?o:void 0})):(console.log("[ToolControls] Using basic rewriting (context disabled or selection is entire document)"),l=await bd.rewrite(r,{customPrompt:i,pinnedNotes:o.length>0?o:void 0})),console.log("[ToolControls] Rewrite complete, result length:",l.length),f?.(l,"rewrite",i)}catch(i){const e=i instanceof Error?i.message:"Rewrite failed";console.error("[ToolControls] Rewrite error:",i),h?.(e)}finally{le(!1)}},Se=async()=>{const e=o?.current?.getCapturedSelection();if(!e)return void h?.("Please select text or position your cursor first");if(e.start<0||e.end>n.length||e.start>e.end)return void h?.("Selection is no longer valid. Please select text again.");if(e.start===e.end){const e=o?.current?.getTextarea();return e&&n.trim()?(e.focus(),e.setSelectionRange(0,n.length),o?.current&&o.current.updateCapturedSelection(0,n.length),void console.log("[ToolControls] No selection - selected all text. Press again to summarize.")):void h?.("Please type or paste text in the editor first")}const r=n.substring(e.start,e.end);if(r.trim()){le(!0),p?.("summarize");try{const e=t.map(e=>`${e.title}: ${e.content}`),n=(await bd.summarize(r,{mode:V,readingLevel:G,length:q,pinnedNotes:e.length>0?e:void 0})).replace(/^\*\s*/gm,"• ").replace(/^-\s*/gm,"• ").replace(/^•\s*\*/gm,"• "),a=`Summarize in ${V} mode (${G} reading level)`;f?.(n,"summarize",a)}catch(a){const e=a instanceof Error?a.message:"Summarize failed";h?.(e)}finally{le(!1)}}else h?.("Please select text to summarize")},je=e=>{const t="generate"===e?M:"rewrite"===e?H:oe;if("generate"===e?z:"rewrite"===e?$:ae)xe.current&&xe.current.stop(),t(!1);else{const a=window.SpeechRecognition||window.webkitSpeechRecognition;if(!a)return void h?.("Speech recognition is not supported in this browser");const i=new a;i.lang="en-US",i.interimResults=!0,i.continuous=!0,i.maxAlternatives=1;let l="",s=Date.now();i.onresult=t=>{let r="";for(let e=t.resultIndex;e<t.results.length;e++)if(t.results[e].isFinal){const n=t.results[e][0].transcript,a=Date.now();l&&a-s>1e3&&!l.endsWith(",")&&!l.endsWith(".")&&(l+=","),l+=(l?" ":"")+n,s=a,r=l}if(r){const t=(e,t,n)=>{let r=e.trim();if(!r)return"";/[.!?,;:]$/.test(r)||(r+="."),r=r.charAt(0).toUpperCase()+r.slice(1),r=r.replace(/([.!?]\s+)([a-z])/g,(e,t,n)=>t+n.toUpperCase());const a=t.charAt(n-1),o=a&&" "!==a&&"\n"!==a,i=t.charAt(n);return(o?" ":"")+r+(i&&" "!==i&&"\n"!==i?" ":"")};if("editor"===ve.current&&o?.current){const e=o.current.getTextarea(),a=o.current.getCapturedSelection();if(e&&a){if(a.start!==a.end){let e=r.trim();e.length>0&&(e=e.charAt(0).toUpperCase()+e.slice(1)),o.current.insertAtCursor(e,!1,!0)}else{const a=e.selectionStart,i=t(r,n,a);o.current.insertAtCursor(i,!1,!1)}l=""}}else{let t=r.trim();t.length>0&&(t=t.charAt(0).toUpperCase()+t.slice(1));const n="generate"===e?se.current:"rewrite"===e?ce.current:ue.current;if(n&&n.selectionStart!==n.selectionEnd){const r=n.selectionStart||0,a=n.selectionEnd||0,o="generate"===e?g:"rewrite"===e?x:v,i=o.substring(0,r)+t+o.substring(a);"generate"===e?w(i):"rewrite"===e?k(i):C(i),setTimeout(()=>{n&&n.setSelectionRange(r+t.length,r+t.length)},0)}else if("generate"===e){const e=g.length>0&&!g.endsWith(" ");w(g+(e?" ":"")+t)}else if("rewrite"===e){const e=x.length>0&&!x.endsWith(" ");k(x+(e?" ":"")+t)}else{const e=v.length>0&&!v.endsWith(" ");C(v+(e?" ":"")+t)}l=""}}},i.onerror=e=>{console.error("[ToolControlsContainer] Speech recognition error:",e.error),"no-speech"!==e.error&&h?.("Speech recognition error. Please try again."),t(!1)},i.onend=()=>{t(!1)};const c=setTimeout(()=>{xe.current&&xe.current.stop()},3e4);i.onstop=()=>{clearTimeout(c)};try{i.start(),t(!0)}catch(r){console.error("[ToolControlsContainer] Failed to start recording:",r),h?.("Failed to start recording. Please try again.")}xe.current=i}};return Q.jsxs("div",{style:{marginTop:"16px",flexShrink:0},children:["generate"===e&&Q.jsxs("div",{style:{position:"relative"},children:[Q.jsx("button",{onClick:()=>I(!T),disabled:ie||0===N.length,"aria-label":"Prompt history",title:"Prompt history",style:{position:"absolute",left:"8px",top:"50%",transform:"translateY(-50%)",width:"36px",height:"36px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center",border:"none",background:"transparent",cursor:"pointer",color:"var(--text)",zIndex:10},children:Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("path",{d:"M3 3v5h5"}),Q.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),Q.jsx("path",{d:"M12 7v5l4 2"})]})}),T&&N.length>0&&Q.jsx("div",{ref:pe,style:{position:"absolute",left:"0",right:"0",bottom:"100%",marginBottom:"4px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.5)",zIndex:1e4,maxHeight:"300px",overflow:"auto"},children:N.map(e=>Q.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",borderBottom:"1px solid var(--border-muted)"},children:[Q.jsx("button",{onClick:async t=>{t.stopPropagation(),await md.togglePromptPin(e.id);const n=await md.getPromptHistory(4);L(n)},"aria-label":e.pinned?"Unpin prompt":"Pin prompt",title:e.pinned?"Unpin":"Pin",style:{width:"20px",height:"20px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",borderRadius:"var(--radius-sm)",color:e.pinned?"var(--primary)":"var(--text-muted)",cursor:"pointer",flexShrink:0},children:Q.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:e.pinned?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:Q.jsx("circle",{cx:"12",cy:"12",r:"10"})})}),Q.jsx("button",{onClick:()=>{w(e.text),_(!0),I(!1)},style:{flex:1,padding:"4px 0",textAlign:"left",background:"none",border:"none",color:"var(--text)",cursor:"pointer",fontSize:"var(--fs-sm)"},children:e.text}),!e.pinned&&Q.jsx("button",{onClick:async t=>{t.stopPropagation(),await md.deletePromptFromHistory(e.id);const n=await md.getPromptHistory(4);L(n)},"aria-label":"Delete prompt",title:"Delete",style:{width:"20px",height:"20px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",borderRadius:"var(--radius-sm)",color:"var(--text-muted)",cursor:"pointer",flexShrink:0},children:Q.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},e.id))}),E&&Q.jsx("div",{ref:de,style:{position:"absolute",left:"0",right:"0",bottom:"100%",marginBottom:"4px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.5)",zIndex:1e4},children:["short","medium","long"].map((e,t,n)=>Q.jsx("button",{onClick:()=>{j(e),P(!1)},style:{width:"100%",padding:"12px 16px",textAlign:"left",background:S===e?"var(--surface-2)":"transparent",border:"none",color:"var(--text)",cursor:"pointer",borderRadius:0===t?"var(--radius-md) var(--radius-md) 0 0":t===n.length-1?"0 0 var(--radius-md) var(--radius-md)":"0"},children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),Q.jsx("input",{ref:se,type:"text",className:"flint-input",placeholder:"Start writing...",value:g,onChange:e=>{w(e.target.value),_(!1)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ke())},disabled:ie,style:{width:"100%",height:"48px",padding:"0 140px 0 52px"}}),Q.jsxs("div",{style:{position:"absolute",top:"50%",right:"8px",transform:"translateY(-50%)",display:"flex",gap:"4px"},children:[Q.jsx("button",{className:"flint-btn ghost",onClick:()=>P(!E),disabled:ie,"aria-label":`Length: ${S}`,"aria-expanded":E,"aria-haspopup":"true",title:`Length: ${S}`,style:{width:"auto",minWidth:"50px",height:"36px",padding:"0 12px",display:"flex",alignItems:"center",justifyContent:"center",border:"none",boxShadow:"none",background:"transparent",fontSize:"13px",fontWeight:500},children:(e=>{switch(e){case"short":return"Short";case"medium":return"Med";case"long":return"Long"}})(S)}),Q.jsx("button",{className:"flint-btn "+(z?"recording":"ghost"),onClick:()=>je("generate"),disabled:ie,"aria-label":z?"Stop recording":"Start voice input",title:z?"Stop recording":"Voice input",style:{width:"36px",height:"36px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center",border:z?void 0:"none",boxShadow:z?void 0:"none",background:z?void 0:"transparent"},children:Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Q.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),Q.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2M12 19v4M8 23h8"})]})}),Q.jsx("button",{className:"flint-btn primary",onClick:ie?we:ke,"aria-label":ie?"Stop":"Generate","aria-busy":ie,title:ie?"Stop generation":"Generate",style:{width:"36px",height:"36px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center"},children:ie?Q.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:Q.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"1"})}):Q.jsx("svg",{width:"16",height:"16",viewBox:"0 0 56 56",fill:"currentColor","aria-hidden":"true",children:Q.jsx("path",{d:"M 26.6875 12.6602 C 26.9687 12.6602 27.1094 12.4961 27.1797 12.2383 C 27.9062 8.3242 27.8594 8.2305 31.9375 7.4570 C 32.2187 7.4102 32.3828 7.2461 32.3828 6.9648 C 32.3828 6.6836 32.2187 6.5195 31.9375 6.4726 C 27.8828 5.6524 28.0000 5.5586 27.1797 1.6914 C 27.1094 1.4336 26.9687 1.2695 26.6875 1.2695 C 26.4062 1.2695 26.2656 1.4336 26.1953 1.6914 C 25.3750 5.5586 25.5156 5.6524 21.4375 6.4726 C 21.1797 6.5195 20.9922 6.6836 20.9922 6.9648 C 20.9922 7.2461 21.1797 7.4102 21.4375 7.4570 C 25.5156 8.2774 25.4687 8.3242 26.1953 12.2383 C 26.2656 12.4961 26.4062 12.6602 26.6875 12.6602 Z M 15.3438 28.7852 C 15.7891 28.7852 16.0938 28.5039 16.1406 28.0821 C 16.9844 21.8242 17.1953 21.8242 23.6641 20.5821 C 24.0860 20.5117 24.3906 20.2305 24.3906 19.7852 C 24.3906 19.3633 24.0860 19.0586 23.6641 18.9883 C 17.1953 18.0977 16.9609 17.8867 16.1406 11.5117 C 16.0938 11.0899 15.7891 10.7852 15.3438 10.7852 C 14.9219 10.7852 14.6172 11.0899 14.5703 11.5352 C 13.7969 17.8164 13.4687 17.7930 7.0469 18.9883 C 6.6250 19.0821 6.3203 19.3633 6.3203 19.7852 C 6.3203 20.2539 6.6250 20.5117 7.1406 20.5821 C 13.5156 21.6133 13.7969 21.7774 14.5703 28.0352 C 14.6172 28.5039 14.9219 28.7852 15.3438 28.7852 Z M 31.2344 54.7305 C 31.8438 54.7305 32.2891 54.2852 32.4062 53.6524 C 34.0703 40.8086 35.8750 38.8633 48.5781 37.4570 C 49.2344 37.3867 49.6797 36.8945 49.6797 36.2852 C 49.6797 35.6758 49.2344 35.2070 48.5781 35.1133 C 35.8750 33.7070 34.0703 31.7617 32.4062 18.9180 C 32.2891 18.2852 31.8438 17.8633 31.2344 17.8633 C 30.6250 17.8633 30.1797 18.2852 30.0860 18.9180 C 28.4219 31.7617 26.5938 33.7070 13.9140 35.1133 C 13.2344 35.2070 12.7891 35.6758 12.7891 36.2852 C 12.7891 36.8945 13.2344 37.3867 13.9140 37.4570 C 26.5703 39.1211 28.3281 40.8321 30.0860 53.6524 C 30.1797 54.2852 30.6250 54.7305 31.2344 54.7305 Z"})})})]})]}),"rewrite"===e&&Q.jsxs("div",{style:{position:"relative"},children:[Q.jsx("button",{onClick:()=>W(!B),disabled:ie,"aria-label":"Select preset","aria-expanded":B,style:{position:"absolute",left:"8px",top:"50%",transform:"translateY(-50%)",width:"32px",height:"32px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center",border:"none",background:B?"var(--surface-2)":"transparent",color:"var(--text-muted)",cursor:"pointer",borderRadius:"var(--radius-sm)",transition:"all 0.15s ease",zIndex:2},children:Q.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{transform:B?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:Q.jsx("polyline",{points:"6 9 12 15 18 9"})})}),B&&Q.jsx("div",{ref:fe,style:{position:"absolute",left:"8px",bottom:"100%",marginBottom:"4px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.5)",zIndex:1e4,minWidth:"160px"},children:be.map((e,t)=>Q.jsx("button",{onClick:()=>{U(e),k(e),W(!1)},style:{width:"100%",padding:"10px 16px",border:"none",background:F===e?"var(--surface-2)":"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",borderRadius:0===t?"var(--radius-md) var(--radius-md) 0 0":t===be.length-1?"0 0 var(--radius-md) var(--radius-md)":"0"},children:e},e))}),Q.jsx("input",{ref:ce,type:"text",className:"flint-input",placeholder:"Rewrite",value:x,onChange:e=>k(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Ce())},disabled:ie,style:{width:"100%",height:"48px",padding:"0 100px 0 48px"}}),Q.jsxs("div",{style:{position:"absolute",top:"50%",right:"8px",transform:"translateY(-50%)",display:"flex",gap:"4px"},children:[Q.jsx("button",{className:"flint-btn "+($?"recording":"ghost"),onClick:()=>je("rewrite"),disabled:ie,"aria-label":$?"Stop recording":"Start voice input",title:$?"Stop recording":"Voice input",style:{width:"36px",height:"36px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center",border:$?void 0:"none",boxShadow:$?void 0:"none",background:$?void 0:"transparent"},children:Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Q.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),Q.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2M12 19v4M8 23h8"})]})}),Q.jsx("button",{className:"flint-btn primary",onMouseDown:e=>{e.preventDefault(),ie?we():Ce()},"aria-label":ie?"Stop":"Rewrite","aria-busy":ie,title:ie?"Stop rewriting":"Rewrite",style:{width:"36px",height:"36px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center"},children:ie?Q.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:Q.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"1"})}):Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),Q.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]})]}),"summarize"===e&&Q.jsxs("div",{children:[Q.jsxs("div",{style:{marginBottom:"12px",display:"flex",gap:"12px",justifyContent:"flex-start"},children:[Q.jsxs("div",{style:{position:"relative",flex:1},children:[Q.jsxs("button",{className:"flint-btn ghost",onClick:()=>!ie&&re(!ne),disabled:ie,"aria-label":`Summary type: ${V}`,"aria-expanded":ne,"aria-haspopup":"true",title:"Summary type",style:{width:"100%",height:"36px",padding:"0 12px",display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid var(--border)",background:"var(--surface)",fontSize:"13px",fontWeight:500,textTransform:"capitalize"},children:[Q.jsx("span",{children:V}),Q.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:Q.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),ne&&Q.jsx("div",{ref:me,style:{position:"absolute",left:"0",right:"0",bottom:"100%",marginBottom:"4px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.5)",zIndex:1e4},children:["bullets","paragraph","brief"].map((e,t,n)=>Q.jsx("button",{onClick:()=>{Y(e),re(!1)},style:{width:"100%",padding:"8px 12px",border:"none",background:V===e?"var(--surface-2)":"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"var(--fs-sm)",textTransform:"capitalize",borderRadius:0===t?"var(--radius-md) var(--radius-md) 0 0":t===n.length-1?"0 0 var(--radius-md) var(--radius-md)":"0"},children:e},e))})]}),Q.jsxs("div",{style:{position:"relative",flex:1},children:[Q.jsxs("button",{className:"flint-btn ghost",onClick:()=>!ie&&J(!Z),disabled:ie,"aria-label":`Reading level: ${G}`,"aria-expanded":Z,"aria-haspopup":"true",title:"Reading level",style:{width:"100%",height:"36px",padding:"0 12px",display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid var(--border)",background:"var(--surface)",fontSize:"13px",fontWeight:500,textTransform:"capitalize"},children:[Q.jsx("span",{children:G}),Q.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:Q.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),Z&&Q.jsx("div",{ref:he,style:{position:"absolute",left:"0",right:"0",bottom:"100%",marginBottom:"4px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.5)",zIndex:1e4},children:["simple","moderate","detailed","complex"].map((e,t,n)=>Q.jsx("button",{onClick:()=>{K(e),J(!1)},style:{width:"100%",padding:"8px 12px",border:"none",background:G===e?"var(--surface-2)":"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"var(--fs-sm)",textTransform:"capitalize",borderRadius:0===t?"var(--radius-md) var(--radius-md) 0 0":t===n.length-1?"0 0 var(--radius-md) var(--radius-md)":"0"},children:e},e))})]})]}),Q.jsxs("div",{style:{position:"relative"},children:[Q.jsx("input",{ref:ue,type:"text",className:"flint-input",placeholder:"Summarise",value:v,onChange:e=>C(e.target.value),disabled:ie,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Se())},style:{width:"100%",height:"48px",padding:"0 180px 0 12px"}}),Q.jsxs("div",{style:{position:"absolute",top:"50%",right:"8px",transform:"translateY(-50%)",display:"flex",gap:"4px"},children:[Q.jsx("button",{className:"flint-btn ghost",onClick:()=>!ie&&te(!ee),disabled:ie,"aria-label":`Length: ${q}`,"aria-expanded":ee,"aria-haspopup":"true",title:`Length: ${q}`,style:{width:"auto",minWidth:"50px",height:"36px",padding:"0 12px",display:"flex",alignItems:"center",justifyContent:"center",border:"none",boxShadow:"none",background:"transparent",fontSize:"13px",fontWeight:500,textTransform:"capitalize"},children:q}),ee&&Q.jsx("div",{ref:ge,style:{position:"absolute",right:"90px",bottom:"100%",marginBottom:"4px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.5)",zIndex:1e4,minWidth:"100px"},children:["short","medium","long"].map((e,t,n)=>Q.jsx("button",{onClick:()=>{X(e),te(!1)},style:{width:"100%",padding:"8px 12px",border:"none",background:q===e?"var(--surface-2)":"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"var(--fs-sm)",textTransform:"capitalize",borderRadius:0===t?"var(--radius-md) var(--radius-md) 0 0":t===n.length-1?"0 0 var(--radius-md) var(--radius-md)":"0"},children:e},e))}),Q.jsx("button",{className:"flint-btn "+(ae?"recording":"ghost"),onClick:()=>je("summarize"),disabled:ie,"aria-label":ae?"Stop recording":"Start voice input",title:ae?"Stop recording":"Voice input",style:{width:"36px",height:"36px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center",border:ae?void 0:"none",boxShadow:ae?void 0:"none",background:ae?void 0:"transparent"},children:Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Q.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),Q.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2M12 19v4M8 23h8"})]})}),Q.jsx("button",{className:"flint-btn primary",onClick:ie?we:Se,"aria-label":ie?"Stop":"Summarize","aria-busy":ie,title:ie?"Stop summarizing":"Summarize",style:{width:"36px",height:"36px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center"},children:ie?Q.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:Q.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"1"})}):Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),Q.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),Q.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),Q.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),Q.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),Q.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})})]})]})]})]})}async function zd(e,t,n,r,a,o){const i=e.value.substring(0,n),l=e.value.substring(r),s=e.scrollTop,c=e.scrollLeft,u=Math.max(5,15-Math.floor(t.length/100));let d=0;return new Promise(r=>{const p=()=>{if(d>=t.length)return o(),void r();const f=Math.min(3,t.length-d);d+=f;const h=t.substring(0,d),g=i+h+l;e.value=g;const m=new InputEvent("input",{bubbles:!0,cancelable:!0,composed:!0});e.dispatchEvent(m);const x=new Event("change",{bubbles:!0});e.dispatchEvent(x);const y=n+d;e.setSelectionRange(y,y),e.scrollTop=s,e.scrollLeft=c,a(h,d),setTimeout(p,u)};p()})}function Md(e,t,n){const r=e instanceof Blob?e:new Blob([e],{type:n}),a=URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}function Od(e){return e.replace(/[<>:"/\\|?*]/g,"-").replace(/\s+/g,"_").substring(0,200)}function _d(e){let t=e.replace(/\\/g,"\\\\").replace(/{/g,"\\{").replace(/}/g,"\\}");return t=t.replace(/[^\x00-\x7F]/g,e=>{const t=e.charCodeAt(0);return 8226===t?"\\'b7":8211===t?"\\'96":8212===t?"\\'97":8216===t?"\\'91":8217===t?"\\'92":8220===t?"\\'93":8221===t?"\\'94":8230===t?"\\'85":"\\u"+t+"?"}),t}function Fd(e,t){switch(t){case"txt":!function(e){const t=Od(e.title||"Untitled")+".txt";Md(e.content,t,"text/plain")}(e);break;case"md":!function(e){const t=Od(e.title||"Untitled")+".md";let n=`# ${e.title||"Untitled"}\n\n`;e.description&&(n+=`> ${e.description}\n\n`),n+=e.content,Md(n,t,"text/markdown")}(e);break;case"html":!function(e){const t=Od(e.title||"Untitled")+".html",n=e.content.split("\n\n").filter(e=>e.trim()).map(e=>`    <p>${e.replace(/\n/g,"<br>")}</p>`).join("\n");Md(`<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>${e.title||"Untitled"}</title>\n  <style>\n    body {\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n      line-height: 1.6;\n      max-width: 800px;\n      margin: 0 auto;\n      padding: 40px 20px;\n      color: #333;\n    }\n    h1 {\n      font-size: 2.5em;\n      margin-bottom: 0.5em;\n      color: #1a1a1a;\n    }\n    .description {\n      font-style: italic;\n      color: #666;\n      margin-bottom: 2em;\n      padding-left: 1em;\n      border-left: 3px solid #ddd;\n    }\n    p {\n      margin-bottom: 1em;\n    }\n    @media print {\n      body {\n        max-width: 100%;\n      }\n    }\n  </style>\n</head>\n<body>\n  <h1>${e.title||"Untitled"}</h1>\n  ${e.description?`<div class="description">${e.description}</div>`:""}\n  <div class="content">\n${n}\n  </div>\n</body>\n</html>`,t,"text/html")}(e);break;case"docx":!function(e){const t=Od(e.title||"Untitled")+".doc";let n="{\\rtf1\\ansi\\ansicpg1252\\deff0\\deflang1033\n";n+="{\\fonttbl{\\f0\\fswiss\\fcharset0 Arial;}{\\f1\\fnil\\fcharset2 Symbol;}}\n",n+="{\\colortbl ;\\red0\\green0\\blue0;}\n",n+="{\\fs32\\b "+_d(e.title||"Untitled")+"\\b0\\fs24\\par}\n",n+="\\par\n",e.description&&(n+="{\\i "+_d(e.description)+"\\i0\\par}\n",n+="\\par\n");const r=e.content.split("\n");let a=!1;for(let o=0;o<r.length;o++){const e=(r[o]||"").trim();if(!e){a&&(a=!1),n+="\\par\n";continue}const t=e.match(/^[•\-*]\s+(.+)$/);t?(n+="{\\pntext\\f1\\'b7\\tab}{\\*\\pn\\pnlvlblt\\pnf1\\pnindent0{\\pntxtb\\'b7}}",n+="\\fi-360\\li720 "+_d(t[1]||"")+"\\par\n",a=!0):(a&&(a=!1,n+="\\par\n"),n+=_d(e)+"\\par\n")}n+="}",Md(n,t,"application/rtf")}(e);break;default:console.error("[Export] Unknown format:",t)}}function Ud({projects:e,onProjectSelect:t,onProjectCreate:n,onProjectDelete:r,onProjectUpdate:a,onForceSave:o,currentProjectId:i,isOpen:l,onClose:s}){const[c,u]=D.useState(null),[d,p]=D.useState(""),[f,h]=D.useState(""),[g,m]=D.useState(null);D.useEffect(()=>{if(!l)return;const e=e=>{"Escape"===e.key&&(c?u(null):s())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[l,s,c]);const x=async(e,t,n)=>{n.stopPropagation();try{if(e.id===i&&o){console.log("[ProjectManager] Force saving current project before export"),await o();const t=await md.getProject(e.id);t&&(e=t)}Fd(e,t),m(null),console.log(`[ProjectManager] Exported project ${e.id} as ${t}`)}catch(r){console.error("[ProjectManager] Export failed:",r),alert("Failed to export project. Please try again.")}};return l?Q.jsxs("div",{style:{width:"100%",height:"100%",background:"var(--bg)",display:"flex",flexDirection:"column",overflow:"hidden"},role:"region","aria-labelledby":"project-manager-title",children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 32px",borderBottom:"1px solid var(--border-muted)",flexShrink:0},children:[Q.jsx("h2",{id:"project-manager-title",style:{fontSize:"var(--fs-xl)",fontWeight:600,color:"var(--text)",margin:0},children:"Projects"}),Q.jsx("button",{onClick:s,"aria-label":"Close project manager",style:{width:"32px",height:"32px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",borderRadius:"var(--radius-sm)",color:"var(--text-muted)",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="var(--surface-2)",e.currentTarget.style.color="var(--text)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="var(--text-muted)"},children:Q.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Q.jsx("div",{style:{flex:1,overflowY:"auto",padding:"32px"},children:Q.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(min(280px, 100%), 1fr))",gap:"16px",maxWidth:"1400px",margin:"0 auto"},children:[Q.jsxs("button",{onClick:n,"aria-label":"Create new project",style:{height:"180px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",cursor:"pointer",transition:"all 0.2s ease",border:"2px dashed var(--border)",background:"transparent",borderRadius:"var(--radius-md)",padding:"16px"},onMouseEnter:e=>{e.currentTarget.style.borderColor="var(--primary)",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--border)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[Q.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",style:{color:"var(--text-muted)"},children:[Q.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),Q.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Q.jsx("span",{style:{fontSize:"var(--fs-md)",fontWeight:500,color:"var(--text-muted)"},children:"New Project"})]}),e.map(e=>Q.jsxs("div",{className:"flint-card",style:{height:"180px",display:"flex",flexDirection:"column",padding:"16px",cursor:"pointer",transition:"all 0.2s ease",position:"relative"},onClick:()=>t(e.id),onMouseEnter:e=>{e.currentTarget.style.borderColor="var(--primary)",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--border-muted)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},role:"button",tabIndex:0,"aria-label":`Open project: ${e.title}`,onKeyDown:n=>{"Enter"!==n.key&&" "!==n.key||(n.preventDefault(),t(e.id))},children:[Q.jsx("h3",{style:{fontSize:"var(--fs-lg)",fontWeight:600,color:"var(--text)",margin:"0 0 8px 0",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.title||"Untitled Project"}),e.description?Q.jsx("p",{style:{fontSize:"var(--fs-sm)",color:"var(--text-muted)",margin:"0 0 12px 0",fontStyle:"italic"},children:e.description}):Q.jsx("p",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)",margin:"0 0 12px 0"},children:new Date(e.updatedAt).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}),Q.jsx("p",{style:{fontSize:"var(--fs-sm)",color:"var(--text-muted)",margin:0,flex:1,overflow:"hidden",display:"-webkit-box",WebkitLineClamp:e.description?3:4,WebkitBoxOrient:"vertical",lineHeight:"1.5"},children:e.content||"No content yet..."}),Q.jsxs("div",{style:{position:"absolute",top:"12px",right:"12px",display:"flex",gap:"4px",opacity:0,transition:"opacity 0.2s ease"},className:"project-actions",children:[Q.jsxs("div",{style:{position:"relative"},children:[Q.jsx("button",{className:"flint-btn ghost",onClick:t=>{t.stopPropagation(),m(g===e.id?null:e.id)},"aria-label":`Export project: ${e.title}`,style:{width:"32px",height:"32px",padding:0,display:"flex",alignItems:"center",justifyContent:"center"},children:Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),Q.jsx("polyline",{points:"17 8 12 3 7 8"}),Q.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}),g===e.id&&Q.jsxs("div",{style:{position:"absolute",top:"calc(100% + 4px)",right:0,minWidth:"140px",background:"var(--surface-2)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",boxShadow:"var(--shadow-soft)",padding:"4px",zIndex:10},children:[Q.jsx("button",{onClick:t=>x(e,"txt",t),style:{width:"100%",padding:"6px 10px",background:"transparent",border:"none",color:"var(--text)",fontSize:"var(--fs-xs)",textAlign:"left",cursor:"pointer",borderRadius:"var(--radius-sm)"},onMouseEnter:e=>e.currentTarget.style.background="var(--surface-3)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"Text (.txt)"}),Q.jsx("button",{onClick:t=>x(e,"md",t),style:{width:"100%",padding:"6px 10px",background:"transparent",border:"none",color:"var(--text)",fontSize:"var(--fs-xs)",textAlign:"left",cursor:"pointer",borderRadius:"var(--radius-sm)"},onMouseEnter:e=>e.currentTarget.style.background="var(--surface-3)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"Markdown (.md)"}),Q.jsx("button",{onClick:t=>x(e,"html",t),style:{width:"100%",padding:"6px 10px",background:"transparent",border:"none",color:"var(--text)",fontSize:"var(--fs-xs)",textAlign:"left",cursor:"pointer",borderRadius:"var(--radius-sm)"},onMouseEnter:e=>e.currentTarget.style.background="var(--surface-3)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"HTML (.html)"}),Q.jsx("button",{onClick:t=>x(e,"docx",t),style:{width:"100%",padding:"6px 10px",background:"transparent",border:"none",color:"var(--text)",fontSize:"var(--fs-xs)",textAlign:"left",cursor:"pointer",borderRadius:"var(--radius-sm)"},onMouseEnter:e=>e.currentTarget.style.background="var(--surface-3)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"Docs (.doc)"})]})]}),Q.jsx("button",{className:"flint-btn ghost",onClick:t=>{t.stopPropagation(),(e=>{u(e),p(e.title),h(e.description||"")})(e)},"aria-label":`Edit project: ${e.title}`,style:{width:"32px",height:"32px",padding:0,display:"flex",alignItems:"center",justifyContent:"center"},children:Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),Q.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),r&&Q.jsx("button",{className:"flint-btn ghost",onClick:t=>{t.stopPropagation(),confirm(`Are you sure you want to delete "${e.title||"Untitled Project"}"? This action cannot be undone.`)&&r(e.id)},"aria-label":`Delete project: ${e.title}`,style:{width:"32px",height:"32px",padding:0,display:"flex",alignItems:"center",justifyContent:"center"},children:Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("polyline",{points:"3 6 5 6 21 6"}),Q.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]},e.id))]})}),c&&Q.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1100,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px"},onClick:()=>u(null),children:Q.jsxs("div",{style:{background:"var(--bg)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border)",boxShadow:"var(--shadow-soft)",width:"100%",maxWidth:"500px",padding:"24px"},onClick:e=>e.stopPropagation(),children:[Q.jsx("h3",{style:{fontSize:"var(--fs-lg)",fontWeight:600,color:"var(--text)",margin:"0 0 20px 0"},children:"Edit Project"}),Q.jsxs("div",{style:{marginBottom:"16px"},children:[Q.jsx("label",{htmlFor:"project-title",style:{display:"block",fontSize:"var(--fs-sm)",fontWeight:500,color:"var(--text)",marginBottom:"8px"},children:"Project Name"}),Q.jsx("input",{id:"project-title",type:"text",className:"flint-input",value:d,onChange:e=>p(e.target.value),placeholder:"Untitled Project",autoFocus:!0,style:{width:"100%"}})]}),Q.jsxs("div",{style:{marginBottom:"24px"},children:[Q.jsx("label",{htmlFor:"project-description",style:{display:"block",fontSize:"var(--fs-sm)",fontWeight:500,color:"var(--text)",marginBottom:"8px"},children:"Description (optional)"}),Q.jsx("textarea",{id:"project-description",className:"flint-input",value:f,onChange:e=>h(e.target.value),placeholder:"Project description",rows:6,style:{width:"100%",minHeight:"120px",resize:"vertical",fontFamily:"inherit",lineHeight:"1.5",padding:"12px"}})]}),Q.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[Q.jsx("button",{className:"flint-btn ghost",onClick:()=>u(null),children:"Cancel"}),Q.jsx("button",{className:"flint-btn primary",onClick:async()=>{if(c)try{await md.updateProject(c.id,{title:d.trim()||"Untitled Project",description:f.trim()}),u(null),a?.()}catch(e){console.error("[ProjectManager] Failed to update project:",e),alert("Failed to update project. Please try again.")}},children:"Save Changes"})]})]})}),Q.jsx("style",{children:"\n        .flint-card:hover .project-actions {\n          opacity: 1 !important;\n        }\n      "})]}):null}function Dd(e){return new Date(e).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function Bd({snapshot:e,isActive:t,onSelect:n,onToggleLiked:r}){return Q.jsxs(Q.Fragment,{children:[Q.jsxs("button",{className:"snapshot-item "+(t?"active":""),onClick:()=>n(e.id),"aria-label":`${e.actionDescription} at ${Dd(e.timestamp)}`,"aria-current":t?"true":void 0,children:[Q.jsxs("div",{className:"snapshot-header",children:[Q.jsxs("div",{className:"snapshot-action-container",children:["Manual edit"===e.actionDescription&&Q.jsx("svg",{width:"14",height:"14",viewBox:"0 0 600 600",fill:"currentColor",className:"snapshot-edit-icon","aria-label":"Manual edit",children:Q.jsx("path",{d:"M570.00006,459.23077 C567.6923,466.15387 559.6154,467.30768 553.8462,462.69232 L553.8462,462.69232 L460.3846,369.23077 L460.3846,369.23077 C453.46152,362.3077 441.92307,362.3077 435,369.23077 L435,369.23077 L369.23077,435 L369.23077,435 C362.30768,441.92307 362.30768,453.46155 369.23077,460.3846 L369.23077,460.3846 L463.84616,553.8461 L463.84616,553.8461 C468.46155,558.46155 466.15384,566.53845 460.3846,570 L460.3846,570 C444.23074,574.61536 426.92307,576.9231 410.7692,576.9231 L410.7692,576.9231 C312.6923,576.9231 234.23074,492.69232 245.7692,392.30768 L245.7692,392.30768 C248.07689,376.15387 251.53844,362.3077 257.30765,348.46155 L257.30765,348.46155 L41.538456,133.84616 L41.538456,133.84616 C16.153841,108.46155 16.153841,66.923096 41.538456,42.69226 L41.538456,42.69226 C54.230766,29.999939 71.53845,23.076904 87.6923,23.076904 L87.6923,23.076904 C103.84615,23.076904 121.15384,29.999939 133.84615,42.69226 L133.84615,42.69226 L348.46155,257.30768 L348.46155,257.30768 C362.3077,251.53845 377.3077,248.0769 392.3077,245.76923 L392.3077,245.76923 C492.69232,234.23074 576.92303,312.6923 576.92303,410.76923 L576.92303,410.76923 C576.92303,428.07693 574.61536,444.23077 570.00006,459.23077 Z",transform:"translate(0,600) scale(1,-1)"})}),Q.jsx("span",{className:"snapshot-action",children:e.actionDescription})]}),Q.jsxs("div",{className:"snapshot-header-actions",children:[r&&Q.jsx("button",{className:"snapshot-like-btn "+(e.liked?"liked":""),onClick:t=>{t.stopPropagation(),r?.(e.id,e.liked||!1)},"aria-label":e.liked?"Unlike":"Like",title:e.liked?"Unlike":"Like",children:Q.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:e.liked?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:Q.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}),Q.jsx("span",{className:"snapshot-time",children:Dd(e.timestamp)})]})]}),Q.jsxs("div",{className:"snapshot-preview",children:[e.content.slice(0,100),e.content.length>100?"...":""]})]}),Q.jsx("style",{children:"\n        /* Snapshot item */\n        .snapshot-item {\n          width: 100%;\n          padding: 12px;\n          margin-bottom: 8px;\n          border: 1px solid var(--border-muted);\n          border-radius: var(--radius-md);\n          background: var(--surface);\n          color: var(--text);\n          cursor: pointer;\n          text-align: left;\n          transition: all 0.2s ease;\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n\n        .snapshot-item:hover {\n          border-color: var(--border);\n          transform: translateX(4px);\n          background: color-mix(in oklab, var(--surface) 90%, white 10%);\n        }\n\n        .snapshot-item:focus-visible {\n          outline: none;\n          box-shadow: var(--shadow-focus);\n        }\n\n        .snapshot-item:active {\n          transform: translateX(4px) translateY(1px);\n        }\n\n        .snapshot-item.active {\n          border-color: var(--primary);\n          background: color-mix(in oklab, var(--primary) 10%, var(--surface) 90%);\n          box-shadow: 0 0 0 1px var(--primary);\n        }\n\n        .snapshot-item.active:hover {\n          border-color: var(--primary);\n          background: color-mix(in oklab, var(--primary) 15%, var(--surface) 85%);\n        }\n\n        /* Snapshot header */\n        .snapshot-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          gap: 8px;\n        }\n\n        .snapshot-action-container {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          flex: 1;\n          overflow: hidden;\n        }\n\n        .snapshot-edit-icon {\n          flex-shrink: 0;\n          color: var(--text-muted);\n        }\n\n        .snapshot-action {\n          font-size: var(--fs-sm);\n          font-weight: 600;\n          color: var(--text);\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n\n        .snapshot-header-actions {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          flex-shrink: 0;\n        }\n\n        .snapshot-like-btn {\n          padding: 4px;\n          background: transparent;\n          border: none;\n          color: var(--text-muted);\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border-radius: var(--radius-xs);\n          transition: all 0.2s ease;\n        }\n\n        .snapshot-like-btn:hover {\n          background: var(--surface-2);\n          color: var(--text);\n        }\n\n        .snapshot-like-btn.liked {\n          color: #e74c3c;\n        }\n\n        .snapshot-like-btn.liked:hover {\n          color: #c0392b;\n        }\n\n        .snapshot-time {\n          font-size: var(--fs-xs);\n          color: var(--text-muted);\n          flex-shrink: 0;\n        }\n\n        /* Snapshot preview */\n        .snapshot-preview {\n          font-size: var(--fs-xs);\n          color: var(--text-muted);\n          line-height: 1.4;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          display: -webkit-box;\n          -webkit-line-clamp: 2;\n          -webkit-box-orient: vertical;\n        }\n      "})]})}function Wd(e){switch(e){case"generate":return Q.jsx("svg",{width:"20",height:"20",viewBox:"0 0 56 56",fill:"currentColor","aria-hidden":"true",children:Q.jsx("path",{d:"M 26.6875 12.6602 C 26.9687 12.6602 27.1094 12.4961 27.1797 12.2383 C 27.9062 8.3242 27.8594 8.2305 31.9375 7.4570 C 32.2187 7.4102 32.3828 7.2461 32.3828 6.9648 C 32.3828 6.6836 32.2187 6.5195 31.9375 6.4726 C 27.8828 5.6524 28.0000 5.5586 27.1797 1.6914 C 27.1094 1.4336 26.9687 1.2695 26.6875 1.2695 C 26.4062 1.2695 26.2656 1.4336 26.1953 1.6914 C 25.3750 5.5586 25.5156 5.6524 21.4375 6.4726 C 21.1797 6.5195 20.9922 6.6836 20.9922 6.9648 C 20.9922 7.2461 21.1797 7.4102 21.4375 7.4570 C 25.5156 8.2774 25.4687 8.3242 26.1953 12.2383 C 26.2656 12.4961 26.4062 12.6602 26.6875 12.6602 Z M 15.3438 28.7852 C 15.7891 28.7852 16.0938 28.5039 16.1406 28.0821 C 16.9844 21.8242 17.1953 21.8242 23.6641 20.5821 C 24.0860 20.5117 24.3906 20.2305 24.3906 19.7852 C 24.3906 19.3633 24.0860 19.0586 23.6641 18.9883 C 17.1953 18.0977 16.9609 17.8867 16.1406 11.5117 C 16.0938 11.0899 15.7891 10.7852 15.3438 10.7852 C 14.9219 10.7852 14.6172 11.0899 14.5703 11.5352 C 13.7969 17.8164 13.4687 17.7930 7.0469 18.9883 C 6.6250 19.0821 6.3203 19.3633 6.3203 19.7852 C 6.3203 20.2539 6.6250 20.5117 7.1406 20.5821 C 13.5156 21.6133 13.7969 21.7774 14.5703 28.0352 C 14.6172 28.5039 14.9219 28.7852 15.3438 28.7852 Z M 31.2344 54.7305 C 31.8438 54.7305 32.2891 54.2852 32.4062 53.6524 C 34.0703 40.8086 35.8750 38.8633 48.5781 37.4570 C 49.2344 37.3867 49.6797 36.8945 49.6797 36.2852 C 49.6797 35.6758 49.2344 35.2070 48.5781 35.1133 C 35.8750 33.7070 34.0703 31.7617 32.4062 18.9180 C 32.2891 18.2852 31.8438 17.8633 31.2344 17.8633 C 30.6250 17.8633 30.1797 18.2852 30.0860 18.9180 C 28.4219 31.7617 26.5938 33.7070 13.9140 35.1133 C 13.2344 35.2070 12.7891 35.6758 12.7891 36.2852 C 12.7891 36.8945 13.2344 37.3867 13.9140 37.4570 C 26.5703 39.1211 28.3281 40.8321 30.0860 53.6524 C 30.1797 54.2852 30.6250 54.7305 31.2344 54.7305 Z"})});case"rewrite":return Q.jsx("svg",{width:"20",height:"20",viewBox:"0 0 600 600",fill:"currentColor","aria-hidden":"true",children:Q.jsx("path",{d:"M570.00006,459.23077 C567.6923,466.15387 559.6154,467.30768 553.8462,462.69232 L553.8462,462.69232 L460.3846,369.23077 L460.3846,369.23077 C453.46152,362.3077 441.92307,362.3077 435,369.23077 L435,369.23077 L369.23077,435 L369.23077,435 C362.30768,441.92307 362.30768,453.46155 369.23077,460.3846 L369.23077,460.3846 L463.84616,553.8461 L463.84616,553.8461 C468.46155,558.46155 466.15384,566.53845 460.3846,570 L460.3846,570 C444.23074,574.61536 426.92307,576.9231 410.7692,576.9231 L410.7692,576.9231 C312.6923,576.9231 234.23074,492.69232 245.7692,392.30768 L245.7692,392.30768 C248.07689,376.15387 251.53844,362.3077 257.30765,348.46155 L257.30765,348.46155 L41.538456,133.84616 L41.538456,133.84616 C16.153841,108.46155 16.153841,66.923096 41.538456,42.69226 L41.538456,42.69226 C54.230766,29.999939 71.53845,23.076904 87.6923,23.076904 L87.6923,23.076904 C103.84615,23.076904 121.15384,29.999939 133.84615,42.69226 L133.84615,42.69226 L348.46155,257.30768 L348.46155,257.30768 C362.3077,251.53845 377.3077,248.0769 392.3077,245.76923 L392.3077,245.76923 C492.69232,234.23074 576.92303,312.6923 576.92303,410.76923 L576.92303,410.76923 C576.92303,428.07693 574.61536,444.23077 570.00006,459.23077 Z",transform:"translate(0,600) scale(1,-1)"})});case"summarize":return Q.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:Q.jsx("path",{d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})})}}function $d({snapshot:e,onClose:t,onRestore:n}){if(!e)return null;return Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{className:"snapshot-modal-backdrop",onClick:e=>{e.target===e.currentTarget&&t()},children:Q.jsxs("div",{className:"snapshot-modal",role:"dialog","aria-modal":"true","aria-labelledby":"snapshot-modal-title",children:[Q.jsxs("div",{className:"snapshot-modal-header",children:[Q.jsxs("div",{className:"snapshot-modal-title-row",children:[Q.jsx("div",{className:"snapshot-modal-icon",children:Wd(e.actionType)}),Q.jsxs("div",{children:[Q.jsx("h2",{id:"snapshot-modal-title",className:"snapshot-modal-title",children:e.actionDescription}),Q.jsx("p",{className:"snapshot-modal-timestamp",children:(r=e.timestamp,new Date(r).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}))})]})]}),Q.jsxs("div",{className:"snapshot-modal-actions",children:[Q.jsx("button",{className:"snapshot-modal-icon-btn snapshot-modal-restore-btn",onClick:()=>{n(e.content),t()},"aria-label":"Restore this version",title:"Restore",children:Q.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[Q.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),Q.jsx("path",{d:"M21 3v5h-5"}),Q.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),Q.jsx("path",{d:"M3 21v-5h5"})]})}),Q.jsx("button",{className:"snapshot-modal-icon-btn snapshot-modal-close-btn",onClick:t,"aria-label":"Close modal",title:"Close",children:Q.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[Q.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),Q.jsx("div",{className:"snapshot-modal-content",children:Q.jsx("div",{className:"snapshot-modal-text",children:e.content})})]})}),Q.jsx("style",{children:"\n        /* Modal backdrop */\n        .snapshot-modal-backdrop {\n          position: fixed;\n          inset: 0;\n          background: rgba(0, 0, 0, 0.75);\n          backdrop-filter: blur(4px);\n          z-index: 10000;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          padding: 24px;\n          animation: fadeIn 0.2s ease;\n        }\n\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n          }\n          to {\n            opacity: 1;\n          }\n        }\n\n        /* Modal container */\n        .snapshot-modal {\n          width: 100%;\n          max-width: 800px;\n          max-height: 90vh;\n          background: var(--bg);\n          border-radius: var(--radius-lg);\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n          display: flex;\n          flex-direction: column;\n          animation: slideUp 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n        }\n\n        @keyframes slideUp {\n          from {\n            opacity: 0;\n            transform: translateY(20px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        /* Header */\n        .snapshot-modal-header {\n          padding: 24px;\n          border-bottom: 1px solid var(--border-muted);\n          display: flex;\n          align-items: flex-start;\n          justify-content: space-between;\n          gap: 16px;\n          flex-shrink: 0;\n        }\n\n        .snapshot-modal-title-row {\n          display: flex;\n          align-items: flex-start;\n          gap: 12px;\n          flex: 1;\n        }\n\n        .snapshot-modal-icon {\n          width: 40px;\n          height: 40px;\n          border-radius: var(--radius-md);\n          background: var(--surface-2);\n          color: var(--primary);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n        }\n\n        .snapshot-modal-title {\n          font-size: var(--fs-lg);\n          font-weight: 600;\n          color: var(--text);\n          margin: 0 0 4px 0;\n        }\n\n        .snapshot-modal-timestamp {\n          font-size: var(--fs-sm);\n          color: var(--text-muted);\n          margin: 0;\n        }\n\n        .snapshot-modal-actions {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          flex-shrink: 0;\n        }\n\n        .snapshot-modal-icon-btn {\n          width: 48px;\n          height: 48px;\n          padding: 0;\n          border: 1px solid transparent;\n          border-radius: var(--radius-md);\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          transition: background 0.12s ease, color 0.12s ease, border-color 0.12s ease;\n        }\n\n        .snapshot-modal-restore-btn {\n          background: linear-gradient(135deg, oklch(0.5 0.1 var(--accent-hue)) 0%, oklch(0.4 0.12 var(--accent-hue)) 100%);\n          color: oklch(0.12 0 255);\n        }\n\n        .light .snapshot-modal-restore-btn {\n          background: linear-gradient(135deg, oklch(0.7 0.1 var(--accent-hue)) 0%, oklch(0.6 0.12 var(--accent-hue)) 100%);\n          color: oklch(0.12 0 255);\n        }\n\n        .snapshot-modal-restore-btn:hover {\n          background: linear-gradient(135deg, oklch(0.55 0.11 var(--accent-hue)) 0%, oklch(0.45 0.13 var(--accent-hue)) 100%);\n        }\n\n        .light .snapshot-modal-restore-btn:hover {\n          background: linear-gradient(135deg, oklch(0.75 0.11 var(--accent-hue)) 0%, oklch(0.65 0.13 var(--accent-hue)) 100%);\n        }\n\n        .snapshot-modal-restore-btn:focus-visible {\n          outline: none;\n          box-shadow: 0 0 0 2px color-mix(in oklab, var(--primary) 50%, transparent);\n        }\n\n        .snapshot-modal-close-btn {\n          background: transparent;\n          color: var(--text-muted);\n        }\n\n        .snapshot-modal-close-btn:hover {\n          background: var(--surface-2);\n          color: var(--text);\n        }\n\n        .snapshot-modal-close-btn:focus-visible {\n          outline: none;\n          box-shadow: 0 0 0 2px color-mix(in oklab, var(--primary) 50%, transparent);\n        }\n\n        /* Content */\n        .snapshot-modal-content {\n          flex: 1;\n          overflow-y: auto;\n          padding: 24px;\n        }\n\n        .snapshot-modal-text {\n          font-size: var(--fs-md);\n          line-height: 1.6;\n          color: var(--text);\n          white-space: pre-wrap;\n          word-wrap: break-word;\n        }\n\n        /* Scrollbar styling */\n        .snapshot-modal-content::-webkit-scrollbar {\n          width: 10px;\n        }\n\n        .snapshot-modal-content::-webkit-scrollbar-track {\n          background: transparent;\n        }\n\n        .snapshot-modal-content::-webkit-scrollbar-thumb {\n          background: var(--border);\n          border-radius: 5px;\n        }\n\n        .snapshot-modal-content::-webkit-scrollbar-thumb:hover {\n          background: var(--highlight);\n        }\n      "})]});var r}function Hd({projectId:e,snapshots:t,activeSnapshotId:n,onSnapshotSelect:r,onRestore:a,isOpen:o,onToggle:i,onSnapshotsChange:l,hideToggle:s=!1}){const[c,u]=D.useState(""),[d,p]=D.useState(new Set),[f,h]=D.useState("newest"),[g,m]=D.useState(!1),[x,y]=D.useState(!1),[v,b]=D.useState(null),[w,k]=D.useState(!1),C=D.useRef(null),S=D.useRef(null);D.useEffect(()=>{const e=e=>{C.current&&!C.current.contains(e.target)&&y(!1),S.current&&!S.current.contains(e.target)&&k(!1)};return(x||w)&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[x,w]);const j=e=>{p(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},E=async(e,t)=>{try{await md.updateSnapshot(e,{liked:!t}),l?.()}catch(n){console.error("[HistoryPanel] Failed to toggle liked:",n)}},P=e=>{const n=t.find(t=>t.id===e);n&&b(n)},T=D.useMemo(()=>{let e=[...t];if(c.trim()){const t=c.toLowerCase();e=e.filter(e=>e.content.toLowerCase().includes(t)||e.actionDescription.toLowerCase().includes(t))}return d.size>0&&(e=e.filter(e=>(e=>"Manual edit"===e.actionDescription)(e)?d.has("manual"):d.has(e.actionType))),g&&(e=e.filter(e=>e.liked)),e.sort((e,t)=>{switch(f){case"newest":return t.timestamp-e.timestamp;case"oldest":return e.timestamp-t.timestamp;case"type":return e.actionType.localeCompare(t.actionType);default:return 0}}),e},[t,c,d,g,f]);return Q.jsxs(Q.Fragment,{children:[Q.jsx($d,{snapshot:v,onClose:()=>{b(null)},onRestore:a}),!s&&Q.jsx("button",{className:"history-panel-toggle",onClick:i,"aria-label":o?"Close history panel":"Open history panel","aria-expanded":o,title:o?"Close history":"Open history",children:Q.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:o?Q.jsx("polyline",{points:"9 18 15 12 9 6"}):Q.jsx("polyline",{points:"15 18 9 12 15 6"})})}),Q.jsxs("div",{className:"history-panel "+(o?"open":""),role:"region","aria-label":"Version history",children:[Q.jsxs("div",{className:"history-panel-header",children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[Q.jsx("h2",{className:"history-panel-title",children:"History"}),Q.jsxs("span",{className:"history-panel-count",children:[T.length," ",1===T.length?"version":"versions"]})]}),Q.jsxs("div",{className:"history-search",style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"20px",marginBottom:"12px"},children:[Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{flexShrink:0},children:[Q.jsx("circle",{cx:"11",cy:"11",r:"8"}),Q.jsx("path",{d:"m21 21-4.35-4.35"})]}),Q.jsx("input",{type:"text",placeholder:"Search history...",value:c,onChange:e=>u(e.target.value),"aria-label":"Search history",style:{flex:1,border:"none",background:"transparent",color:"var(--text)",fontSize:"var(--fs-sm)",outline:"none",minWidth:0}}),c&&Q.jsx("button",{onClick:()=>u(""),"aria-label":"Clear search",className:"history-search-clear",style:{padding:"4px",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",color:"var(--text-muted)",flexShrink:0},children:Q.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),Q.jsx("button",{className:"history-action-btn "+(g?"active":""),onClick:()=>m(!g),"aria-label":g?"Show all":"Show liked only",title:g?"Show all":"Show liked only",style:{padding:"4px",background:g?"var(--primary)":"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",color:g?"white":"var(--text-muted)",borderRadius:"4px",flexShrink:0},children:Q.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:g?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:Q.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}),Q.jsxs("div",{className:"history-sort-container",ref:C,style:{position:"relative",flexShrink:0},children:[Q.jsx("button",{className:"history-action-btn",onClick:()=>y(!x),"aria-label":"Sort options",title:"Sort",style:{padding:"4px",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",color:"var(--text-muted)",borderRadius:"4px"},children:Q.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),Q.jsx("polyline",{points:"19 12 12 19 5 12"})]})}),x&&Q.jsxs("div",{className:"history-sort-menu",children:[Q.jsx("button",{className:"newest"===f?"active":"",onClick:()=>{h("newest"),y(!1)},children:"Newest First"}),Q.jsx("button",{className:"oldest"===f?"active":"",onClick:()=>{h("oldest"),y(!1)},children:"Oldest First"}),Q.jsx("button",{className:"type"===f?"active":"",onClick:()=>{h("type"),y(!1)},children:"By Type"})]})]})]}),Q.jsxs("div",{className:"history-controls",children:[Q.jsxs("div",{className:"history-filters",children:[Q.jsx("button",{className:"history-filter-chip "+(d.has("generate")?"active":""),onClick:()=>j("generate"),"aria-label":"Filter by generate",title:"Generate",children:Q.jsx("svg",{width:"14",height:"14",viewBox:"0 0 56 56",fill:"currentColor",children:Q.jsx("path",{d:"M 26.6875 12.6602 C 26.9687 12.6602 27.1094 12.4961 27.1797 12.2383 C 27.9062 8.3242 27.8594 8.2305 31.9375 7.4570 C 32.2187 7.4102 32.3828 7.2461 32.3828 6.9648 C 32.3828 6.6836 32.2187 6.5195 31.9375 6.4726 C 27.8828 5.6524 28.0000 5.5586 27.1797 1.6914 C 27.1094 1.4336 26.9687 1.2695 26.6875 1.2695 C 26.4062 1.2695 26.2656 1.4336 26.1953 1.6914 C 25.3750 5.5586 25.5156 5.6524 21.4375 6.4726 C 21.1797 6.5195 20.9922 6.6836 20.9922 6.9648 C 20.9922 7.2461 21.1797 7.4102 21.4375 7.4570 C 25.5156 8.2774 25.4687 8.3242 26.1953 12.2383 C 26.2656 12.4961 26.4062 12.6602 26.6875 12.6602 Z M 15.3438 28.7852 C 15.7891 28.7852 16.0938 28.5039 16.1406 28.0821 C 16.9844 21.8242 17.1953 21.8242 23.6641 20.5821 C 24.0860 20.5117 24.3906 20.2305 24.3906 19.7852 C 24.3906 19.3633 24.0860 19.0586 23.6641 18.9883 C 17.1953 18.0977 16.9609 17.8867 16.1406 11.5117 C 16.0938 11.0899 15.7891 10.7852 15.3438 10.7852 C 14.9219 10.7852 14.6172 11.0899 14.5703 11.5352 C 13.7969 17.8164 13.4687 17.7930 7.0469 18.9883 C 6.6250 19.0821 6.3203 19.3633 6.3203 19.7852 C 6.3203 20.2539 6.6250 20.5117 7.1406 20.5821 C 13.5156 21.6133 13.7969 21.7774 14.5703 28.0352 C 14.6172 28.5039 14.9219 28.7852 15.3438 28.7852 Z M 31.2344 54.7305 C 31.8438 54.7305 32.2891 54.2852 32.4062 53.6524 C 34.0703 40.8086 35.8750 38.8633 48.5781 37.4570 C 49.2344 37.3867 49.6797 36.8945 49.6797 36.2852 C 49.6797 35.6758 49.2344 35.2070 48.5781 35.1133 C 35.8750 33.7070 34.0703 31.7617 32.4062 18.9180 C 32.2891 18.2852 31.8438 17.8633 31.2344 17.8633 C 30.6250 17.8633 30.1797 18.2852 30.0860 18.9180 C 28.4219 31.7617 26.5938 33.7070 13.9140 35.1133 C 13.2344 35.2070 12.7891 35.6758 12.7891 36.2852 C 12.7891 36.8945 13.2344 37.3867 13.9140 37.4570 C 26.5703 39.1211 28.3281 40.8321 30.0860 53.6524 C 30.1797 54.2852 30.6250 54.7305 31.2344 54.7305 Z"})})}),Q.jsx("button",{className:"history-filter-chip "+(d.has("rewrite")?"active":""),onClick:()=>j("rewrite"),"aria-label":"Filter by rewrite",title:"Rewrite",children:Q.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),Q.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),Q.jsx("button",{className:"history-filter-chip "+(d.has("summarize")?"active":""),onClick:()=>j("summarize"),"aria-label":"Filter by summarize",title:"Summarize",children:Q.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:Q.jsx("path",{d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})})}),Q.jsx("button",{className:"history-filter-chip "+(d.has("manual")?"active":""),onClick:()=>j("manual"),"aria-label":"Filter by manual edit",title:"Manual Edit",children:Q.jsx("svg",{width:"14",height:"14",viewBox:"0 0 600 600",fill:"currentColor",children:Q.jsx("path",{d:"M570.00006,459.23077 C567.6923,466.15387 559.6154,467.30768 553.8462,462.69232 L553.8462,462.69232 L460.3846,369.23077 L460.3846,369.23077 C453.46152,362.3077 441.92307,362.3077 435,369.23077 L435,369.23077 L369.23077,435 L369.23077,435 C362.30768,441.92307 362.30768,453.46155 369.23077,460.3846 L369.23077,460.3846 L463.84616,553.8461 L463.84616,553.8461 C468.46155,558.46155 466.15384,566.53845 460.3846,570 L460.3846,570 C444.23074,574.61536 426.92307,576.9231 410.7692,576.9231 L410.7692,576.9231 C312.6923,576.9231 234.23074,492.69232 245.7692,392.30768 L245.7692,392.30768 C248.07689,376.15387 251.53844,362.3077 257.30765,348.46155 L257.30765,348.46155 L41.538456,133.84616 L41.538456,133.84616 C16.153841,108.46155 16.153841,66.923096 41.538456,42.69226 L41.538456,42.69226 C54.230766,29.999939 71.53845,23.076904 87.6923,23.076904 L87.6923,23.076904 C103.84615,23.076904 121.15384,29.999939 133.84615,42.69226 L133.84615,42.69226 L348.46155,257.30768 L348.46155,257.30768 C362.3077,251.53845 377.3077,248.0769 392.3077,245.76923 L392.3077,245.76923 C492.69232,234.23074 576.92303,312.6923 576.92303,410.76923 L576.92303,410.76923 C576.92303,428.07693 574.61536,444.23077 570.00006,459.23077 Z",transform:"translate(0,600) scale(1,-1)"})})})]}),Q.jsx("div",{className:"history-actions",children:Q.jsxs("div",{className:"history-sort-container",ref:S,children:[Q.jsx("button",{className:"history-action-btn",onClick:()=>k(!w),"aria-label":"Clear history","aria-expanded":w,title:"Clear history",disabled:0===t.length,children:Q.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("polyline",{points:"3 6 5 6 21 6"}),Q.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})}),w&&Q.jsxs("div",{className:"history-clear-menu",children:[Q.jsx("p",{children:"Clear all history?"}),Q.jsxs("div",{className:"history-clear-actions",children:[Q.jsx("button",{className:"history-clear-cancel",onClick:()=>k(!1),children:"Cancel"}),Q.jsx("button",{className:"history-clear-confirm",onClick:async()=>{try{await md.clearSnapshots(e),k(!1),l?.()}catch(t){console.error("[HistoryPanel] Failed to clear history:",t)}},children:"Clear"})]})]})]})})]})]}),Q.jsx("div",{className:"history-panel-content",children:0===t.length?Q.jsxs("div",{className:"history-panel-empty",children:[Q.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"var(--text-muted)",marginBottom:"12px"},children:[Q.jsx("circle",{cx:"12",cy:"12",r:"10"}),Q.jsx("polyline",{points:"12 6 12 12 16 14"})]}),Q.jsx("p",{children:"No history yet"}),Q.jsx("p",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)"},children:"Versions will appear here after AI operations"})]}):0===T.length?Q.jsxs("div",{className:"history-panel-empty",children:[Q.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",style:{color:"var(--text-muted)",marginBottom:"12px"},children:[Q.jsx("circle",{cx:"11",cy:"11",r:"8"}),Q.jsx("path",{d:"m21 21-4.35-4.35"})]}),Q.jsx("p",{children:"No matching versions"}),Q.jsx("p",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)"},children:"Try adjusting your search or filters"})]}):Q.jsx("div",{className:"history-panel-list",children:T.map(e=>Q.jsx(Bd,{snapshot:e,isActive:n===e.id,onSelect:P,onToggleLiked:E},e.id))})})]}),Q.jsx("style",{children:"\n        /* History panel toggle button - just an arrow icon */\n        .history-panel-toggle {\n          position: fixed;\n          right: 69px;\n          top: 50%;\n          transform: translateY(-50%);\n          z-index: 99;\n          width: 24px;\n          height: 24px;\n          padding: 0;\n          border: none;\n          background: transparent;\n          color: var(--text-muted);\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .history-panel-toggle:hover {\n          color: var(--text);\n        }\n\n        .history-panel-toggle:focus-visible {\n          outline: none;\n        }\n\n        .history-panel-toggle:active {\n          transform: translateY(-50%) scale(0.9);\n        }\n\n        /* History panel - slides from right, UNDER sidebar, fills space dynamically */\n        .history-panel {\n          position: fixed;\n          left: 0;\n          right: 72px;\n          top: 0;\n          bottom: 0;\n          background: var(--bg);\n          border-left: 1px solid var(--border-muted);\n          transform: translateX(100%);\n          transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n          z-index: 50;\n          display: flex;\n          flex-direction: column;\n          overflow: hidden;\n        }\n\n        .history-panel.open {\n          transform: translateX(0);\n        }\n\n        /* History panel header - match original History component */\n        .history-panel-header {\n          padding: 24px 24px 16px 24px;\n          flex-shrink: 0;\n        }\n\n        .history-panel-title {\n          font-size: var(--fs-xl);\n          font-weight: 600;\n          color: var(--text);\n          margin: 0 0 16px 0;\n        }\n\n        .history-panel-count {\n          font-size: var(--fs-xs);\n          color: var(--text-muted);\n          margin-left: 8px;\n        }\n\n        /* History panel content */\n        .history-panel-content {\n          flex: 1;\n          overflow-y: auto;\n          overflow-x: hidden;\n        }\n\n        /* Empty state */\n        .history-panel-empty {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          padding: 48px 24px;\n          text-align: center;\n          color: var(--text-muted);\n          font-size: var(--fs-sm);\n        }\n\n        .history-panel-empty p {\n          margin: 0 0 8px 0;\n        }\n\n        /* Snapshot list */\n        .history-panel-list {\n          padding: 16px 24px;\n        }\n\n        /* Scrollbar styling for history panel */\n        .history-panel-content::-webkit-scrollbar {\n          width: 8px;\n        }\n\n        .history-panel-content::-webkit-scrollbar-track {\n          background: transparent;\n        }\n\n        .history-panel-content::-webkit-scrollbar-thumb {\n          background: var(--border);\n          border-radius: 4px;\n        }\n\n        .history-panel-content::-webkit-scrollbar-thumb:hover {\n          background: var(--highlight);\n        }\n\n        /* Search bar */\n        .history-search {\n          position: relative;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 8px 12px;\n          background: var(--surface-2);\n          border: 1px solid var(--border-muted);\n          border-radius: var(--radius-sm);\n          margin-bottom: 12px;\n        }\n\n        .history-search svg {\n          color: var(--text-muted);\n          flex-shrink: 0;\n        }\n\n        .history-search input {\n          flex: 1;\n          background: transparent;\n          border: none;\n          color: var(--text);\n          font-size: var(--fs-sm);\n          outline: none;\n        }\n\n        .history-search input::placeholder {\n          color: var(--text-muted);\n        }\n\n        .history-search-clear {\n          padding: 4px;\n          background: transparent;\n          border: none;\n          color: var(--text-muted);\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border-radius: var(--radius-xs);\n        }\n\n        .history-search-clear:hover {\n          background: var(--surface-3);\n          color: var(--text);\n        }\n\n        /* Controls (filters + actions) */\n        .history-controls {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          gap: 8px;\n        }\n\n        /* Filters */\n        .history-filters {\n          display: flex;\n          gap: 6px;\n          flex-wrap: wrap;\n          flex: 1;\n        }\n\n        .history-filter-chip {\n          width: 32px;\n          height: 32px;\n          padding: 0;\n          background: transparent;\n          border: none;\n          border-radius: var(--radius-sm);\n          color: var(--text-muted);\n          cursor: pointer;\n          transition: all 0.15s ease;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .history-filter-chip:hover {\n          background: var(--surface-2);\n          border: 1px solid var(--border-muted);\n          color: var(--text);\n        }\n\n        .history-filter-chip.active {\n          background: var(--primary);\n          border: 1px solid var(--primary);\n          color: white;\n        }\n\n        /* Actions */\n        .history-actions {\n          display: flex;\n          gap: 4px;\n        }\n\n        .history-action-btn {\n          width: 32px;\n          height: 32px;\n          padding: 0;\n          background: transparent;\n          border: none;\n          border-radius: var(--radius-sm);\n          color: var(--text-muted);\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          transition: all 0.2s ease;\n        }\n\n        .history-action-btn:hover {\n          background: var(--surface-2);\n          border: 1px solid var(--border-muted);\n          color: var(--text);\n        }\n\n        .history-action-btn.active {\n          background: var(--accent);\n          border: 1px solid var(--accent);\n          color: white;\n        }\n\n        /* Sort menu */\n        .history-sort-container {\n          position: relative;\n        }\n\n        .history-sort-menu {\n          position: absolute;\n          top: calc(100% + 4px);\n          right: 0;\n          min-width: 150px;\n          background: var(--surface-2);\n          border: 1px solid var(--border);\n          border-radius: var(--radius-md);\n          box-shadow: var(--shadow-soft);\n          padding: 4px;\n          z-index: 10;\n        }\n\n        .history-sort-menu button {\n          width: 100%;\n          padding: 8px 12px;\n          background: transparent;\n          border: none;\n          color: var(--text);\n          font-size: var(--fs-sm);\n          text-align: left;\n          cursor: pointer;\n          border-radius: var(--radius-sm);\n          transition: background 0.2s ease;\n        }\n\n        .history-sort-menu button:hover {\n          background: var(--surface-3);\n        }\n\n        .history-sort-menu button.active {\n          background: var(--accent);\n          color: white;\n        }\n\n        /* Clear menu */\n        .history-clear-container {\n          position: relative;\n        }\n\n        .history-clear-menu {\n          position: absolute;\n          top: calc(100% + 4px);\n          right: 0;\n          min-width: 180px;\n          background: var(--surface-2);\n          border: 1px solid var(--border);\n          border-radius: var(--radius-md);\n          box-shadow: var(--shadow-soft);\n          padding: 12px;\n          z-index: 10;\n        }\n\n        .history-clear-menu p {\n          margin: 0 0 12px 0;\n          font-size: var(--fs-sm);\n          color: var(--text);\n          font-weight: 500;\n        }\n\n        .history-clear-actions {\n          display: flex;\n          gap: 8px;\n        }\n\n        .history-clear-cancel,\n        .history-clear-confirm {\n          flex: 1;\n          padding: 6px 12px;\n          border: none;\n          border-radius: var(--radius-sm);\n          font-size: var(--fs-sm);\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .history-clear-cancel {\n          background: var(--surface-3);\n          color: var(--text);\n        }\n\n        .history-clear-cancel:hover {\n          background: var(--surface-4);\n        }\n\n        .history-clear-confirm {\n          background: #ef4444;\n          color: white;\n        }\n\n        .history-clear-confirm:hover {\n          background: #dc2626;\n        }\n\n        .history-action-btn:disabled {\n          opacity: 0.4;\n          cursor: not-allowed;\n        }\n\n        .history-action-btn:disabled:hover {\n          background: transparent;\n          border: none;\n          color: var(--text-muted);\n        }\n      "})]})}function Vd({pinnedNotes:e,activePinnedNoteIds:t,onToggleNote:n,onToggleAll:r,onToggleNone:a,isOpen:o,onToggle:i,hideToggle:l=!1}){const s=t.length,c=e.length>0&&s===e.length;return Q.jsxs(Q.Fragment,{children:[!l&&!o&&e.length>0&&Q.jsx("button",{onClick:i,"aria-label":"Open pinned notes","aria-expanded":!1,title:"Open pinned notes",className:"pinned-notes-toggle "+(s>0?"has-active-notes":""),children:Q.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Q.jsx("polyline",{points:"18 15 12 9 6 15"})})}),Q.jsxs("div",{className:"pinned-notes-panel "+(o?"open":""),role:"region","aria-label":"Pinned notes",children:[Q.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[Q.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("path",{d:"M12 17V3"}),Q.jsx("path",{d:"m6 11 6 6 6-6"}),Q.jsx("path",{d:"M19 21H5"})]}),Q.jsx("h3",{style:{margin:0,fontSize:"var(--fs-md)",fontWeight:600},children:"Pinned Notes"}),Q.jsx("span",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)",background:"var(--surface-2)",padding:"2px 8px",borderRadius:"var(--radius-sm)"},children:e.length})]}),Q.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.length>0&&(r||a)&&Q.jsxs("label",{style:{position:"relative",display:"inline-block",width:"48px",height:"28px",flexShrink:0,cursor:"pointer"},title:c?"Disable all notes":"Enable all notes",children:[Q.jsx("input",{type:"checkbox",checked:c,onChange:()=>c?a?.():r?.(),"aria-label":c?"Disable all notes":"Enable all notes",style:{opacity:0,width:0,height:0}}),Q.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:c?"var(--primary)":"var(--surface-2)",transition:"0.2s",borderRadius:"28px",border:"1px solid var(--border)"},children:Q.jsx("span",{style:{position:"absolute",content:'""',height:"20px",width:"20px",left:c?"24px":"4px",bottom:"3px",background:"white",transition:"0.2s",borderRadius:"50%"}})})]}),Q.jsx("button",{onClick:i,"aria-label":"Close pinned notes panel",style:{background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer",padding:"4px",borderRadius:"var(--radius-sm)",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>{e.currentTarget.style.background="var(--surface-2)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},children:Q.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("path",{d:"M18 6 6 18"}),Q.jsx("path",{d:"m6 6 12 12"})]})})]})]}),Q.jsx("div",{style:{flex:1,overflowY:"auto",padding:"16px"},children:0===e.length?Q.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-muted)"},children:[Q.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",style:{margin:"0 auto 16px",opacity:.5},children:[Q.jsx("path",{d:"M12 17V3"}),Q.jsx("path",{d:"m6 11 6 6 6-6"}),Q.jsx("path",{d:"M19 21H5"})]}),Q.jsx("p",{style:{margin:0,fontSize:"var(--fs-sm)"},children:"No pinned notes yet"}),Q.jsx("p",{style:{margin:"8px 0 0",fontSize:"var(--fs-xs)",opacity:.7},children:"Create pinned notes in Settings to provide context for AI operations"})]}):Q.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:e.map(e=>{const r=t.includes(e.id);return Q.jsxs("div",{style:{padding:"12px",background:r?"var(--surface-2)":"var(--bg)",border:"none",borderRadius:"var(--radius-md)",display:"flex",alignItems:"flex-start",gap:"12px",transition:"all 0.2s ease",opacity:r?1:.6},children:[Q.jsxs("div",{style:{flex:1,minWidth:0},children:[Q.jsx("div",{style:{fontSize:"var(--fs-sm)",fontWeight:600,marginBottom:"4px",color:"var(--text)"},children:e.title}),Q.jsx("div",{style:{fontSize:"var(--fs-xs)",color:"var(--text-muted)",lineHeight:1.5,wordBreak:"break-word",maxHeight:"120px",overflowY:"auto",paddingRight:"4px"},children:e.content})]}),Q.jsxs("label",{style:{position:"relative",display:"inline-block",width:"48px",height:"28px",flexShrink:0,cursor:"pointer"},children:[Q.jsx("input",{type:"checkbox",checked:r,onChange:()=>n(e.id),"aria-label":r?`Disable ${e.title}`:`Enable ${e.title}`,style:{opacity:0,width:0,height:0}}),Q.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:r?"var(--primary)":"var(--surface-2)",transition:"0.2s",borderRadius:"28px",border:"1px solid var(--border)"},children:Q.jsx("span",{style:{position:"absolute",content:'""',height:"20px",width:"20px",left:r?"24px":"4px",bottom:"3px",background:"white",transition:"0.2s",borderRadius:"50%"}})})]})]},e.id)})})}),e.length>0&&Q.jsx("div",{style:{padding:"12px 20px",borderTop:"1px solid var(--border)",fontSize:"var(--fs-xs)",color:"var(--text-muted)",textAlign:"center"},children:s>0?`${s} ${1===s?"note":"notes"} will be included as context`:"Toggle notes on to include them as context"})]}),Q.jsx("style",{children:"\n        /* Pinned notes toggle button - centered at bottom */\n        .pinned-notes-toggle {\n          position: fixed;\n          bottom: 0px;\n          left: calc((100% - 72px) / 2);\n          transform: translateX(-50%);\n          z-index: 99;\n          width: 24px;\n          height: 24px;\n          padding: 0;\n          border: none;\n          background: transparent;\n          color: var(--text-muted);\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justifyContent: center;\n        }\n\n        .pinned-notes-toggle:hover {\n          color: var(--text);\n        }\n\n        .pinned-notes-toggle:focus-visible {\n          outline: none;\n        }\n\n        .pinned-notes-toggle:active {\n          transform: translateX(-50%) scale(0.9);\n        }\n\n        /* Change arrow color and add glow when notes are active */\n        .pinned-notes-toggle.has-active-notes {\n          color: var(--primary);\n        }\n\n        .pinned-notes-toggle.has-active-notes svg {\n          filter: drop-shadow(0 0 4px color-mix(in srgb, var(--primary) 50%, transparent));\n          animation: pinned-notes-glow 2s ease-in-out infinite;\n        }\n\n        @keyframes pinned-notes-glow {\n          0%, 100% {\n            filter: drop-shadow(0 0 4px color-mix(in srgb, var(--primary) 40%, transparent));\n          }\n          50% {\n            filter: drop-shadow(0 0 8px color-mix(in srgb, var(--primary) 70%, transparent));\n          }\n        }\n\n        /* Pinned notes panel - slides from bottom, fills space like history panel */\n        .pinned-notes-panel {\n          position: fixed;\n          left: 0;\n          right: 72px;\n          top: 0;\n          bottom: 0;\n          background: var(--bg);\n          border-top: 1px solid var(--border-muted);\n          border-right: 1px solid var(--border-muted);\n          transform: translateY(100%);\n          transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n          z-index: 50;\n          display: flex;\n          flex-direction: column;\n          overflow: hidden;\n        }\n\n        .pinned-notes-panel.open {\n          transform: translateY(0);\n        }\n      "})]})}function Yd(){const{state:e,actions:t}=od(),[n,r]=D.useState(new Set(["home"])),[a,o]=D.useState(""),[i,l]=D.useState({start:0,end:0}),[s,c]=D.useState(!1),u=D.useRef(null),[d,p]=D.useState(""),[f,h]=D.useState(""),[g,m]=D.useState(""),x=D.useRef(!1),y=D.useRef(!1),[v,b]=D.useState([]),[w,k]=D.useState(null),[C,S]=D.useState(!1),[j,E]=D.useState(null),[P,T]=D.useState(!1),I=D.useRef(null),[N,L]=D.useState(null),[A,R]=D.useState([]),[z,M]=D.useState(null),[O,_]=D.useState([]),[F,U]=D.useState([]),[B,W]=D.useState(!1),[$,H]=D.useState(!1),V=D.useRef(null),[Y,G]=D.useState(!1),[K,q]=D.useState(""),X=D.useRef(null),Z=D.useRef(""),J=D.useRef(null),ee=D.useRef(!1),te=D.useRef(null);D.useEffect(()=>{te.current=w},[w]);D.useEffect(()=>()=>{X.current&&clearTimeout(X.current),J.current&&clearTimeout(J.current),I.current&&clearTimeout(I.current)},[]),D.useEffect(()=>{"light"===e.settings.theme?document.documentElement.classList.add("light"):document.documentElement.classList.remove("light"),void 0!==e.settings.accentHue&&document.documentElement.style.setProperty("--accent-hue",e.settings.accentHue.toString())},[e.settings.theme,e.settings.accentHue]),D.useEffect(()=>{const e=(e,n,i)=>{if("PING_PANEL"!==e.type&&console.log("[Panel] Received message:",e),"background-relay"===e.source){switch(e.type){case"PING_PANEL":return i({success:!0,data:{message:"Panel is open"}}),!0;case"OPEN_GENERATE_TAB":t.setActiveTab("generate"),r(e=>new Set(e).add("generate")),e.payload?.text&&(o(e.payload.text),t.setCurrentText(e.payload.text)),chrome.storage.local.set({"flint.lastTab":"generate"}),i({success:!0,data:{message:"Opened Generate tab"}});break;case"OPEN_SUMMARY_TAB":t.setActiveTab("summary"),r(e=>new Set(e).add("summary")),e.payload?.text?(o(e.payload.text),t.setCurrentText(e.payload.text),chrome.storage.local.set({"flint.lastTab":"summary","flint.selectedText":e.payload.text})):chrome.storage.local.set({"flint.lastTab":"summary"}),i({success:!0,data:{message:"Opened Summary tab"}});break;case"OPEN_REWRITE_TAB":t.setActiveTab("rewrite"),r(e=>new Set(e).add("rewrite")),e.payload?.text?(o(e.payload.text),t.setCurrentText(e.payload.text),t.setCurrentResult(""),chrome.storage.local.set({"flint.lastTab":"rewrite","flint.selectedText":e.payload.text})):chrome.storage.local.set({"flint.lastTab":"rewrite"}),i({success:!0,data:{message:"Opened Rewrite tab"}});break;case"INSERT_AND_OPEN_GENERATE":if(e.payload?.text&&u.current){const t=e.payload.text.trim();console.log("[Panel] INSERT_AND_OPEN_GENERATE - appending text at end:",t.substring(0,50)+"...");const n=u.current.getTextarea();if(n){const e=a.length;n.setSelectionRange(e,e),console.log("[Panel] Moved cursor to end:",e)}u.current.insertAtCursor(t,!1,!1)}return t.setActiveTab("generate"),r(e=>new Set(e).add("generate")),chrome.storage.local.set({"flint.lastTab":"generate"}),setTimeout(()=>{const e=u.current?.getTextarea();if(e){const t=e.value.length;e.setSelectionRange(t,t),console.log("[Panel] Cleared selection, cursor at end for Generate")}},100),i({success:!0,data:{message:"Inserted text and opened Generate tab"}}),!0;case"INSERT_AND_OPEN_SUMMARY":if(e.payload?.text&&u.current){const t=e.payload.text.trim();console.log("[Panel] INSERT_AND_OPEN_SUMMARY - appending text at end:",t.substring(0,50)+"...");const n=u.current.getTextarea();if(n){const e=a.length;n.setSelectionRange(e,e),console.log("[Panel] Moved cursor to end:",e)}u.current.insertAtCursor(t,!0,!1),setTimeout(()=>{if(n){const e=a.length+t.length;n.setSelectionRange(a.length,e),console.log("[Panel] Cursor at end of selection")}},50)}return t.setActiveTab("summary"),r(e=>new Set(e).add("summary")),chrome.storage.local.set({"flint.lastTab":"summary"}),i({success:!0,data:{message:"Inserted text and opened Summary tab"}}),!0;case"INSERT_AND_OPEN_REWRITE":if(e.payload?.text&&u.current){const t=e.payload.text.trim();console.log("[Panel] INSERT_AND_OPEN_REWRITE - appending text at end:",t.substring(0,50)+"...");const n=u.current.getTextarea();if(n){const e=a.length;n.setSelectionRange(e,e),console.log("[Panel] Moved cursor to end:",e)}u.current.insertAtCursor(t,!0,!1),setTimeout(()=>{if(n){const e=a.length+t.length;n.setSelectionRange(a.length,e),console.log("[Panel] Cursor at end of selection")}},50)}return t.setActiveTab("rewrite"),r(e=>new Set(e).add("rewrite")),chrome.storage.local.set({"flint.lastTab":"rewrite"}),i({success:!0,data:{message:"Inserted text and opened Rewrite tab"}}),!0;default:return}return!0}};return chrome.runtime.onMessage.addListener(e),()=>{chrome.runtime.onMessage.removeListener(e)}},[t]);const ne=D.useCallback(async(e,t)=>{try{S(!0),E(null);const n=await md.updateProject(e,{content:t});n&&(k(n),T(!0),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{T(!1)},2e3))}catch(n){console.error("[Panel] Auto-save failed:",n);const e=n instanceof Error?n.message:"Failed to save project";E(e),setTimeout(()=>E(null),5e3)}finally{S(!1)}},[]),re=D.useCallback(e=>{o(e),t.setCurrentText(e),M(null),X.current&&clearTimeout(X.current),X.current=setTimeout(async()=>{let t=te.current;if(!t&&e.trim())try{console.log("[Panel] No project selected, auto-creating new project");const n=0===(await md.getProjects()).length?"My first project":"My project",r=await md.createProject(n,e);k(r),te.current=r,b(e=>[r,...e]),t=r,console.log("[Panel] Auto-created project:",r.id,"with title:",n)}catch(n){return void console.error("[Panel] Failed to auto-create project:",n)}if(t)try{S(!0);const n=await md.updateProject(t.id,{content:e});n&&(k(n),te.current=n,b(e=>e.map(e=>e.id===n.id?n:e)),T(!0),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{T(!1)},2e3))}catch(n){console.error("[Panel] Auto-save failed:",n)}finally{S(!1)}else e.trim()||console.log("[Panel] No content to save, skipping project creation")},500),J.current&&clearTimeout(J.current),J.current=setTimeout(async()=>{const t=te.current;if(t){const r=Z.current;if(r){if(Math.abs(e.length-r.length)>=50)try{const n=await md.createSnapshot(t.id,r,"generate","Manual edit",void 0);R(e=>[n,...e]),Z.current=e,console.log("[Panel] Created auto-snapshot for manual edit")}catch(n){console.error("[Panel] Failed to create auto-snapshot:",n)}}else Z.current=e}},3e3)},[t]),ae=D.useCallback(async()=>{X.current&&clearTimeout(X.current);const e=te.current;if(e)try{console.log("[Panel] Force saving project before export");const t=await md.updateProject(e.id,{content:a});t&&(k(t),b(e=>e.map(e=>e.id===t.id?t:e)),console.log("[Panel] Force save completed"))}catch(t){throw console.error("[Panel] Force save failed:",t),t}},[a]),oe=D.useCallback(e=>{l(e),y.current=!1},[]),ie=D.useCallback(e=>{t.setIsProcessing(!0),c(!0);const n=u;n?.current&&e&&("generate"===e?n.current.showCursorIndicator():n.current.showSelectionOverlay())},[t,e.activeTab]),le=D.useCallback(async(e,n,r)=>{if(t.setIsProcessing(!1),c(!1),t.setCurrentResult(e),w)try{let e="";switch(n){case"generate":e="Generated new text";break;case"rewrite":e="Rewrote text";break;case"summarize":e="Summarized text"}const t=await md.createSnapshot(w.id,a,n,e,i);R(e=>[t,...e]),Z.current=a,console.log(`[Panel] Created snapshot before ${n} operation:`,t.id)}catch(p){console.error("[Panel] Failed to create snapshot:",p)}const l=u,s=l?.current?.getTextarea(),d=l?.current?.getCapturedSelection();if(x.current=!0,"generate"!==n)if(s&&d&&d.start!==d.end)try{const t=function(e,t,n,r){let a=t;const o=n>0?e[n-1]:"",i=a[0]||"",l=o&&!/\s/.test(o)&&i&&!/\s/.test(i),s=r<e.length?e[r]:"",c=a[a.length-1]||"";return l&&(a=" "+a),s&&!/\s/.test(s)&&c&&!/\s/.test(c)&&(a+=" "),a}(a,e,d.start,d.end),i=a;await zd(s,t,d.start,d.end,(e,t)=>{const n=i.substring(0,d.start),r=i.substring(d.end);o(n+e+r);const a=d.start+t;l?.current?.updateCapturedSelection(d.start,a)},()=>{const e=d.start+t.length;s.focus(),s.setSelectionRange(d.start,e),l?.current&&l.current.updateCapturedSelection(d.start,e);const n=i.substring(0,d.start)+t+i.substring(d.end);l?.current&&(l.current.pushToHistory(n,d.start,e),console.log("[Panel] Pushed AI rewrite/summarize to undo history")),re(n),w&&fe(w.title)&&r&&setTimeout(async()=>{try{const e=await bd.generateTitle(r);if(e&&"Untitled"!==e){console.log("[Panel] AI-generated title:",e);const t=await md.updateProject(w.id,{title:e});t&&(k(t),te.current=t,await ce())}}catch(p){console.error("[Panel] Failed to AI-generate title, falling back to simple extraction:",p);const r=Ad(n);if(r&&"Untitled"!==r)try{const e=await md.updateProject(w.id,{title:r});e&&(k(e),te.current=e,await ce())}catch(e){console.error("[Panel] Fallback title update failed:",e)}}},500)}),console.log(`[Panel] ${n} operation completed with inline replacement`)}catch(p){console.error("[Panel] Inline replacement failed:",p),o(e)}else o(e),console.log(`[Panel] ${n} operation completed (no inline replacement)`);else if(s&&d)try{const t=d.start!==d.end,n=t?d.end:d.start,i=d.start>0?a[d.start-1]:"",c=e[0]||"",u=i&&!/\s/.test(i)&&c&&!/\s/.test(c),f=n<a.length?a[n]:"",h=e[e.length-1]||"",g=(u?" ":"")+e+(f&&!/\s/.test(f)&&h&&!/\s/.test(h)?" ":""),m=a;await zd(s,g,d.start,n,(e,t)=>{const r=m.substring(0,d.start),a=m.substring(n);o(r+e+a)},()=>{const e=d.start+g.length;s.focus(),t?(s.setSelectionRange(d.start,e),l?.current&&l.current.updateCapturedSelection(d.start,e)):(s.setSelectionRange(e,e),l?.current&&l.current.updateCapturedSelection(e,e));const a=m.substring(0,d.start)+g+m.substring(n);l?.current&&(l.current.pushToHistory(a,e,e),console.log("[Panel] Pushed AI generate to undo history")),re(a),w&&fe(w.title)&&r&&setTimeout(async()=>{try{const e=await bd.generateTitle(r);if(e&&"Untitled"!==e){console.log("[Panel] AI-generated title:",e);const t=await md.updateProject(w.id,{title:e});t&&(k(t),te.current=t,await ce())}}catch(p){console.error("[Panel] Failed to AI-generate title, falling back to simple extraction:",p);const n=Ad(a);if(n&&"Untitled"!==n)try{const e=await md.updateProject(w.id,{title:n});e&&(k(e),te.current=e,await ce())}catch(e){console.error("[Panel] Fallback title update failed:",e)}}},500),x.current=!1}),console.log(`[Panel] Generate operation completed with streaming, ${t?"replaced selection":"inserted at cursor"} at position ${d.start}-${n}`)}catch(p){console.error("[Panel] Streaming failed:",p);const t=d.start!==d.end?d.end:d.start,n=a.substring(0,d.start),r=a.substring(t);o(n+e+r)}else o(e),console.log("[Panel] Generate operation completed, content set (no cursor position)")},[t,e.activeTab,i,w,a]),se=D.useCallback(e=>{t.setIsProcessing(!1),c(!1),t.setError(e),alert(e),console.error("[Panel] Operation error:",e)},[t]),ce=D.useCallback(async()=>{try{const e=await md.getProjects();b(e);const t=te.current;if(t){const n=e.find(e=>e.id===t.id);n&&(k(n),t.title!==n.title&&console.log("[Panel] Current project refreshed after update:",n.title))}}catch(e){console.error("[Panel] Failed to load projects:",e)}},[]),ue=D.useCallback(async()=>{try{const e=await md.getPinnedNotes();_(e)}catch(e){console.error("[Panel] Failed to load pinned notes:",e)}},[]);D.useEffect(()=>{ue()},[e.activeTab,ue]);const de=D.useCallback(async e=>{try{w&&X.current&&(clearTimeout(X.current),await ne(w.id,a));const n=await md.getProject(e);n&&(k(n),o(n.content),t.setCurrentText(n.content),t.setActiveTab("generate"),r(e=>new Set(e).add("generate")),Z.current=n.content,await md.setLastProjectId(n.id),console.log("[Panel] Loaded project:",n.title))}catch(n){console.error("[Panel] Failed to load project:",n),alert("Failed to load project. Please try again.")}},[w,a,ne,t]),pe=D.useCallback(async()=>0===(await md.getProjects()).filter(e=>e.id!==w?.id).length?"My first project":"My project",[w]),fe=e=>["Untitled","Untitled Project","My project","My first project","My First Project"].includes(e),he=D.useCallback(async()=>{try{w&&X.current&&(clearTimeout(X.current),await ne(w.id,a));const e=await pe(),n=await md.createProject(e,"");k(n),o(""),t.setCurrentText(""),t.setActiveTab("generate"),r(e=>new Set(e).add("generate")),Z.current="",await md.setLastProjectId(n.id),await ce(),console.log("[Panel] Created new project:",n.id,"with title:",e)}catch(e){console.error("[Panel] Failed to create project:",e),alert("Failed to create project. Please try again.")}},[w,a,ne,t,ce,pe]),ge=D.useCallback(async e=>{try{await md.deleteProject(e),w?.id===e&&(k(null),o(""),t.setCurrentText("")),await ce(),console.log("[Panel] Deleted project:",e)}catch(n){console.error("[Panel] Failed to delete project:",n),alert("Failed to delete project. Please try again.")}},[w,t,ce]);D.useEffect(()=>{(async()=>{if(ee.current)return;ee.current=!0,bd.setDownloadProgressCallback(e=>{L(e),e>=1&&setTimeout(()=>L(null),2e3)}),bd.checkAvailability().then(e=>"after-download"===e.summarizerAPI||"after-download"===e.rewriterAPI||"after-download"===e.writerAPI?(console.log("[Panel] AI models need download, pre-warming with progress..."),bd.prewarmModels()):(console.log("[Panel] AI models available, pre-warming silently..."),bd.setDownloadProgressCallback(null),bd.prewarmModels())).catch(e=>{console.error("[Panel] AI warmup failed:",e)}),await ce(),await ue();const e=await md.getLastProjectId();if(e)try{const n=await md.getProject(e);if(n)return k(n),o(n.content),t.setCurrentText(n.content),Z.current=n.content,t.setActiveTab("generate"),r(e=>new Set(e).add("generate")),void console.log("[Panel] Loaded last used project:",n.title)}catch(a){console.error("[Panel] Failed to load last project:",a)}const n=await md.getProjects();if(0===n.length)try{const e=await md.createProject("My First Project","");k(e),o(""),t.setCurrentText(""),Z.current="",await md.setLastProjectId(e.id),t.setActiveTab("generate"),r(e=>new Set(e).add("generate")),console.log("[Panel] Created default project:",e.id)}catch(a){console.error("[Panel] Failed to create default project:",a)}else{const e=n[0];e&&(k(e),o(e.content),t.setCurrentText(e.content),Z.current=e.content,await md.setLastProjectId(e.id),t.setActiveTab("generate"),r(e=>new Set(e).add("generate")),console.log("[Panel] Loaded most recent project:",e.title))}})()},[ce,t]),D.useEffect(()=>{(async()=>{try{await md.checkAndMigrateHistory(),await ce()}catch(e){console.error("[Panel] Migration check failed:",e)}})()},[ce]),D.useEffect(()=>{(async()=>{if(w)try{const e=await md.getSnapshots(w.id);R(e)}catch(e){console.error("[Panel] Failed to load snapshots:",e)}else R([])})()},[w]);const me=D.useCallback(e=>{const n=A.find(t=>t.id===e);n&&(o(n.content),t.setCurrentText(n.content),M(e),console.log("[Panel] Loaded snapshot:",e))},[A,t]),xe=D.useCallback(e=>{o(e),t.setCurrentText(e),t.setIsHistoryPanelOpen(!1),console.log("[Panel] Restored snapshot content to editor")},[t]),ye=D.useCallback(()=>{t.toggleHistoryPanel()},[t]);D.useEffect(()=>{["settings","projects","home"].includes(e.activeTab)&&e.isHistoryPanelOpen&&t.setIsHistoryPanelOpen(!1)},[e.activeTab,e.isHistoryPanelOpen,t]),D.useEffect(()=>{["settings","projects","home"].includes(e.activeTab)&&B&&W(!1)},[e.activeTab,B]);const ve=D.useCallback(e=>{if(w)try{const t=function(e){let t=e;return t=t.replace(/ {3,}/g," "),t=t.replace(/\n{4,}/g,"\n\n\n"),t=t.replace(/([.!?])([A-Z])/g,"$1 $2"),t=t.replace(/ +([.!?,;:])/g,"$1"),t=t.replace(/(^|[.!?]\s+)([a-z])/g,(e,t,n)=>t+n.toUpperCase()),t=t.replace(/\s+"/g,' "'),t=t.replace(/"\s+/g,'" '),t=t.split("\n").map(e=>e.trimEnd()).join("\n"),t=t.trim(),t}(a);Fd({...w,content:t},e),H(!1),console.log(`[Panel] Exported project as ${e} (auto-formatted)`)}catch(t){console.error("[Panel] Export failed:",t),alert("Failed to export project. Please try again.")}else alert("No project to export. Please create or select a project first.")},[w,a]),be=D.useCallback(()=>{w&&(q(w.title),G(!0))},[w]),we=D.useCallback(async()=>{if(w&&K.trim())try{const e=await md.updateProject(w.id,{title:K.trim()});e&&(k(e),await ce(),console.log("[Panel] Project title updated:",K))}catch(e){console.error("[Panel] Failed to update title:",e),alert("Failed to update project title. Please try again.")}finally{G(!1)}else G(!1)},[w,K,ce]);return D.useEffect(()=>{if(!$)return;const e=e=>{V.current&&!V.current.contains(e.target)&&H(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[$]),Q.jsxs("div",{className:"flint-bg h-screen relative",children:[Q.jsx(Pd,{items:[{id:"projects",label:"Projects",icon:"folder"},{id:"generate",label:"Generate",icon:"sparkles"},{id:"rewrite",label:"Rewrite",icon:"edit"},{id:"summary",label:"Summary",icon:"list"},{id:"settings",label:"Settings",icon:"settings"}],activeItemId:e.activeTab,onNavigate:e=>{const n=e;t.setActiveTab(n),r(e=>new Set(e).add(n)),window.getSelection()?.removeAllRanges(),chrome.storage.local.set({"flint.lastTab":n}),"projects"===n&&ce(),"generate"===n&&setTimeout(()=>{const e=u.current?.getTextarea();if(e){const t=e.value.length;e.setSelectionRange(t,t),e.focus(),console.log("[Panel] Switched to Generate - cursor at end:",t);const n=()=>{console.log("[Panel] User manually repositioned cursor"),e.removeEventListener("click",n)};e.addEventListener("click",n,{once:!0})}},100)}}),w&&Q.jsx(Hd,{projectId:w.id,snapshots:A,activeSnapshotId:z,onSnapshotSelect:me,onRestore:xe,isOpen:e.isHistoryPanelOpen,onToggle:ye,hideToggle:"settings"===e.activeTab||"projects"===e.activeTab||"home"===e.activeTab||B,onSnapshotsChange:async()=>{if(w){const e=await md.getSnapshots(w.id);R(e)}}}),Q.jsx(Vd,{pinnedNotes:O,activePinnedNoteIds:F,onToggleNote:e=>{U(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},onToggleAll:()=>{U(O.map(e=>e.id))},onToggleNone:()=>{U([])},isOpen:B,onToggle:()=>W(!B),hideToggle:"settings"===e.activeTab||"projects"===e.activeTab||"home"===e.activeTab||e.isHistoryPanelOpen}),null!==N&&N<1&&Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:9999}}),Q.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e4,padding:"24px",borderRadius:"var(--radius-lg)",background:"var(--bg)",border:"1px solid var(--border)",color:"var(--text)",fontSize:"var(--fs-sm)",display:"flex",flexDirection:"column",gap:"12px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",minWidth:"300px",maxWidth:"400px"},role:"status","aria-live":"polite",children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[Q.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),Q.jsx("polyline",{points:"7 10 12 15 17 10"}),Q.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Q.jsx("span",{style:{fontWeight:500,fontSize:"var(--fs-md)"},children:"Downloading AI model..."})]}),Q.jsx("div",{style:{width:"100%",height:"6px",background:"var(--surface-2)",borderRadius:"3px",overflow:"hidden"},children:Q.jsx("div",{style:{width:`${Math.round(100*N)}%`,height:"100%",background:"var(--accent)",transition:"width 0.3s ease"}})}),Q.jsxs("span",{style:{fontSize:"var(--fs-sm)",opacity:.7,textAlign:"center"},children:[Math.round(100*N),"% - First use only, ~1-2 min"]})]})]}),Q.jsx("div",{className:"content-area "+(e.activeTab?"expanded":""),children:Q.jsxs(Td,{onError:(t,n)=>{console.error("[Panel] Error boundary caught error:",{error:t.message,stack:t.stack,componentStack:n.componentStack,activeTab:e.activeTab})},children:[n.has("home")&&Q.jsx("div",{style:{display:"home"===e.activeTab?"block":"none",height:"100%"},children:Q.jsx(jd,{})}),(n.has("generate")||n.has("rewrite")||n.has("summary"))&&Q.jsxs("div",{style:{display:["generate","rewrite","summary"].includes(e.activeTab)?"flex":"none",height:"100%",flexDirection:"column",padding:"24px 14px 24px 14px",paddingRight:"8px"},children:[Q.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[Y?Q.jsx("input",{type:"text",value:K,onChange:e=>q(e.target.value),onBlur:we,onKeyDown:e=>{"Enter"===e.key?we():"Escape"===e.key&&G(!1)},autoFocus:!0,style:{fontSize:"var(--fs-lg)",fontWeight:600,color:"var(--text)",background:"var(--surface-2)",border:"1px solid var(--border)",borderRadius:"var(--radius-sm)",padding:"4px 8px",outline:"none",flex:1,maxWidth:"400px"}}):Q.jsx("h2",{onClick:be,style:{fontSize:"var(--fs-lg)",fontWeight:600,color:"var(--text)",margin:0,cursor:"pointer",padding:"4px 12px",borderRadius:"var(--radius-sm)",overflow:"auto",maxWidth:"400px",whiteSpace:"nowrap"},title:"Click to edit project name",children:w?.title||"Untitled Project"}),Q.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center",position:"relative"},children:[e.isProcessing&&Q.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid var(--border)",borderTopColor:"var(--text)",borderRadius:"50%",animation:"spin 0.8s linear infinite"},"aria-label":"Processing"}),Q.jsx("button",{onClick:async()=>{w&&a&&(X.current&&clearTimeout(X.current),await ne(w.id,a))},disabled:!w||C,"aria-label":C?"Saving...":P?"Saved!":j?"Save failed":"Save",title:C?"Saving...":P?"Saved!":j||"Save project",style:{width:"32px",height:"32px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",borderRadius:"var(--radius-sm)",color:j?"var(--error)":P?"var(--success, #10b981)":"var(--text-muted)",cursor:w&&!C?"pointer":"not-allowed",opacity:w?1:.5,transition:"all 0.2s ease",position:"relative"},onMouseEnter:e=>{!w||C||P||(e.currentTarget.style.background="var(--surface-2)",e.currentTarget.style.color=j?"var(--error)":"var(--text)")},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color=j?"var(--error)":P?"var(--success, #10b981)":"var(--text-muted)"},children:C?Q.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"spin 1s linear infinite"},children:Q.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}):P?Q.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Q.jsx("polyline",{points:"20 6 9 17 4 12"})}):Q.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),Q.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),Q.jsx("polyline",{points:"7 3 7 8 15 8"})]})}),Q.jsx("button",{onClick:()=>{const e=u.current?.getTextarea(),t=u.current?.getCapturedSelection();let n=a;e&&t&&t.start!==t.end?(n=a.substring(t.start,t.end),console.log("[Panel] Copying selected text")):console.log("[Panel] Copying all content"),n&&navigator.clipboard.writeText(n).then(()=>{console.log("[Panel] Content copied to clipboard")}).catch(e=>{console.error("[Panel] Failed to copy:",e)})},disabled:!a,"aria-label":"Copy content",title:"Copy selected text (or all if nothing selected)",style:{width:"32px",height:"32px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",borderRadius:"var(--radius-sm)",color:"var(--text-muted)",cursor:a?"pointer":"not-allowed",opacity:a?1:.5,transition:"all 0.2s ease"},onMouseEnter:e=>{a&&(e.currentTarget.style.background="var(--surface-2)",e.currentTarget.style.color="var(--text)")},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="var(--text-muted)"},children:Q.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),Q.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})}),Q.jsxs("div",{ref:V,style:{position:"relative"},children:[Q.jsx("button",{onClick:()=>H(!$),disabled:!w,"aria-label":"Export project","aria-expanded":$,title:"Export (auto-formats on export)",style:{width:"32px",height:"32px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",borderRadius:"var(--radius-sm)",color:"var(--text-muted)",cursor:w?"pointer":"not-allowed",opacity:w?1:.5,transition:"all 0.2s ease"},onMouseEnter:e=>{w&&(e.currentTarget.style.background="var(--surface-2)",e.currentTarget.style.color="var(--text)")},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="var(--text-muted)"},children:Q.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Q.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),Q.jsx("polyline",{points:"17 8 12 3 7 8"}),Q.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}),$&&Q.jsxs("div",{style:{position:"absolute",top:"calc(100% + 4px)",right:0,minWidth:"160px",background:"var(--surface-2)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",boxShadow:"var(--shadow-soft)",padding:"4px",zIndex:100},children:[Q.jsx("button",{onClick:()=>ve("txt"),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",color:"var(--text)",fontSize:"var(--fs-sm)",textAlign:"left",cursor:"pointer",borderRadius:"var(--radius-sm)",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="var(--surface-3)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"Plain Text (.txt)"}),Q.jsx("button",{onClick:()=>ve("md"),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",color:"var(--text)",fontSize:"var(--fs-sm)",textAlign:"left",cursor:"pointer",borderRadius:"var(--radius-sm)",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="var(--surface-3)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"Markdown (.md)"}),Q.jsx("button",{onClick:()=>ve("html"),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",color:"var(--text)",fontSize:"var(--fs-sm)",textAlign:"left",cursor:"pointer",borderRadius:"var(--radius-sm)",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="var(--surface-3)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"HTML (.html)"}),Q.jsx("button",{onClick:()=>ve("docx"),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",color:"var(--text)",fontSize:"var(--fs-sm)",textAlign:"left",cursor:"pointer",borderRadius:"var(--radius-sm)",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="var(--surface-3)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"Docs (.doc)"})]})]})]})]}),Q.jsx(Ld,{ref:u,content:a,onContentChange:re,activeTool:e.activeTab,onSelectionChange:oe,placeholder:"Let's start writing!",disabled:s,undoHistoryLimit:e.settings.undoHistoryLimit||10}),"generate"===e.activeTab&&Q.jsx(Rd,{activeTool:"generate",pinnedNotes:O.filter(e=>F.includes(e.id)),content:a,projectTitle:w?.title,selection:i,editorRef:u,generatePrompt:d,onGeneratePromptChange:p,onOperationStart:ie,onOperationComplete:le,onOperationError:se}),"rewrite"===e.activeTab&&Q.jsx(Rd,{activeTool:"rewrite",pinnedNotes:O.filter(e=>F.includes(e.id)),content:a,projectTitle:w?.title,selection:i,editorRef:u,rewritePrompt:f,onRewritePromptChange:h,onOperationStart:ie,onOperationComplete:le,onOperationError:se}),"summary"===e.activeTab&&Q.jsx(Rd,{activeTool:"summarize",pinnedNotes:O.filter(e=>F.includes(e.id)),content:a,projectTitle:w?.title,selection:i,editorRef:u,summarizePrompt:g,onSummarizePromptChange:m,onOperationStart:ie,onOperationComplete:le,onOperationError:se})]}),n.has("projects")&&Q.jsx("div",{style:{display:"projects"===e.activeTab?"block":"none",height:"100%"},children:Q.jsx(Ud,{projects:v,onProjectSelect:de,onProjectCreate:he,onProjectDelete:ge,onProjectUpdate:ce,onForceSave:ae,currentProjectId:w?.id,isOpen:"projects"===e.activeTab,onClose:()=>t.setActiveTab("generate")})}),n.has("settings")&&Q.jsx("div",{style:{display:"settings"===e.activeTab?"block":"none",height:"100%"},children:Q.jsx(Sd,{settings:e.settings,pinnedNotes:e.pinnedNotes,activePinnedNoteIds:F,onSettingsChange:t.setSettings,onPinnedNotesChange:t.setPinnedNotes,onActivePinnedNoteIdsChange:U})})]})}),Q.jsx("style",{children:'\n        /* Hide scrollbar by default */\n        h2[title="Click to edit project name"] {\n          scrollbar-width: none; /* Firefox */\n          -ms-overflow-style: none; /* IE/Edge */\n        }\n        \n        h2[title="Click to edit project name"]::-webkit-scrollbar {\n          height: 6px;\n          background: transparent;\n        }\n        \n        h2[title="Click to edit project name"]::-webkit-scrollbar-track {\n          background: transparent;\n        }\n        \n        h2[title="Click to edit project name"]::-webkit-scrollbar-thumb {\n          background: transparent;\n          border-radius: 3px;\n        }\n        \n        h2[title="Click to edit project name"]::-webkit-scrollbar-corner {\n          background: transparent;\n        }\n        \n        /* Show scrollbar on hover */\n        h2[title="Click to edit project name"]:hover {\n          scrollbar-width: thin; /* Firefox */\n          scrollbar-color: var(--border) transparent; /* Firefox */\n        }\n        \n        h2[title="Click to edit project name"]:hover::-webkit-scrollbar-thumb {\n          background: var(--border);\n        }\n        \n        h2[title="Click to edit project name"]:hover::-webkit-scrollbar-thumb:hover {\n          background: var(--text-muted);\n        }\n      '})]})}function Gd(){return Q.jsx(Td,{onError:(e,t)=>{console.error("[Panel] Top-level error boundary caught error:",{error:e.message,stack:e.stack,componentStack:t.componentStack})},children:Q.jsx(kd,{children:Q.jsx(Yd,{})})})}const Qd=document.getElementById("root");Qd&&td(Qd).render(Q.jsx(D.StrictMode,{children:Q.jsx(Gd,{})}));
